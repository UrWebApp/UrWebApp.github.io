import{a as i,b as a,j as o}from"./chunk-AM3MBALI.js";var c=class r{TEXTS_KEY="english_practice_texts";SETTINGS_KEY="english_practice_settings";SESSION_SETTINGS_KEY="english_practice_session_settings";constructor(){}getAllTexts(){let t=localStorage.getItem(this.TEXTS_KEY);return t?JSON.parse(t):[]}getTextById(t){return this.getAllTexts().find(e=>e.id===t)}saveText(t){let e=this.getAllTexts(),s=e.findIndex(n=>n.id===t.id);s>-1?e[s]=a(i({},t),{updatedAt:Date.now()}):e.push(a(i({},t),{createdAt:Date.now(),updatedAt:Date.now()})),this.saveAllTexts(e)}saveAllTexts(t){localStorage.setItem(this.TEXTS_KEY,JSON.stringify(t))}deleteText(t){let e=this.getAllTexts();e=e.filter(s=>s.id!==t),this.saveAllTexts(e)}getSettings(){let t=localStorage.getItem(this.SETTINGS_KEY),e={ttsVoiceURI:null,defaultRepeatCount:1,rate:1,volume:1,sentenceDelay:500};return t?i(i({},e),JSON.parse(t)):e}saveSettings(t){localStorage.setItem(this.SETTINGS_KEY,JSON.stringify(t))}getPracticeSessionSettings(t){let e=localStorage.getItem(this.SESSION_SETTINGS_KEY);return(e?JSON.parse(e):{})[t]||{selectedSentences:[]}}savePracticeSessionSettings(t,e){let s=localStorage.getItem(this.SESSION_SETTINGS_KEY),n=s?JSON.parse(s):{};n[t]=e,localStorage.setItem(this.SESSION_SETTINGS_KEY,JSON.stringify(n))}exportData(){let t=this.getAllTexts();return JSON.stringify(t,null,2)}importData(t){try{let e=JSON.parse(t);if(!Array.isArray(e))throw new Error("Invalid format: data is not an array.");return this.saveAllTexts(e),{success:!0,message:`\u6210\u529F\u532F\u5165 ${e.length} \u7BC7\u6587\u672C\uFF01`}}catch(e){return console.error("Import failed:",e),{success:!1,message:"\u532F\u5165\u5931\u6557\uFF1A\u6A94\u6848\u683C\u5F0F\u932F\u8AA4\u6216\u5DF2\u640D\u6BC0\u3002"}}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{c as a};
