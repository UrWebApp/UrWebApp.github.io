import{b,c as s,d as h,e as E,g as I,j as M,k as B,p as y,r as D}from"./chunk-SXBCIAQM.js";import{a as S}from"./chunk-BHYHBSD6.js";import{F as u,I as o,J as e,K as l,O as p,T as r,V as f,na as v,pa as x,ra as g,sa as F,u as a,ua as C,x as m,y as c}from"./chunk-AM3MBALI.js";var T=class d{constructor(t,i,n,_){this.fb=t;this.storageService=i;this.router=n;this.route=_;this.textForm=this.fb.group({title:["",s.required],content:["",s.required]})}textForm;isEditMode=!1;textId=null;ngOnInit(){if(this.textId=this.route.snapshot.paramMap.get("id"),this.textId){this.isEditMode=!0;let t=this.storageService.getTextById(this.textId);t?this.textForm.patchValue(t):this.router.navigate(["/"])}}onSubmit(){if(this.textForm.valid){let t=this.textForm.value,i={id:this.textId||`text_${Date.now()}`,title:t.title,content:t.content,createdAt:0,updatedAt:0};this.storageService.saveText(i),this.router.navigate(["/"])}}static \u0275fac=function(i){return new(i||d)(m(y),m(S),m(g),m(x))};static \u0275cmp=c({type:d,selectors:[["app-text-form"]],decls:16,vars:3,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["for","title"],["id","title","type","text","formControlName","title"],["for","content"],["id","content","formControlName","content","rows","15"],["type","submit",3,"disabled"],["type","button","routerLink","/"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"h1"),r(2),e(),o(3,"form",1),p("ngSubmit",function(){return n.onSubmit()}),o(4,"div")(5,"label",2),r(6,"\u6A19\u984C"),e(),l(7,"input",3),e(),o(8,"div")(9,"label",4),r(10,"\u82F1\u8A9E\u6587\u672C (\u6BCF\u53E5\u6216\u6BCF\u6BB5\u8ACB\u63DB\u884C)"),e(),l(11,"textarea",5),e(),o(12,"button",6),r(13,"\u5132\u5B58"),e(),o(14,"button",7),r(15,"\u53D6\u6D88"),e()()()),i&2&&(a(2),f("",n.isEditMode?"\u7DE8\u8F2F":"\u65B0\u589E","\u6587\u672C"),a(),u("formGroup",n.textForm),a(9),u("disabled",n.textForm.invalid))},dependencies:[v,D,I,b,h,E,M,B,C,F],styles:["form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:1.5rem}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:.25rem}"]})};export{T as TextFormComponent};
