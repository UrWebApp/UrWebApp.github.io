var qS=Object.defineProperty,zS=Object.defineProperties;var GS=Object.getOwnPropertyDescriptors;var Jv=Object.getOwnPropertySymbols,WS=Object.getPrototypeOf,KS=Object.prototype.hasOwnProperty,QS=Object.prototype.propertyIsEnumerable,YS=Reflect.get;var Xv=(n,e,t)=>e in n?qS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,te=(n,e)=>{for(var t in e||={})KS.call(e,t)&&Xv(n,t,e[t]);if(Jv)for(var t of Jv(e))QS.call(e,t)&&Xv(n,t,e[t]);return n},pe=(n,e)=>zS(n,GS(e));var nr=(n,e,t)=>YS(WS(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(d){i(d)}},s=u=>{try{c(t.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});function mh(n,e){return Object.is(n,e)}var ze=null,ac=!1,yh=1,zt=Symbol("SIGNAL");function ie(n){let e=ze;return ze=n,e}function _h(){return ze}var _s={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function uc(n){if(ac)throw new Error("");if(ze===null)return;ze.consumerOnSignalRead(n);let e=ze.nextProducerIndex++;if(hc(ze),e<ze.producerNode.length&&ze.producerNode[e]!==n&&ys(ze)){let t=ze.producerNode[e];dc(t,ze.producerIndexOfThis[e])}ze.producerNode[e]!==n&&(ze.producerNode[e]=n,ze.producerIndexOfThis[e]=ys(ze)?tI(n,ze,e):0),ze.producerLastReadVersion[e]=n.version}function eI(){yh++}function vh(n){if(!(ys(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===yh)){if(!n.producerMustRecompute(n)&&!Ch(n)){gh(n);return}n.producerRecomputeValue(n),gh(n)}}function Ih(n){if(n.liveConsumerNode===void 0)return;let e=ac;ac=!0;try{for(let t of n.liveConsumerNode)t.dirty||ZS(t)}finally{ac=e}}function Eh(){return ze?.consumerAllowSignalWrites!==!1}function ZS(n){n.dirty=!0,Ih(n),n.consumerMarkedDirty?.(n)}function gh(n){n.dirty=!1,n.lastCleanEpoch=yh}function lc(n){return n&&(n.nextProducerIndex=0),ie(n)}function wh(n,e){if(ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ys(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)dc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ch(n){hc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vh(t),r!==t.version))return!0}return!1}function Dh(n){if(hc(n),ys(n))for(let e=0;e<n.producerNode.length;e++)dc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function tI(n,e,t){if(nI(n),n.liveConsumerNode.length===0&&rI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=tI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function dc(n,e){if(nI(n),n.liveConsumerNode.length===1&&rI(n))for(let r=0;r<n.producerNode.length;r++)dc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];hc(i),i.producerIndexOfThis[r]=e}}function ys(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function hc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function nI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function rI(n){return n.producerNode!==void 0}function bh(n,e){let t=Object.create(JS);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(vh(t),uc(t),t.value===cc)throw t.error;return t.value};return r[zt]=t,r}var fh=Symbol("UNSET"),ph=Symbol("COMPUTING"),cc=Symbol("ERRORED"),JS=pe(te({},_s),{value:fh,dirty:!0,error:null,equal:mh,kind:"computed",producerMustRecompute(n){return n.value===fh||n.value===ph},producerRecomputeValue(n){if(n.value===ph)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ph;let t=lc(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==fh&&e!==cc&&r!==cc&&n.equal(e,r)}catch(o){r=cc,n.error=o}finally{wh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function XS(){throw new Error}var iI=XS;function oI(n){iI(n)}function Th(n){iI=n}var eA=null;function Sh(n,e){let t=Object.create(Mh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(uc(t),t.value);return r[zt]=t,r}function fc(n,e){Eh()||oI(n),n.equal(n.value,e)||(n.value=e,tA(n))}function Ah(n,e){Eh()||oI(n),fc(n,e(n.value))}var Mh=pe(te({},_s),{equal:mh,value:void 0,kind:"signal"});function tA(n){n.version++,eI(),Ih(n),eA?.()}function Nh(n){let e=ie(null);try{return n()}finally{ie(e)}}var xh;function vs(){return xh}function Nn(n){let e=xh;return xh=n,e}var pc=Symbol("NotFound");function ce(n){return typeof n=="function"}function gc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var mc=gc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Lr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof mc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sI(o)}catch(s){e=e??[],s instanceof mc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Lr(t,e)}remove(e){let{_finalizers:t}=this;t&&Lr(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var Rh=Je.EMPTY;function yc(n){return n instanceof Je||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function sI(n){ce(n)?n():n.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ki={setTimeout(n,e,...t){let{delegate:r}=ki;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ki;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _c(n){ki.setTimeout(()=>{let{onUnhandledError:e}=Gt;if(e)e(n);else throw n})}function Ph(){}var aI=Oh("C",void 0,void 0);function cI(n){return Oh("E",void 0,n)}function uI(n){return Oh("N",n,void 0)}function Oh(n,e,t){return{kind:n,value:e,error:t}}var Br=null;function Fi(n){if(Gt.useDeprecatedSynchronousErrorHandling){let e=!Br;if(e&&(Br={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Br;if(Br=null,t)throw r}}else n()}function lI(n){Gt.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=n)}var Ur=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yc(e)&&e.add(this)):this.destination=aA}static create(e,t,r){return new Vi(e,t,r)}next(e){this.isStopped?Fh(uI(e),this):this._next(e)}error(e){this.isStopped?Fh(cI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fh(aI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oA=Function.prototype.bind;function kh(n,e){return oA.call(n,e)}var Vh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vc(r)}else vc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vc(t)}}},Vi=class extends Ur{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kh(e.next,o),error:e.error&&kh(e.error,o),complete:e.complete&&kh(e.complete,o)}):i=e}this.destination=new Vh(i)}};function vc(n){Gt.useDeprecatedSynchronousErrorHandling?lI(n):_c(n)}function sA(n){throw n}function Fh(n,e){let{onStoppedNotification:t}=Gt;t&&ki.setTimeout(()=>t(n,e))}var aA={closed:!0,next:Ph,error:sA,complete:Ph};var Li=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ic(n){return n}function dI(n){return n.length===0?Ic:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Oe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=uA(t)?t:new Vi(t,r,i);return Fi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=hI(r),new r((i,o)=>{let s=new Vi({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Li](){return this}pipe(...t){return dI(t)(this)}toPromise(t){return t=hI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function hI(n){var e;return(e=n??Gt.Promise)!==null&&e!==void 0?e:Promise}function cA(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function uA(n){return n&&n instanceof Ur||cA(n)&&yc(n)}function lA(n){return ce(n?.lift)}function rr(n){return e=>{if(lA(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ir(n,e,t,r,i){return new Lh(n,e,t,r,i)}var Lh=class extends Ur{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var fI=gc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xn=(()=>{class n extends Oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ec(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new fI}next(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rh:(this.currentObservers=null,o.push(t),new Je(()=>{this.currentObservers=null,Lr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Oe;return t.source=this,t}}return n.create=(e,t)=>new Ec(e,t),n})(),Ec=class extends xn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Rh}};var or=class extends xn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Bh={now(){return(Bh.delegate||Date).now()},delegate:void 0};var wc=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var Is={setInterval(n,e,...t){let{delegate:r}=Is;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Is;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Bi=class extends wc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Is.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Is.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Lr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ui=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ui.now=Bh.now;var ji=class extends Ui{constructor(e,t=Ui.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Uh=new ji(Bi);var Cc=class extends Bi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dc=class extends ji{};var jh=new Dc(Cc);function pI(n){return n&&ce(n.schedule)}function gI(n){return n[n.length-1]}function mI(n){return ce(gI(n))?n.pop():void 0}function yI(n){return pI(gI(n))?n.pop():void 0}function $h(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function vI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(f){try{d(r.next(f))}catch(g){s(g)}}function u(f){try{d(r.throw(f))}catch(g){s(g)}}function d(f){f.done?o(f.value):i(f.value).then(c,u)}d((r=r.apply(n,e||[])).next())})}function _I(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jr(n){return this instanceof jr?(this.v=n,this):new jr(n)}function II(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(S){return Promise.resolve(S).then(m,g)}}function c(m,S){r[m]&&(i[m]=function(P){return new Promise(function(R,$){o.push([m,P,R,$])>1||u(m,P)})},S&&(i[m]=S(i[m])))}function u(m,S){try{d(r[m](S))}catch(P){y(o[0][3],P)}}function d(m){m.value instanceof jr?Promise.resolve(m.value.v).then(f,g):y(o[0][2],m)}function f(m){u("next",m)}function g(m){u("throw",m)}function y(m,S){m(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function EI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _I=="function"?_I(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(d){o({value:d,done:c})},s)}}var bc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tc(n){return ce(n?.then)}function Sc(n){return ce(n[Li])}function Ac(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function Mc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nc=dA();function xc(n){return ce(n?.[Nc])}function Rc(n){return II(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield jr(t.read());if(i)return yield jr(void 0);yield yield jr(r)}}finally{t.releaseLock()}})}function Pc(n){return ce(n?.getReader)}function sr(n){if(n instanceof Oe)return n;if(n!=null){if(Sc(n))return hA(n);if(bc(n))return fA(n);if(Tc(n))return pA(n);if(Ac(n))return wI(n);if(xc(n))return gA(n);if(Pc(n))return mA(n)}throw Mc(n)}function hA(n){return new Oe(e=>{let t=n[Li]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fA(n){return new Oe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pA(n){return new Oe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_c)})}function gA(n){return new Oe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wI(n){return new Oe(e=>{yA(n,e).catch(t=>e.error(t))})}function mA(n){return wI(Rc(n))}function yA(n,e){var t,r,i,o;return vI(this,void 0,void 0,function*(){try{for(t=EI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function nn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ar(n,e=0){return rr((t,r)=>{t.subscribe(ir(r,i=>nn(r,n,()=>r.next(i),e),()=>nn(r,n,()=>r.complete(),e),i=>nn(r,n,()=>r.error(i),e)))})}function cr(n,e=0){return rr((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function CI(n,e){return sr(n).pipe(cr(e),ar(e))}function DI(n,e){return sr(n).pipe(cr(e),ar(e))}function bI(n,e){return new Oe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function TI(n,e){return new Oe(t=>{let r;return nn(t,e,()=>{r=n[Nc](),nn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Oc(n,e){if(!n)throw new Error("Iterable cannot be null");return new Oe(t=>{nn(t,e,()=>{let r=n[Symbol.asyncIterator]();nn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function SI(n,e){return Oc(Rc(n),e)}function AI(n,e){if(n!=null){if(Sc(n))return CI(n,e);if(bc(n))return bI(n,e);if(Tc(n))return DI(n,e);if(Ac(n))return Oc(n,e);if(xc(n))return TI(n,e);if(Pc(n))return SI(n,e)}throw Mc(n)}function Es(n,e){return e?AI(n,e):sr(n)}function Hh(...n){let e=yI(n);return Es(n,e)}function rn(n,e){return rr((t,r)=>{let i=0;t.subscribe(ir(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:_A}=Array;function vA(n,e){return _A(e)?n(...e):n(e)}function MI(n){return rn(e=>vA(n,e))}var{isArray:IA}=Array,{getPrototypeOf:EA,prototype:wA,keys:CA}=Object;function NI(n){if(n.length===1){let e=n[0];if(IA(e))return{args:e,keys:null};if(DA(e)){let t=CA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function DA(n){return n&&typeof n=="object"&&EA(n)===wA}function xI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qh(...n){let e=mI(n),{args:t,keys:r}=NI(n),i=new Oe(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),u=s,d=s;for(let f=0;f<s;f++){let g=!1;sr(t[f]).subscribe(ir(o,y=>{g||(g=!0,d--),c[f]=y},()=>u--,void 0,()=>{(!u||!g)&&(d||o.next(r?xI(r,c):c),o.complete())}))}});return e?i.pipe(MI(e)):i}function zh(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?rr((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ir(o,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),o.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Ic}var bA="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Y=class extends Error{code;constructor(e,t){super(SA(e,t)),this.code=e}};function TA(n){return`NG0${Math.abs(n)}`}function SA(n,e){return`${TA(n)}${e?": "+e:""}`}function ks(n){return{toString:n}.toString()}var kc="__parameters__";function AA(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function _E(n,e,t){return ks(()=>{let r=AA(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,d,f){let g=u.hasOwnProperty(kc)?u[kc]:Object.defineProperty(u,kc,{value:[]})[kc];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Cs=globalThis;function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function MA(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(kt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function RI(n,e){return n?e?`${n} ${e}`:n:e||""}var NA=Me({__forward_ref__:Me});function gt(n){return n.__forward_ref__=gt,n.toString=function(){return kt(this())},n}function ft(n){return vE(n)?n():n}function vE(n){return typeof n=="function"&&n.hasOwnProperty(NA)&&n.__forward_ref__===gt}function _e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kf(n){return PI(n,IE)||PI(n,EE)}function PI(n,e){return n.hasOwnProperty(e)?n[e]:null}function xA(n){let e=n&&(n[IE]||n[EE]);return e||null}function OI(n){return n&&(n.hasOwnProperty(kI)||n.hasOwnProperty(RA))?n[kI]:null}var IE=Me({\u0275prov:Me}),kI=Me({\u0275inj:Me}),EE=Me({ngInjectableDef:Me}),RA=Me({ngInjectorDef:Me}),G=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=_e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wE(n){return n&&!!n.\u0275providers}var PA=Me({\u0275cmp:Me}),OA=Me({\u0275dir:Me}),kA=Me({\u0275pipe:Me});var $c=Me({\u0275fac:Me}),Ts=Me({__NG_ELEMENT_ID__:Me}),FI=Me({__NG_ENV_ID__:Me});function Ss(n){return typeof n=="string"?n:n==null?"":String(n)}function FA(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ss(n)}function CE(n,e){throw new Y(-200,n)}function Qf(n,e){throw new Y(-201,!1)}var ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ne||{}),cf;function DE(){return cf}function vt(n){let e=cf;return cf=n,e}function bE(n,e,t){let r=Kf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ne.Optional)return null;if(e!==void 0)return e;Qf(n,"Injector")}var VA={},Hr=VA,uf="__NG_DI_FLAG__",Hc=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?pc:Hr,r)}},qc="ngTempTokenPath",LA="ngTokenPath",BA=/\n/gm,UA="\u0275",VI="__source";function jA(n,e=ne.Default){if(vs()===void 0)throw new Y(-203,!1);if(vs()===null)return bE(n,void 0,e);{let t=vs(),r;return t instanceof Hc?r=t.injector:r=t,r.get(n,e&ne.Optional?null:void 0,e)}}function me(n,e=ne.Default){return(DE()||jA)(ft(n),e)}function he(n,e=ne.Default){return me(n,gu(e))}function gu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lf(n){let e=[];for(let t=0;t<n.length;t++){let r=ft(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=ne.Default;for(let s=0;s<r.length;s++){let c=r[s],u=$A(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(me(i,o))}else e.push(me(r))}return e}function TE(n,e){return n[uf]=e,n.prototype[uf]=e,n}function $A(n){return n[uf]}function HA(n,e,t,r){let i=n[qc];throw e[VI]&&i.unshift(e[VI]),n.message=qA(`
`+n.message,i,t,r),n[LA]=i,n[qc]=null,n}function qA(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==UA?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):kt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(BA,`
  `)}`}var St=TE(_E("Optional"),8);var zA=TE(_E("SkipSelf"),4);function zr(n,e){let t=n.hasOwnProperty($c);return t?n[$c]:null}function Yf(n,e){n.forEach(t=>Array.isArray(t)?Yf(t,e):e(t))}function SE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function zc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function GA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function WA(n,e,t){let r=Fs(n,e);return r>=0?n[r|1]=t:(r=~r,GA(n,r,e,t)),r}function Gh(n,e){let t=Fs(n,e);if(t>=0)return n[t|1]}function Fs(n,e){return KA(n,e,1)}function KA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Gr={},Ot=[],Gc=new G(""),AE=new G("",-1),ME=new G(""),Wc=class{get(e,t=Hr){if(t===Hr){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}};function As(n){return n[PA]||null}function QA(n){return n[OA]||null}function YA(n){return n[kA]||null}function to(n){return{\u0275providers:n}}function ZA(...n){return{\u0275providers:NE(!0,n),\u0275fromNgModule:!0}}function NE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Yf(e,s=>{let c=s;df(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&xE(i,o),t}function xE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Zf(i,o=>{e(o,r)})}}function df(n,e,t,r){if(n=ft(n),!n)return!1;let i=null,o=OI(n),s=!o&&As(n);if(!o&&!s){let u=n.ngModule;if(o=OI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)df(d,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{Yf(o.imports,f=>{df(f,e,t,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&xE(d,e)}if(!c){let d=zr(i)||(()=>new i);e({provide:i,useFactory:d,deps:Ot},i),e({provide:ME,useValue:i,multi:!0},i),e({provide:Gc,useValue:()=>me(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let d=n;Zf(u,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Zf(n,e){for(let t of n)wE(t)&&(t=t.\u0275providers),Array.isArray(t)?Zf(t,e):e(t)}var JA=Me({provide:String,useValue:Me});function RE(n){return n!==null&&typeof n=="object"&&JA in n}function XA(n){return!!(n&&n.useExisting)}function eM(n){return!!(n&&n.useFactory)}function Gi(n){return typeof n=="function"}function tM(n){return!!n.useClass}var mu=new G(""),Vc={},LI={},Wh;function Jf(){return Wh===void 0&&(Wh=new Wc),Wh}var dr=class{},Ms=class extends dr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ff(e,s=>this.processProvider(s)),this.records.set(AE,$i(void 0,this)),i.has("environment")&&this.records.set(dr,$i(void 0,this));let o=this.records.get(mu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ME,Ot,ne.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?pc:Hr,r)}destroy(){Ds(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return Ds(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ds(this);let t=Nn(this),r=vt(void 0),i;try{return e()}finally{Nn(t),vt(r)}}get(e,t=Hr,r=ne.Default){if(Ds(this),e.hasOwnProperty(FI))return e[FI](this);r=gu(r);let i,o=Nn(this),s=vt(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=sM(e)&&Kf(e);d&&this.injectableDefInScope(d)?u=$i(hf(e),Vc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let c=r&ne.Self?Jf():this.parent;return t=r&ne.Optional&&t===Hr?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[qc]=c[qc]||[]).unshift(kt(e)),o)throw c;return HA(c,e,"R3InjectorError",this.source)}else throw c}finally{vt(s),Nn(o)}}resolveInjectorInitializers(){let e=ie(null),t=Nn(this),r=vt(void 0),i;try{let o=this.get(Gc,Ot,ne.Self);for(let s of o)s()}finally{Nn(t),vt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ft(e);let t=Gi(e)?e:ft(e&&e.provide),r=rM(e);if(!Gi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=$i(void 0,Vc,!0),i.factory=()=>lf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ie(null);try{return t.value===LI?CE(kt(e)):t.value===Vc&&(t.value=LI,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&oM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ft(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function hf(n){let e=Kf(n),t=e!==null?e.factory:zr(n);if(t!==null)return t;if(n instanceof G)throw new Y(204,!1);if(n instanceof Function)return nM(n);throw new Y(204,!1)}function nM(n){if(n.length>0)throw new Y(204,!1);let t=xA(n);return t!==null?()=>t.factory(n):()=>new n}function rM(n){if(RE(n))return $i(void 0,n.useValue);{let e=PE(n);return $i(e,Vc)}}function PE(n,e,t){let r;if(Gi(n)){let i=ft(n);return zr(i)||hf(i)}else if(RE(n))r=()=>ft(n.useValue);else if(eM(n))r=()=>n.useFactory(...lf(n.deps||[]));else if(XA(n))r=(i,o)=>me(ft(n.useExisting),o!==void 0&&o&ne.Optional?ne.Optional:void 0);else{let i=ft(n&&(n.useClass||n.provide));if(iM(n))r=()=>new i(...lf(n.deps));else return zr(i)||hf(i)}return r}function Ds(n){if(n.destroyed)throw new Y(205,!1)}function $i(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function iM(n){return!!n.deps}function oM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function sM(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function ff(n,e){for(let t of n)Array.isArray(t)?ff(t,e):t&&wE(t)?ff(t.\u0275providers,e):e(t)}function OE(n,e){let t;n instanceof Ms?(Ds(n),t=n):t=new Hc(n);let r,i=Nn(t),o=vt(void 0);try{return e()}finally{Nn(i),vt(o)}}function aM(){return DE()!==void 0||vs()!=null}function cM(n){return typeof n=="function"}var On=0,ae=1,J=2,pt=3,Kt=4,Qt=5,Kc=6,Qc=7,It=8,Wi=9,hr=10,Le=11,Ns=12,BI=13,no=14,sn=15,Ki=16,Hi=17,Qi=18,yu=19,kE=20,ur=21,Kh=22,Yc=23,Ft=24,Qh=25,Et=26,FE=1;var Wr=7,Zc=8,Jc=9,Vt=10;function lr(n){return Array.isArray(n)&&typeof n[FE]=="object"}function kn(n){return Array.isArray(n)&&n[FE]===!0}function Xf(n){return(n.flags&4)!==0}function ro(n){return n.componentOffset>-1}function _u(n){return(n.flags&1)===1}function an(n){return!!n.template}function Xc(n){return(n[J]&512)!==0}function io(n){return(n[J]&256)===256}var pf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function VE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var dn=(()=>{let n=()=>LE;return n.ngInherit=!0,n})();function LE(n){return n.type.prototype.ngOnChanges&&(n.setInput=lM),uM}function uM(){let n=UE(this),e=n?.current;if(e){let t=n.previous;if(t===Gr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function lM(n,e,t,r,i){let o=this.declaredInputs[r],s=UE(n)||dM(n,{previous:Gr,current:null}),c=s.current||(s.current={}),u=s.previous,d=u[o];c[o]=new pf(d&&d.currentValue,t,u===Gr),VE(n,e,i,t)}var BE="__ngSimpleChanges__";function UE(n){return n[BE]||null}function dM(n,e){return n[BE]=e}var UI=null;var Te=function(n,e=null,t){UI?.(n,e,t)},hM="svg",fM="math";function cn(n){for(;Array.isArray(n);)n=n[On];return n}function jE(n,e){return cn(e[n])}function hn(n,e){return cn(e[n.index])}function $E(n,e){return n.data[e]}function ep(n,e){return n[e]}function pM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function un(n,e){let t=e[n];return lr(t)?t:t[On]}function tp(n){return(n[J]&128)===128}function gM(n){return kn(n[pt])}function Yi(n,e){return e==null?null:n[e]}function HE(n){n[Hi]=0}function qE(n){n[J]&1024||(n[J]|=1024,tp(n)&&Iu(n))}function mM(n,e){for(;n>0;)e=e[no],n--;return e}function vu(n){return!!(n[J]&9216||n[Ft]?.dirty)}function gf(n){n[hr].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),vu(n)&&Iu(n)}function Iu(n){n[hr].changeDetectionScheduler?.notify(0);let e=Kr(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!tp(e)));)e=Kr(e)}function zE(n,e){if(io(n))throw new Y(911,!1);n[ur]===null&&(n[ur]=[]),n[ur].push(e)}function yM(n,e){if(n[ur]===null)return;let t=n[ur].indexOf(e);t!==-1&&n[ur].splice(t,1)}function Kr(n){let e=n[pt];return kn(e)?e[pt]:e}function GE(n){return n[Qc]??=[]}function WE(n){return n.cleanup??=[]}var ee={lFrame:tw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mf=!1;function _M(){return ee.lFrame.elementDepthCount}function vM(){ee.lFrame.elementDepthCount++}function IM(){ee.lFrame.elementDepthCount--}function np(){return ee.bindingsEnabled}function EM(){return ee.skipHydrationRootTNode!==null}function wM(n){return ee.skipHydrationRootTNode===n}function CM(){ee.skipHydrationRootTNode=null}function ye(){return ee.lFrame.lView}function Xe(){return ee.lFrame.tView}function ue(n){return ee.lFrame.contextLView=n,n[It]}function le(n){return ee.lFrame.contextLView=null,n}function At(){let n=KE();for(;n!==null&&n.type===64;)n=n.parent;return n}function KE(){return ee.lFrame.currentTNode}function DM(){let n=ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xr(n,e){let t=ee.lFrame;t.currentTNode=n,t.isParent=e}function rp(){return ee.lFrame.isParent}function QE(){ee.lFrame.isParent=!1}function bM(){return ee.lFrame.contextLView}function YE(){return mf}function jI(n){let e=mf;return mf=n,e}function ip(){let n=ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function TM(){return ee.lFrame.bindingIndex}function SM(n){return ee.lFrame.bindingIndex=n}function Eu(){return ee.lFrame.bindingIndex++}function ZE(n){let e=ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function AM(){return ee.lFrame.inI18n}function MM(n,e){let t=ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,yf(e)}function NM(){return ee.lFrame.currentDirectiveIndex}function yf(n){ee.lFrame.currentDirectiveIndex=n}function xM(n){let e=ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function JE(n){ee.lFrame.currentQueryIndex=n}function RM(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[Qt]:null}function XE(n,e,t){if(t&ne.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ne.Host);)if(i=RM(o),i===null||(o=o[no],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ee.lFrame=ew();return r.currentTNode=e,r.lView=n,!0}function op(n){let e=ew(),t=n[ae];ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ew(){let n=ee.lFrame,e=n===null?null:n.child;return e===null?tw(n):e}function tw(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function nw(){let n=ee.lFrame;return ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var rw=nw;function sp(){let n=nw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function PM(n){return(ee.lFrame.contextLView=mM(n,ee.lFrame.contextLView))[It]}function ei(){return ee.lFrame.selectedIndex}function Qr(n){ee.lFrame.selectedIndex=n}function wu(){let n=ee.lFrame;return $E(n.tView,n.selectedIndex)}function OM(){return ee.lFrame.currentNamespace}var iw=!0;function Cu(){return iw}function Du(n){iw=n}function kM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=LE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ap(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Lc(n,e,t){ow(n,e,3,t)}function Bc(n,e,t,r){(n[J]&3)===t&&ow(n,e,t,r)}function Yh(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function ow(n,e,t,r){let i=r!==void 0?n[Hi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Hi]+=65536),(c<o||o==-1)&&(FM(n,t,e,u),n[Hi]=(n[Hi]&4294901760)+u+2),u++}function $I(n,e){Te(4,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),Te(5,n,e)}}function FM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[J]>>14<n[Hi]>>16&&(n[J]&3)===e&&(n[J]+=16384,$I(c,o)):$I(c,o)}var zi=-1,Yr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function VM(n){return(n.flags&8)!==0}function LM(n){return(n.flags&16)!==0}function BM(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];jM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function UM(n){return n===3||n===4||n===6}function jM(n){return n.charCodeAt(0)===64}function Zi(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?HI(n,t,i,null,e[++r]):HI(n,t,i,null,null))}}return n}function HI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function sw(n){return n!==zi}function eu(n){return n&32767}function $M(n){return n>>16}function tu(n,e){let t=$M(n),r=e;for(;t>0;)r=r[no],t--;return r}var _f=!0;function nu(n){let e=_f;return _f=n,e}var HM=256,aw=HM-1,cw=5,qM=0,on={};function zM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ts)&&(r=t[Ts]),r==null&&(r=t[Ts]=qM++);let i=r&aw,o=1<<i;e.data[n+(i>>cw)]|=o}function ru(n,e){let t=uw(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,Zh(r.data,n),Zh(e,null),Zh(r.blueprint,null));let i=cp(n,e),o=n.injectorIndex;if(sw(i)){let s=eu(i),c=tu(i,e),u=c[ae].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|u[s+d]}return e[o+8]=i,o}function Zh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uw(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function cp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=pw(i),r===null)return zi;if(t++,i=i[no],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return zi}function vf(n,e,t){zM(n,e,t)}function lw(n,e,t){if(t&ne.Optional||n!==void 0)return n;Qf(e,"NodeInjector")}function dw(n,e,t,r){if(t&ne.Optional&&r===void 0&&(r=null),(t&(ne.Self|ne.Host))===0){let i=n[Wi],o=vt(void 0);try{return i?i.get(e,r,t&ne.Optional):bE(e,r,t&ne.Optional)}finally{vt(o)}}return lw(r,e,t)}function hw(n,e,t,r=ne.Default,i){if(n!==null){if(e[J]&2048&&!(r&ne.Self)){let s=YM(n,e,t,r,on);if(s!==on)return s}let o=fw(n,e,t,r,on);if(o!==on)return o}return dw(e,t,r,i)}function fw(n,e,t,r,i){let o=KM(t);if(typeof o=="function"){if(!XE(e,n,r))return r&ne.Host?lw(i,t,r):dw(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ne.Optional))Qf(t);else return s}finally{rw()}}else if(typeof o=="number"){let s=null,c=uw(n,e),u=zi,d=r&ne.Host?e[sn][Qt]:null;for((c===-1||r&ne.SkipSelf)&&(u=c===-1?cp(n,e):e[c+8],u===zi||!zI(r,!1)?c=-1:(s=e[ae],c=eu(u),e=tu(u,e)));c!==-1;){let f=e[ae];if(qI(o,c,f.data)){let g=GM(c,e,t,s,r,d);if(g!==on)return g}u=e[c+8],u!==zi&&zI(r,e[ae].data[c+8]===d)&&qI(o,c,e)?(s=f,c=eu(u),e=tu(u,e)):c=-1}}return i}function GM(n,e,t,r,i,o){let s=e[ae],c=s.data[n+8],u=r==null?ro(c)&&_f:r!=s&&(c.type&3)!==0,d=i&ne.Host&&o===c,f=WM(c,s,t,u,d);return f!==null?iu(e,s,f,c,i):on}function WM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,d=n.directiveEnd,f=o>>20,g=r?c:c+f,y=i?c+f:d;for(let m=g;m<y;m++){let S=s[m];if(m<u&&t===S||m>=u&&S.type===t)return m}if(i){let m=s[u];if(m&&an(m)&&m.type===t)return u}return null}function iu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Yr){let c=o;c.resolving&&CE(FA(s[t]));let u=nu(c.canSeeViewProviders);c.resolving=!0;let d,f=c.injectImpl?vt(c.injectImpl):null,g=XE(n,r,ne.Default);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&kM(t,s[t],e)}finally{f!==null&&vt(f),nu(u),c.resolving=!1,rw()}}return o}function KM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ts)?n[Ts]:void 0;return typeof e=="number"?e>=0?e&aw:QM:e}function qI(n,e,t){let r=1<<n;return!!(t[e+(n>>cw)]&r)}function zI(n,e){return!(n&ne.Self)&&!(n&ne.Host&&e)}var qr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hw(this._tNode,this._lView,e,gu(r),t)}};function QM(){return new qr(At(),ye())}function ti(n){return ks(()=>{let e=n.prototype.constructor,t=e[$c]||If(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[$c]||If(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function If(n){return vE(n)?()=>{let e=If(ft(n));return e&&e()}:zr(n)}function YM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!Xc(s);){let c=fw(o,s,t,r|ne.Self,on);if(c!==on)return c;let u=o.parent;if(!u){let d=s[kE];if(d){let f=d.get(t,on,r);if(f!==on)return f}u=pw(s),s=s[no]}o=u}return i}function pw(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[Qt]:null}function GI(n,e=null,t=null,r){let i=ZM(n,e,t,r);return i.resolveInjectorInitializers(),i}function ZM(n,e=null,t=null,r,i=new Set){let o=[t||Ot,ZA(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new Ms(o,e||Jf(),r||null,i)}var Lt=class n{static THROW_IF_NOT_FOUND=Hr;static NULL=new Wc;static create(e,t){if(Array.isArray(e))return GI({name:""},t,e,"");{let r=e.name??"";return GI({name:r},e.parent,e.providers,r)}}static \u0275prov=_e({token:n,providedIn:"any",factory:()=>me(AE)});static __NG_ELEMENT_ID__=-1};var JM=new G("");JM.__NG_ELEMENT_ID__=n=>{let e=At();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&ne.Optional)return null;throw new Y(204,!1)};var gw=!1,mw=(()=>{class n{static __NG_ELEMENT_ID__=XM;static __NG_ENV_ID__=t=>t}return n})(),Ef=class extends mw{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return io(t)?(e(),()=>{}):(zE(t,e),()=>yM(t,e))}};function XM(){return new Ef(ye())}var xs=class{},yw=new G("",{providedIn:"root",factory:()=>!1});var _w=new G(""),vw=new G(""),bu=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new or(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new n})}return n})();var wf=class extends xn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aM()&&(this.destroyRef=he(mw,{optional:!0})??void 0,this.pendingTasks=he(bu,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},be=wf;function ou(...n){}function Iw(n){let e,t;function r(){n=ou;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function WI(n){return queueMicrotask(()=>n()),()=>{n=ou}}var up="isAngularZone",su=up+"_ID",eN=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new be(!1);onMicrotaskEmpty=new be(!1);onStable=new be(!1);onError=new be(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gw}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,rN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(up)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,tN,ou,ou);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},tN={};function lp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Iw(()=>{n.callbackScheduled=!1,Cf(n),n.isCheckStableRunning=!0,lp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Cf(n)}function rN(n){let e=()=>{nN(n)},t=eN++;n._inner=n._inner.fork({name:"angular",properties:{[up]:!0,[su]:t,[su+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(iN(u))return r.invokeTask(o,s,c,u);try{return KI(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),QI(n)}},onInvoke:(r,i,o,s,c,u,d)=>{try{return KI(n),r.invoke(o,s,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!oN(u)&&e(),QI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Cf(n),lp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Cf(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function KI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function QI(n){n._nesting--,lp(n)}var Df=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new be;onMicrotaskEmpty=new be;onStable=new be;onError=new be;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function iN(n){return Ew(n,"__ignore_ng_zone__")}function oN(n){return Ew(n,"__scheduler_tick__")}function Ew(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sN=new G("",{providedIn:"root",factory:()=>{let n=he(xe),e=he(Rn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function aN(){return Tu(At(),ye())}function Tu(n,e){return new ni(hn(n,e))}var ni=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=aN}return n})();function cN(n){return typeof n=="function"&&n[zt]!==void 0}function oo(n,e){let t=Sh(n,e?.equal),r=t[zt];return t.set=i=>fc(r,i),t.update=i=>Ah(r,i),t.asReadonly=uN.bind(t),t}function uN(){let n=this[zt];if(n.readonlyFn===void 0){let e=()=>this();e[zt]=n,n.readonlyFn=e}return n.readonlyFn}function ww(n){return cN(n)&&typeof n.set=="function"}function Cw(n){return(n.flags&128)===128}var Dw=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Dw||{}),bw=new Map,lN=0;function dN(){return lN++}function hN(n){bw.set(n[yu],n)}function bf(n){bw.delete(n[yu])}var YI="__ngContext__";function so(n,e){lr(e)?(n[YI]=e[yu],hN(e)):n[YI]=e}function Tw(n){return Aw(n[Ns])}function Sw(n){return Aw(n[Kt])}function Aw(n){for(;n!==null&&!kn(n);)n=n[Kt];return n}var Tf;function Mw(n){Tf=n}function fN(){if(Tf!==void 0)return Tf;if(typeof document<"u")return document;throw new Y(210,!1)}var dp=new G("",{providedIn:"root",factory:()=>pN}),pN="ng",hp=new G(""),ri=new G("",{providedIn:"platform",factory:()=>"unknown"});var fp=new G("",{providedIn:"root",factory:()=>fN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gN="h",mN="b";var Nw=!1,yN=new G("",{providedIn:"root",factory:()=>Nw});var xw=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(xw||{}),Su=new G(""),ZI=new Set;function _N(n){ZI.has(n)||(ZI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var vN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new n})}return n})();var IN=(n,e,t,r)=>{};function EN(n,e,t,r){IN(n,e,t,r)}var wN=()=>null;function Rw(n,e,t=!1){return wN(n,e,t)}function Pw(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];JE(o),c.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function Sf(n,e,t){JE(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function pp(n,e,t){if(Xf(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{ie(r)}}}var ln=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ln||{});var Af=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bA})`}};function CN(n){return n instanceof Af?n.changingThisBreaksApplicationSecurity:n}var DN=/^>|^->|<!--|-->|--!>|<!-$/g,bN=/(<|>)/g,TN="\u200B$1\u200B";function SN(n){return n.replace(DN,e=>e.replace(bN,TN))}function AN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Ow="ng-template";function MN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(gp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function gp(n){return n.type===4&&n.value!==Ow}function NN(n,e,t){let r=n.type===4&&!t?Ow:n.value;return e===r}function xN(n,e,t){let r=4,i=n.attrs,o=i!==null?ON(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Wt(r)&&!Wt(u))return!1;if(s&&Wt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!NN(n,u,t)||u===""&&e.length===1){if(Wt(r))return!1;s=!0}}else if(r&8){if(i===null||!MN(n,i,u,t)){if(Wt(r))return!1;s=!0}}else{let d=e[++c],f=RN(u,i,gp(n),t);if(f===-1){if(Wt(r))return!1;s=!0;continue}if(d!==""){let g;if(f>o?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(Wt(r))return!1;s=!0}}}}return Wt(r)||s}function Wt(n){return(n&1)===0}function RN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return kN(e,n)}function PN(n,e,t=!1){for(let r=0;r<e.length;r++)if(xN(n,e[r],t))return!0;return!1}function ON(n){for(let e=0;e<n.length;e++){let t=n[e];if(UM(t))return e}return n.length}function kN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function JI(n,e){return n?":not("+e.trim()+")":e}function FN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Wt(s)&&(e+=JI(o,i),i=""),r=s,o=o||!Wt(r);t++}return i!==""&&(e+=JI(o,i)),e}function VN(n){return n.map(FN).join(",")}function LN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Wt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Yt={};function BN(n,e){return n.createText(e)}function UN(n,e,t){n.setValue(e,t)}function jN(n,e){return n.createComment(SN(e))}function kw(n,e,t){return n.createElement(e,t)}function au(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Fw(n,e,t){n.appendChild(e,t)}function XI(n,e,t,r,i){r!==null?au(n,e,t,r,i):Fw(n,e,t)}function $N(n,e,t){n.removeChild(null,e,t)}function HN(n,e,t){n.setAttribute(e,"style",t)}function qN(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Vw(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&BM(n,e,r),i!==null&&qN(n,e,i),o!==null&&HN(n,e,o)}function mp(n,e,t,r,i,o,s,c,u,d,f){let g=Et+r,y=g+i,m=zN(g,y),S=typeof d=="function"?d():d;return m[ae]={type:n,blueprint:m,template:t,queries:null,viewQuery:c,declTNode:e,data:m.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function zN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Yt);return t}function GN(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=mp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yp(n,e,t,r,i,o,s,c,u,d,f){let g=e.blueprint.slice();return g[On]=i,g[J]=r|4|128|8|64|1024,(d!==null||n&&n[J]&2048)&&(g[J]|=2048),HE(g),g[pt]=g[no]=n,g[It]=t,g[hr]=s||n&&n[hr],g[Le]=c||n&&n[Le],g[Wi]=u||n&&n[Wi]||null,g[Qt]=o,g[yu]=dN(),g[Kc]=f,g[kE]=d,g[sn]=e.type==2?n[sn]:g,g}function WN(n,e,t){let r=hn(e,n),i=GN(t),o=n[hr].rendererFactory,s=_p(n,yp(n,i,null,Lw(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Lw(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Bw(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function _p(n,e){return n[Ns]?n[BI][Kt]=e:n[Ns]=e,n[BI]=e,e}function V(n=1){Uw(Xe(),ye(),ei()+n,!1)}function Uw(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Lc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Bc(e,o,0,t)}Qr(t)}var Au=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Au||{});function Mf(n,e,t,r){let i=ie(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Au.SignalBased)!==0&&(u=e[o][zt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):VE(e,u,o,r)}finally{ie(i)}}function jw(n,e,t,r,i){let o=ei(),s=r&2;try{Qr(-1),s&&e.length>Et&&Uw(n,e,Et,!1),Te(s?2:0,i),t(r,i)}finally{Qr(o),Te(s?3:1,i)}}function Mu(n,e,t){XN(n,e,t),(t.flags&64)===64&&ex(n,e,t)}function vp(n,e,t=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function KN(n,e,t,r){let o=r.get(yN,Nw)||t===ln.ShadowDom,s=n.selectRootElement(e,o);return QN(s),s}function QN(n){YN(n)}var YN=()=>null;function ZN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Ip(n,e,t,r,i,o,s,c){if(!c&&wp(e,n,t,r,i)){ro(e)&&JN(t,e.index);return}if(e.type&3){let u=hn(e,t);r=ZN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function JN(n,e){let t=un(e,n);t[J]&16||(t[J]|=64)}function XN(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ro(t)&&WN(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ru(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=iu(e,n,s,t);if(so(u,e),o!==null&&ix(e,s-r,u,c,t,o),an(c)){let d=un(t.index,e);d[It]=iu(e,n,s,t)}}}function ex(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=NM();try{Qr(o);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];yf(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tx(u,d)}}finally{Qr(-1),yf(s)}}function tx(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ep(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];PN(e,o.selectors,!1)&&(r??=[],an(o)?r.unshift(o):r.push(o))}return r}function nx(n,e,t,r,i,o){let s=hn(n,e);rx(e[Le],s,o,n.value,t,r,i)}function rx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?Ss(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function ix(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1];Mf(r,t,u,d)}}function ox(n,e){let t=n[Wi],r=t?t.get(Rn,null):null;r&&r.handleError(e)}function wp(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],f=s[u+1],g=e.data[d];Mf(g,t[d],f,i),c=!0}if(o)for(let u of o){let d=t[u],f=e.data[u];Mf(f,d,r,i),c=!0}return c}function sx(n,e){let t=un(e,n),r=t[ae];ax(r,t);let i=t[On];i!==null&&t[Kc]===null&&(t[Kc]=Rw(i,t[Wi])),Te(18),Cp(r,t,t[It]),Te(19,t[It])}function ax(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Cp(n,e,t){op(e);try{let r=n.viewQuery;r!==null&&Sf(1,r,t);let i=n.template;i!==null&&jw(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Qi]?.finishViewCreation(n),n.staticContentQueries&&Pw(n,e),n.staticViewQueries&&Sf(2,n.viewQuery,t);let o=n.components;o!==null&&cx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,sp()}}function cx(n,e){for(let t=0;t<e.length;t++)sx(n,e[t])}function ux(n,e,t,r){let i=ie(null);try{let o=e.tView,c=n[J]&4096?4096:16,u=yp(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[Ki]=d;let f=n[Qi];return f!==null&&(u[Qi]=f.createEmbeddedView(o)),Cp(o,u,t),u}finally{ie(i)}}function eE(n,e){return!e||e.firstChild===null||Cw(n)}var lx;function Dp(n,e){return lx(n,e)}var Pn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Pn||{});function $w(n){return(n.flags&32)===32}function qi(n,e,t,r,i){if(r!=null){let o,s=!1;kn(r)?o=r:lr(r)&&(s=!0,r=r[On]);let c=cn(r);n===0&&t!==null?i==null?Fw(e,t,c):au(e,t,c,i||null,!0):n===1&&t!==null?au(e,t,c,i||null,!0):n===2?$N(e,c,s):n===3&&e.destroyNode(c),o!=null&&wx(e,n,o,t,i)}}function dx(n,e){Hw(n,e),e[On]=null,e[Qt]=null}function hx(n,e,t,r,i,o){r[On]=i,r[Qt]=e,xu(n,r,t,1,i,o)}function Hw(n,e){e[hr].changeDetectionScheduler?.notify(9),xu(n,e,e[Le],2,null,null)}function fx(n){let e=n[Ns];if(!e)return Jh(n[ae],n);for(;e;){let t=null;if(lr(e))t=e[Ns];else{let r=e[Vt];r&&(t=r)}if(!t){for(;e&&!e[Kt]&&e!==n;)lr(e)&&Jh(e[ae],e),e=e[pt];e===null&&(e=n),lr(e)&&Jh(e[ae],e),t=e&&e[Kt]}e=t}}function bp(n,e){let t=n[Jc],r=t.indexOf(e);t.splice(r,1)}function qw(n,e){if(io(e))return;let t=e[Le];t.destroyNode&&xu(n,e,t,3,null,null),fx(e)}function Jh(n,e){if(io(e))return;let t=ie(null);try{e[J]&=-129,e[J]|=256,e[Ft]&&Dh(e[Ft]),gx(n,e),px(n,e),e[ae].type===1&&e[Le].destroy();let r=e[Ki];if(r!==null&&kn(e[pt])){r!==e[pt]&&bp(r,e);let i=e[Qi];i!==null&&i.detachView(n)}bf(e)}finally{ie(t)}}function px(n,e){let t=n.cleanup,r=e[Qc];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Qc]=null);let i=e[ur];if(i!==null){e[ur]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Yc];if(o!==null){e[Yc]=null;for(let s of o)s.destroy()}}function gx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Yr)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Te(4,c,u);try{u.call(c)}finally{Te(5,c,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function mx(n,e,t){return yx(n,e.parent,t)}function yx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[On];if(ro(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ln.None||i===ln.Emulated)return null}return hn(r,t)}function _x(n,e,t){return Ix(n,e,t)}function vx(n,e,t){return n.type&40?hn(n,t):null}var Ix=vx,tE;function Nu(n,e,t,r){let i=mx(n,r,e),o=e[Le],s=r.parent||e[Qt],c=_x(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)XI(o,i,t[u],c,!1);else XI(o,i,t,c,!1);tE!==void 0&&tE(o,r,e,t,i)}function bs(n,e){if(e!==null){let t=e.type;if(t&3)return hn(e,n);if(t&4)return Nf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return bs(n,r);{let i=n[e.index];return kn(i)?Nf(-1,i):cn(i)}}else{if(t&128)return bs(n,e.next);if(t&32)return Dp(e,n)()||cn(n[e.index]);{let r=zw(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kr(n[sn]);return bs(i,r)}else return bs(n,e.next)}}}return null}function zw(n,e){if(e!==null){let r=n[sn][Qt],i=e.projection;return r.projection[i]}return null}function Nf(n,e){let t=Vt+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return bs(r,i)}return e[Wr]}function Tp(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&so(cn(c),r),t.flags|=2),!$w(t))if(u&8)Tp(n,e,t.child,r,i,o,!1),qi(e,n,i,c,o);else if(u&32){let d=Dp(t,r),f;for(;f=d();)qi(e,n,i,f,o);qi(e,n,i,c,o)}else u&16?Ex(n,e,r,t,i,o):qi(e,n,i,c,o);t=s?t.projectionNext:t.next}}function xu(n,e,t,r,i,o){Tp(t,r,n.firstChild,e,i,o,!1)}function Ex(n,e,t,r,i,o){let s=t[sn],u=s[Qt].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];qi(e,n,i,f,o)}else{let d=u,f=s[pt];Cw(r)&&(d.flags|=128),Tp(n,e,d,f,i,o,!0)}}function wx(n,e,t,r,i){let o=t[Wr],s=cn(t);o!==s&&qi(e,n,r,o,i);for(let c=Vt;c<t.length;c++){let u=t[c];xu(u[ae],u,n,e,r,o)}}function Cx(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Pn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Pn.Important),n.setStyle(t,r,i,o))}}function cu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(cn(o)),kn(o)&&Dx(o,r);let s=t.type;if(s&8)cu(n,e,t.child,r);else if(s&32){let c=Dp(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=zw(e,t);if(Array.isArray(c))r.push(...c);else{let u=Kr(e[sn]);cu(u[ae],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function Dx(n,e){for(let t=Vt;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&cu(r[ae],r,i,e)}n[Wr]!==n[On]&&e.push(n[Wr])}function Gw(n){if(n[Qh]!==null){for(let e of n[Qh])e.impl.addSequence(e);n[Qh].length=0}}var Ww=[];function bx(n){return n[Ft]??Tx(n)}function Tx(n){let e=Ww.pop()??Object.create(Ax);return e.lView=n,e}function Sx(n){n.lView[Ft]!==n&&(n.lView=null,Ww.push(n))}var Ax=pe(te({},_s),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Iu(n.lView)},consumerOnSignalRead(){this.lView[Ft]=this}});function Mx(n){let e=n[Ft]??Object.create(Nx);return e.lView=n,e}var Nx=pe(te({},_s),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Kr(n.lView);for(;e&&!Kw(e[ae]);)e=Kr(e);e&&qE(e)},consumerOnSignalRead(){this.lView[Ft]=this}});function Kw(n){return n.type!==2}function Qw(n){if(n[Yc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Yc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var xx=100;function Yw(n,e=!0,t=0){let i=n[hr].rendererFactory,o=!1;o||i.begin?.();try{Rx(n,t)}catch(s){throw e&&ox(n,s),s}finally{o||i.end?.()}}function Rx(n,e){let t=YE();try{jI(!0),xf(n,e);let r=0;for(;vu(n);){if(r===xx)throw new Y(103,!1);r++,xf(n,1)}}finally{jI(t)}}function Px(n,e,t,r){if(io(e))return;let i=e[J],o=!1,s=!1;op(e);let c=!0,u=null,d=null;o||(Kw(n)?(d=bx(e),u=lc(d)):_h()===null?(c=!1,d=Mx(e),u=lc(d)):e[Ft]&&(Dh(e[Ft]),e[Ft]=null));try{HE(e),SM(n.bindingStartIndex),t!==null&&jw(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let m=n.preOrderCheckHooks;m!==null&&Lc(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Bc(e,m,0,null),Yh(e,0)}if(s||Ox(e),Qw(e),Zw(e,0),n.contentQueries!==null&&Pw(n,e),!o)if(f){let m=n.contentCheckHooks;m!==null&&Lc(e,m)}else{let m=n.contentHooks;m!==null&&Bc(e,m,1),Yh(e,1)}Fx(n,e);let g=n.components;g!==null&&Xw(e,g,0);let y=n.viewQuery;if(y!==null&&Sf(2,y,r),!o)if(f){let m=n.viewCheckHooks;m!==null&&Lc(e,m)}else{let m=n.viewHooks;m!==null&&Bc(e,m,2),Yh(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Kh]){for(let m of e[Kh])m();e[Kh]=null}o||(Gw(e),e[J]&=-73)}catch(f){throw o||Iu(e),f}finally{d!==null&&(wh(d,u),c&&Sx(d)),sp()}}function Zw(n,e){for(let t=Tw(n);t!==null;t=Sw(t))for(let r=Vt;r<t.length;r++){let i=t[r];Jw(i,e)}}function Ox(n){for(let e=Tw(n);e!==null;e=Sw(e)){if(!(e[J]&2))continue;let t=e[Jc];for(let r=0;r<t.length;r++){let i=t[r];qE(i)}}}function kx(n,e,t){Te(18);let r=un(e,n);Jw(r,t),Te(19,r[It])}function Jw(n,e){tp(n)&&xf(n,e)}function xf(n,e){let r=n[ae],i=n[J],o=n[Ft],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ch(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)Px(r,n,r.template,n[It]);else if(i&8192){Qw(n),Zw(n,1);let c=r.components;c!==null&&Xw(n,c,1),Gw(n)}}function Xw(n,e,t){for(let r=0;r<e.length;r++)kx(n,e[r],t)}function Fx(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Qr(~i);else{let o=i,s=t[++r],c=t[++r];MM(s,o);let u=e[o];Te(24,u),c(2,u),Te(25,u)}}}finally{Qr(-1)}}function Sp(n,e){let t=YE()?64:1088;for(n[hr].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=Kr(n);if(Xc(n)&&!r)return n;n=r}return null}function eC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Vx(n,e,t,r=!0){let i=e[ae];if(Lx(i,e,n,t),r){let s=Nf(t,n),c=e[Le],u=c.parentNode(n[Wr]);u!==null&&hx(i,n[Qt],c,e,u,s)}let o=e[Kc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Rf(n,e){if(n.length<=Vt)return;let t=Vt+e,r=n[t];if(r){let i=r[Ki];i!==null&&i!==n&&bp(i,r),e>0&&(n[t-1][Kt]=r[Kt]);let o=zc(n,Vt+e);dx(r[ae],r);let s=o[Qi];s!==null&&s.detachView(o[ae]),r[pt]=null,r[Kt]=null,r[J]&=-129}return r}function Lx(n,e,t,r){let i=Vt+r,o=t.length;r>0&&(t[i-1][Kt]=e),r<o-Vt?(e[Kt]=t[i],SE(t,Vt+r,e)):(t.push(e),e[Kt]=null),e[pt]=t;let s=e[Ki];s!==null&&t!==s&&tC(s,e);let c=e[Qi];c!==null&&c.insertView(n),gf(e),e[J]|=128}function tC(n,e){let t=n[Jc],r=e[pt];if(lr(r))n[J]|=2;else{let i=r[pt][sn];e[sn]!==i&&(n[J]|=2)}t===null?n[Jc]=[e]:t.push(e)}var Rs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ae];return cu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[It]}set context(e){this._lView[It]=e}get destroyed(){return io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(kn(e)){let t=e[Zc],r=t?t.indexOf(this):-1;r>-1&&(Rf(e,r),zc(t,r))}this._attachedToViewContainer=!1}qw(this._lView[ae],this._lView)}onDestroy(e){zE(this._lView,e)}markForCheck(){Sp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){gf(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,Yw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Xc(this._lView),t=this._lView[Ki];t!==null&&!e&&bp(t,this._lView),Hw(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=Xc(this._lView),r=this._lView[Ki];r!==null&&!t&&tC(r,this._lView),gf(this._lView)}};var Ru=(()=>{class n{static __NG_ELEMENT_ID__=jx}return n})(),Bx=Ru,Ux=class extends Bx{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ux(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Rs(i)}};function jx(){return nC(At(),ye())}function nC(n,e){return n.type&4?new Ux(e,n,Tu(n,e)):null}function Pu(n,e,t,r,i){let o=n.data[e];if(o===null)o=$x(n,e,t,r,i),AM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=DM();o.injectorIndex=s===null?-1:s.injectorIndex}return Xr(o,!0),o}function $x(n,e,t,r,i){let o=KE(),s=rp(),c=s?o:o&&o.parent,u=n.data[e]=qx(n,c,t,e,r,i);return Hx(n,u,o,s),u}function Hx(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function qx(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return EM()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ZH=new RegExp(`^(\\d+)*(${mN}|${gN})*(.*)`);var zx=()=>null;function nE(n,e){return zx(n,e)}var Gx=class{},rC=class{},Pf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${kt(e)}.`)}},Ap=class{static NULL=new Pf},Ji=class{},ao=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Wx()}return n})();function Wx(){let n=ye(),e=At(),t=un(e.index,n);return(lr(t)?t:n)[Le]}var Kx=(()=>{class n{static \u0275prov=_e({token:n,providedIn:"root",factory:()=>null})}return n})();var Xh={},Of=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=gu(r);let i=this.injector.get(e,Xh,r);return i!==Xh||t===Xh?i:this.parentInjector.get(e,t,r)}};function kf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=RI(i,c);else if(o==2){let u=c,d=e[++s];r=RI(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function j(n,e=ne.Default){let t=ye();if(t===null)return me(n,e);let r=At();return hw(r,t,ft(n),e)}function Mp(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c,u=null,d=null,f=Yx(s);f===null?c=s:[c,u,d]=f,Xx(n,e,t,c,o,u,d)}o!==null&&r!==null&&Qx(t,r,o)}function Qx(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}function Yx(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let c=n[s];if(s===0&&an(c)&&(e=c),c.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,Zx(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function Zx(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function Jx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Xx(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let y=0;y<c;y++){let m=r[y];!u&&an(m)&&(u=!0,Jx(n,t,y)),vf(ru(t,e),n,m.type)}oR(t,n.data.length,c);for(let y=0;y<c;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let d=!1,f=!1,g=Bw(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let y=0;y<c;y++){let m=r[y];if(t.mergedAttrs=Zi(t.mergedAttrs,m.hostAttrs),tR(n,t,e,g,m),iR(g,m,i),s!==null&&s.has(m)){let[P,R]=s.get(m);t.directiveToIndex.set(m.type,[g,P+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,g);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let S=m.type.prototype;!d&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!f&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),g++}eR(n,t,o)}function eR(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))rE(0,e,i,r),rE(1,e,i,r),oE(e,r,!1);else{let o=t.get(i);iE(0,e,o,r),iE(1,e,o,r),oE(e,r,!0)}}}function rE(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),iC(e,o)}}function iE(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),iC(e,s)}}function iC(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function oE(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||gp(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let d=i[u];for(let f of d)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let d=o[u];for(let f=0;f<d.length;f+=2)if(d[f]===e){s??=[],s.push(d[f+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function tR(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=zr(i.type,!0)),s=new Yr(o,an(i),j);n.blueprint[r]=s,t[r]=s,nR(n,e,r,Bw(n,t,i.hostVars,Yt),i)}function nR(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;rR(s)!=c&&s.push(c),s.push(t,r,o)}}function rR(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function iR(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;an(e)&&(t[""]=n)}}function oR(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oC(n,e,t,r,i,o,s,c){let u=e.consts,d=Yi(u,s),f=Pu(e,n,2,r,d);return o&&Mp(e,t,f,Yi(u,c),i),f.mergedAttrs=Zi(f.mergedAttrs,f.attrs),f.attrs!==null&&kf(f,f.attrs,!1),f.mergedAttrs!==null&&kf(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function sC(n,e){ap(n,e),Xf(e)&&n.queries.elementEnd(e)}var Ff=class extends Ap{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=As(e);return new uu(t,this.ngModule)}};function sR(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Au.SignalBased)!==0};return i&&(o.transform=i),o})}function aR(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function cR(n,e,t){let r=e instanceof dr?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Of(t,r):t}function uR(n){let e=n.get(Ji,null);if(e===null)throw new Y(407,!1);let t=n.get(Kx,null),r=n.get(xs,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function lR(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return kw(e,t,t==="svg"?hM:t==="math"?fM:null)}var uu=class extends rC{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=sR(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=aR(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=VN(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Te(22);let o=ie(null);try{let s=this.componentDef,c=r?["ng-version","19.2.13"]:LN(this.componentDef.selectors[0]),u=mp(0,null,null,1,0,null,null,null,null,[c],null),d=cR(s,i||this.ngModule,e),f=uR(d),g=f.rendererFactory.createRenderer(null,s),y=r?KN(g,r,s.encapsulation,d):lR(s,g),m=yp(null,u,null,512|Lw(s),null,null,f,g,d,null,Rw(y,d,!0));m[Et]=y,op(m);let S=null;try{let P=oC(Et,u,m,"#host",()=>[this.componentDef],!0,0);y&&(Vw(g,y,P),so(y,m)),Mu(u,m,P),pp(u,P,m),sC(u,P),t!==void 0&&dR(P,this.ngContentSelectors,t),S=un(P.index,m),m[It]=S[It],Cp(u,m,null)}catch(P){throw S!==null&&bf(S),bf(m),P}finally{Te(23),sp()}return new Vf(this.componentType,m)}finally{ie(o)}}},Vf=class extends Gx{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=$E(t[ae],Et),this.location=Tu(this._tNode,t),this.instance=un(this._tNode.index,t)[It],this.hostView=this.changeDetectorRef=new Rs(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=wp(r,i[ae],i,e,t);this.previousInputValues.set(e,t);let s=un(r.index,i);Sp(s,1)}get injector(){return new qr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dR(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ou=(()=>{class n{static __NG_ELEMENT_ID__=hR}return n})();function hR(){let n=At();return pR(n,ye())}var fR=Ou,aC=class extends fR{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Tu(this._hostTNode,this._hostLView)}get injector(){return new qr(this._hostTNode,this._hostLView)}get parentInjector(){let e=cp(this._hostTNode,this._hostLView);if(sw(e)){let t=tu(e,this._hostLView),r=eu(e),i=t[ae].data[r+8];return new qr(i,t)}else return new qr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nE(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,eE(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!cM(e),c;if(s)c=t;else{let S=t||{};c=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new uu(As(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let P=(s?d:this.parentInjector).get(dr,null);P&&(o=P)}let f=As(u.componentType??{}),g=nE(this._lContainer,f?.id??null),y=g?.firstChild??null,m=u.create(d,i,y,o);return this.insertImpl(m.hostView,c,eE(this._hostTNode,g)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(gM(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[pt],d=new aC(u,u[Qt],u[pt]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Vx(s,i,o,r),e.attachToViewContainerRef(),SE(ef(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Rf(this._lContainer,t);r&&(zc(ef(this._lContainer),t),qw(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=Rf(this._lContainer,t);return r&&zc(ef(this._lContainer),t)!=null?new Rs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sE(n){return n[Zc]}function ef(n){return n[Zc]||(n[Zc]=[])}function pR(n,e){let t,r=e[n.index];return kn(r)?t=r:(t=eC(r,e,null,n),e[n.index]=t,_p(e,t)),mR(t,e,n,r),new aC(t,n,e)}function gR(n,e){let t=n[Le],r=t.createComment(""),i=hn(e,n),o=t.parentNode(i);return au(t,o,r,t.nextSibling(i),!1),r}var mR=vR,yR=()=>!1;function _R(n,e,t){return yR(n,e,t)}function vR(n,e,t,r){if(n[Wr])return;let i;t.type&8?i=cn(r):i=gR(e,t),n[Wr]=i}var lu=class{};var du=class extends lu{injector;componentFactoryResolver=new Ff(this);instance=null;constructor(e){super();let t=new Ms([...e.providers,{provide:lu,useValue:this},{provide:Ap,useValue:this.componentFactoryResolver}],e.parent||Jf(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function IR(n,e,t=null){return new du({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var ER=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=NE(!1,t.type),i=r.length>0?IR([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=_e({token:n,providedIn:"environment",factory:()=>new n(me(dr))})}return n})();function wt(n){return ks(()=>{let e=cC(n),t=pe(te({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Dw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ER).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ln.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&_N("NgStandalone"),uC(t);let r=n.dependencies;return t.directiveDefs=aE(r,!1),t.pipeDefs=aE(r,!0),t.id=TR(t),t})}function wR(n){return As(n)||QA(n)}function CR(n){return n!==null}function ii(n){return ks(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function DR(n,e){if(n==null)return Gr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Au.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function bR(n){if(n==null)return Gr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ke(n){return ks(()=>{let e=cC(n);return uC(e),e})}function ku(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function cC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Gr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:DR(n.inputs,e),outputs:bR(n.outputs),debugInfo:null}}function uC(n){n.features?.forEach(e=>e(n))}function aE(n,e){if(!n)return null;let t=e?YA:wR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(CR)}function TR(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function SR(n){return Object.getPrototypeOf(n.prototype).constructor}function mt(n){let e=SR(n.type),t=!0,r=[n];for(;e;){let i;if(an(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=tf(n.inputs),s.declaredInputs=tf(n.declaredInputs),s.outputs=tf(n.outputs);let c=i.hostBindings;c&&RR(n,c);let u=i.viewQuery,d=i.contentQueries;if(u&&NR(n,u),d&&xR(n,d),AR(n,i),MA(n.outputs,i.outputs),an(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===mt&&(t=!1)}}e=Object.getPrototypeOf(e)}MR(r)}function AR(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function MR(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zi(i.hostAttrs,t=Zi(t,i.hostAttrs))}}function tf(n){return n===Gr?{}:n===Ot?[]:n}function NR(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function xR(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function RR(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function lC(n){return OR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function PR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function OR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Np(n,e,t){return n[e]=t}function kR(n,e){return n[e]}function fr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dC(n,e,t,r){let i=fr(n,e,t);return fr(n,e+1,r)||i}function FR(n,e,t,r,i,o,s,c,u){let d=e.consts,f=Pu(e,n,4,s||null,c||null);np()&&Mp(e,t,f,Yi(d,u),Ep),f.mergedAttrs=Zi(f.mergedAttrs,f.attrs),ap(e,f);let g=f.tView=mp(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function VR(n,e,t,r,i,o,s,c,u,d){let f=t+Et,g=e.firstCreatePass?FR(f,e,n,r,i,o,s,c,u):e.data[f];Xr(g,!1);let y=LR(e,n,g,t);Cu()&&Nu(e,n,y,g),so(y,n);let m=eC(y,n,y,g);return n[f]=m,_p(n,m),_R(m,g,n),_u(g)&&Mu(e,n,g),u!=null&&vp(n,g,d),g}function we(n,e,t,r,i,o,s,c){let u=ye(),d=Xe(),f=Yi(d.consts,o);return VR(u,d,n,e,t,r,i,f,s,c),we}var LR=BR;function BR(n,e,t,r){return Du(!0),e[Le].createComment("")}var hC=new G("");var UR=(()=>{class n{static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new Lf})}return n})(),Lf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function co(n){return!!n&&typeof n.then=="function"}function xp(n){return!!n&&typeof n.subscribe=="function"}var jR=new G("");var fC=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=he(jR,{optional:!0})??[];injector=he(Lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=OE(this.injector,i);if(co(o))t.push(o);else if(xp(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$R=new G("");function HR(){Th(()=>{throw new Y(600,!1)})}function qR(n){return n.isBoundToModule}var zR=10;var Ps=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=he(sN);afterRenderManager=he(vN);zonelessEnabled=he(yw);rootEffectScheduler=he(UR);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new xn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=he(bu).hasPendingTasks.pipe(rn(t=>!t));constructor(){he(Su,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=he(dr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Lt.NULL){Te(10);let o=t instanceof rC;if(!this._injector.get(fC).done){let m="";throw new Y(405,m)}let c;o?c=t:c=this._injector.get(Ap).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=qR(c)?void 0:this._injector.get(lu),d=r||c.selector,f=c.create(i,[],d,u),g=f.location.nativeElement,y=f.injector.get(hC,null);return y?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),Uc(this.components,f),y?.unregisterApplication(g)}),this._loadComponent(f),Te(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(xw.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Y(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ji,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<zR;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)GR(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>vu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Uc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($R,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Uc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function GR(n,e,t,r){if(!t&&!vu(n))return;Yw(n,e,t&&!r?0:1)}function Fu(n,e,t,r){let i=ye(),o=Eu();if(fr(i,o,e)){let s=Xe(),c=wu();nx(c,i,n,e,t,r)}return Fu}function pC(n,e,t,r){return fr(n,Eu(),t)?e+Ss(t)+r:Yt}function WR(n,e,t,r,i,o){let s=TM(),c=dC(n,s,t,i);return ZE(2),c?e+Ss(t)+r+Ss(i)+o:Yt}function Fc(n,e){return n<<17|e<<2}function Zr(n){return n>>17&32767}function KR(n){return(n&2)==2}function QR(n,e){return n&131071|e<<17}function Bf(n){return n|2}function Xi(n){return(n&131068)>>2}function nf(n,e){return n&-131069|e<<2}function YR(n){return(n&1)===1}function Uf(n){return n|1}function ZR(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Zr(s),u=Xi(s);n[r]=t;let d=!1,f;if(Array.isArray(t)){let g=t;f=g[1],(f===null||Fs(g,f)>0)&&(d=!0)}else f=t;if(i)if(u!==0){let y=Zr(n[c+1]);n[r+1]=Fc(y,c),y!==0&&(n[y+1]=nf(n[y+1],r)),n[c+1]=QR(n[c+1],r)}else n[r+1]=Fc(c,0),c!==0&&(n[c+1]=nf(n[c+1],r)),c=r;else n[r+1]=Fc(u,0),c===0?c=r:n[u+1]=nf(n[u+1],r),u=r;d&&(n[r+1]=Bf(n[r+1])),cE(n,f,r,!0),cE(n,f,r,!1),JR(e,f,n,r,o),s=Fc(c,u),o?e.classBindings=s:e.styleBindings=s}function JR(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Fs(o,e)>=0&&(t[r+1]=Uf(t[r+1]))}function cE(n,e,t,r){let i=n[t+1],o=e===null,s=r?Zr(i):Xi(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],d=n[s+1];XR(u,e)&&(c=!0,n[s+1]=r?Uf(d):Bf(d)),s=r?Zr(d):Xi(d)}c&&(n[t+1]=r?Bf(i):Uf(i))}function XR(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Fs(n,e)>=0:!1}function U(n,e,t){let r=ye(),i=Eu();if(fr(r,i,e)){let o=Xe(),s=wu();Ip(o,s,r,n,e,r[Le],t,!1)}return U}function uE(n,e,t,r,i){wp(e,n,t,i?"class":"style",r)}function oi(n,e){return eP(n,e,null,!0),oi}function eP(n,e,t,r){let i=ye(),o=Xe(),s=ZE(2);if(o.firstUpdatePass&&nP(o,n,s,r),e!==Yt&&fr(i,s,e)){let c=o.data[ei()];aP(o,c,i,i[Le],n,i[s+1]=cP(e,t),r,s)}}function tP(n,e){return e>=n.expandoStartIndex}function nP(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ei()],s=tP(n,t);uP(o,r)&&e===null&&!s&&(e=!1),e=rP(i,o,e,r),ZR(i,o,e,t,s,r)}}function rP(n,e,t,r){let i=xM(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=rf(null,n,e,t,r),t=Os(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=rf(i,n,e,t,r),o===null){let u=iP(n,e,r);u!==void 0&&Array.isArray(u)&&(u=rf(null,n,e,u[1],r),u=Os(u,e.attrs,r),oP(n,e,r,u))}else o=sP(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function iP(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xi(r)!==0)return n[Zr(r)]}function oP(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Zr(i)]=r}function sP(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Os(r,s,t)}return Os(r,e.attrs,t)}function rf(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=Os(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Os(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),WA(n,s,t?!0:e[++o]))}return n===void 0?null:n}function aP(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,d=u[c+1],f=YR(d)?lE(u,e,t,i,Xi(d),s):void 0;if(!hu(f)){hu(o)||KR(d)&&(o=lE(u,null,t,i,c,s));let g=jE(ei(),t);Cx(r,s,g,i,o)}}function lE(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],d=Array.isArray(u),f=d?u[1]:u,g=f===null,y=t[i+1];y===Yt&&(y=g?Ot:void 0);let m=g?Gh(y,r):f===r?y:void 0;if(d&&!hu(m)&&(m=Gh(u,r)),hu(m)&&(c=m,s))return c;let S=n[i+1];i=s?Zr(S):Xi(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Gh(u,r))}return c}function hu(n){return n!==void 0}function cP(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kt(CN(n)))),n}function uP(n,e){return(n.flags&(e?8:16))!==0}function x(n,e,t,r){let i=ye(),o=Xe(),s=Et+n,c=i[Le],u=o.firstCreatePass?oC(s,o,i,e,Ep,np(),t,r):o.data[s],d=lP(o,i,u,c,e,n);i[s]=d;let f=_u(u);return Xr(u,!0),Vw(c,d,u),!$w(u)&&Cu()&&Nu(o,i,d,u),(_M()===0||f)&&so(d,i),vM(),f&&(Mu(o,i,u),pp(o,u,i)),r!==null&&vp(i,u),x}function N(){let n=At();rp()?QE():(n=n.parent,Xr(n,!1));let e=n;wM(e)&&CM(),IM();let t=Xe();return t.firstCreatePass&&sC(t,e),e.classesWithoutHost!=null&&VM(e)&&uE(t,e,ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&LM(e)&&uE(t,e,ye(),e.stylesWithoutHost,!1),N}function Zt(n,e,t,r){return x(n,e,t,r),N(),Zt}var lP=(n,e,t,r,i,o)=>(Du(!0),kw(r,i,OM()));function dP(n,e,t,r,i){let o=e.consts,s=Yi(o,r),c=Pu(e,n,8,"ng-container",s);s!==null&&kf(c,s,!0);let u=Yi(o,i);return np()&&Mp(e,t,c,u,Ep),c.mergedAttrs=Zi(c.mergedAttrs,c.attrs),e.queries!==null&&e.queries.elementStart(e,c),c}function Rp(n,e,t){let r=ye(),i=Xe(),o=n+Et,s=i.firstCreatePass?dP(o,i,r,e,t):i.data[o];Xr(s,!0);let c=hP(i,r,s,n);return r[o]=c,Cu()&&Nu(i,r,c,s),so(c,r),_u(s)&&(Mu(i,r,s),pp(i,s,r)),t!=null&&vp(r,s),Rp}function Pp(){let n=At(),e=Xe();return rp()?QE():(n=n.parent,Xr(n,!1)),e.firstCreatePass&&(ap(e,n),Xf(n)&&e.queries.elementEnd(n)),Pp}var hP=(n,e,t,r)=>(Du(!0),jN(e[Le],""));function Be(){return ye()}var $r=void 0;function fP(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var pP=["en",[["a","p"],["AM","PM"],$r],[["AM","PM"],$r,$r],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$r,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$r,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$r,"{1} 'at' {0}",$r],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",fP],of={};function Mt(n){let e=gP(n),t=dE(e);if(t)return t;let r=e.split("-")[0];if(t=dE(r),t)return t;if(r==="en")return pP;throw new Y(701,!1)}function dE(n){return n in of||(of[n]=Cs.ng&&Cs.ng.common&&Cs.ng.common.locales&&Cs.ng.common.locales[n]),of[n]}var Fe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Fe||{});function gP(n){return n.toLowerCase().replace(/_/g,"-")}var fu="en-US";var mP=fu;function yP(n){typeof n=="string"&&(mP=n.toLowerCase().replace(/_/g,"-"))}function hE(n,e,t){return function r(i){if(i===Function)return t;let o=ro(n)?un(n.index,e):e;Sp(o,5);let s=e[It],c=fE(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=fE(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function fE(n,e,t,r){let i=ie(null);try{return Te(6,e,t),t(r)!==!1}catch(o){return _P(n,o),!1}finally{Te(7,e,t),ie(i)}}function _P(n,e){let t=n[Wi],r=t?t.get(Rn,null):null;r&&r.handleError(e)}function pE(n,e,t,r,i,o){let s=e[t],c=e[ae],d=c.data[t].outputs[r],f=s[d],g=c.firstCreatePass?WE(c):null,y=GE(e),m=f.subscribe(o),S=y.length;y.push(o,m),g&&g.push(i,n.index,S,-(S+1))}function H(n,e,t,r){let i=ye(),o=Xe(),s=At();return gC(o,i,i[Le],s,n,e,r),H}function vP(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Qc],u=i[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function gC(n,e,t,r,i,o,s){let c=_u(r),d=n.firstCreatePass?WE(n):null,f=GE(e),g=!0;if(r.type&3||s){let y=hn(r,e),m=s?s(y):y,S=f.length,P=s?$=>s(cn($[r.index])):r.index,R=null;if(!s&&c&&(R=vP(n,e,i,r.index)),R!==null){let $=R.__ngLastListenerFn__||R;$.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,g=!1}else{o=hE(r,e,o),EN(e,m,i,o);let $=t.listen(m,i,o);f.push(o,$),d&&d.push(i,P,S,S+1)}}else o=hE(r,e,o);if(g){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let S=0;S<m.length;S+=2){let P=m[S],R=m[S+1];pE(r,e,P,R,i,o)}if(y&&y.length)for(let S of y)pE(r,e,S,i,i,o)}}function z(n=1){return PM(n)}function Op(n,e,t,r,i){let o=ye(),s=pC(o,e,t,r);if(s!==Yt){let c=Xe(),u=wu();Ip(c,u,o,n,s,o[Le],i,!1)}return Op}function Vu(n){let e=bM();return ep(e,Et+n)}function F(n,e=""){let t=ye(),r=Xe(),i=n+Et,o=r.firstCreatePass?Pu(r,i,1,e,null):r.data[i],s=IP(r,t,o,e,n);t[i]=s,Cu()&&Nu(r,t,s,o),Xr(o,!1)}var IP=(n,e,t,r,i)=>(Du(!0),BN(e[Le],r));function it(n){return ot("",n,""),it}function ot(n,e,t){let r=ye(),i=pC(r,n,e,t);return i!==Yt&&mC(r,ei(),i),ot}function kp(n,e,t,r,i){let o=ye(),s=WR(o,n,e,t,r,i);return s!==Yt&&mC(o,ei(),s),kp}function mC(n,e,t){let r=jE(e,n);UN(n[Le],r,t)}function Fn(n,e,t){ww(e)&&(e=e());let r=ye(),i=Eu();if(fr(r,i,e)){let o=Xe(),s=wu();Ip(o,s,r,n,e,r[Le],t,!1)}return Fn}function pr(n,e){let t=ww(n);return t&&n.set(e),t}function Vn(n,e){let t=ye(),r=Xe(),i=At();return gC(r,t,t[Le],i,n,e),Vn}function EP(n,e,t){let r=Xe();if(r.firstCreatePass){let i=an(n);jf(t,r.data,r.blueprint,i,!0),jf(e,r.data,r.blueprint,i,!1)}}function jf(n,e,t,r,i){if(n=ft(n),Array.isArray(n))for(let o=0;o<n.length;o++)jf(n[o],e,t,r,i);else{let o=Xe(),s=ye(),c=At(),u=Gi(n)?n:ft(n.provide),d=PE(n),f=c.providerIndexes&1048575,g=c.directiveStart,y=c.providerIndexes>>20;if(Gi(n)||!n.multi){let m=new Yr(d,i,j),S=af(u,e,i?f:f+y,g);S===-1?(vf(ru(c,s),o,u),sf(o,n,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(m),s.push(m)):(t[S]=m,s[S]=m)}else{let m=af(u,e,f+y,g),S=af(u,e,f,f+y),P=m>=0&&t[m],R=S>=0&&t[S];if(i&&!R||!i&&!P){vf(ru(c,s),o,u);let $=DP(i?CP:wP,t.length,i,r,d);!i&&R&&(t[S].providerFactory=$),sf(o,n,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push($),s.push($)}else{let $=yC(t[i?S:m],d,!i&&r);sf(o,n,m>-1?m:S,$)}!i&&r&&R&&t[S].componentProviders++}}}function sf(n,e,t,r){let i=Gi(e),o=tM(e);if(i||o){let u=(o?ft(e.useClass):e).prototype.ngOnDestroy;if(u){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=d.indexOf(t);f===-1?d.push(t,[r,u]):d[f+1].push(r,u)}else d.push(t,u)}}}function yC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function af(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function wP(n,e,t,r,i){return $f(this.multi,[])}function CP(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=iu(r,r[ae],this.providerFactory.index,i);s=u.slice(0,c),$f(o,s);for(let d=c;d<u.length;d++)s.push(u[d])}else s=[],$f(o,s);return s}function $f(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function DP(n,e,t,r,i){let o=new Yr(n,t,j);return o.multi=[],o.index=e,o.componentProviders=0,yC(o,i,r&&!t),o}function Nt(n,e=[]){return t=>{t.providersResolver=(r,i)=>EP(r,i?i(n):n,e)}}function _C(n,e,t){let r=ip()+n,i=ye();return i[r]===Yt?Np(i,r,t?e.call(t):e()):kR(i,r)}function vC(n,e){let t=n[e];return t===Yt?void 0:t}function bP(n,e,t,r,i,o){let s=e+t;return fr(n,s,i)?Np(n,s+1,o?r.call(o,i):r(i)):vC(n,s+1)}function TP(n,e,t,r,i,o,s){let c=e+t;return dC(n,c,i,o)?Np(n,c+2,s?r.call(s,i,o):r(i,o)):vC(n,c+2)}function Ln(n,e){let t=Xe(),r,i=n+Et;t.firstCreatePass?(r=SP(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=zr(r.type,!0)),s,c=vt(j);try{let u=nu(!1),d=o();return nu(u),pM(t,ye(),i,d),d}finally{vt(c)}}function SP(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Vs(n,e,t){let r=n+Et,i=ye(),o=ep(i,r);return IC(i,r)?bP(i,ip(),e,o.transform,t,o):o.transform(t)}function Lu(n,e,t,r){let i=n+Et,o=ye(),s=ep(o,i);return IC(o,i)?TP(o,ip(),e,s.transform,t,r,s):s.transform(t,r)}function IC(n,e){return n[ae].data[e].pure}function Bu(n,e){return nC(n,e)}var eo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},EC=new eo("19.2.13");var AP=(()=>{class n{zone=he(xe);changeDetectionScheduler=he(xs);applicationRef=he(Ps);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MP({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(pe(te({},NP()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:Gc,multi:!0,useFactory:()=>{let r=he(AP,{optional:!0});return()=>r.initialize()}},{provide:Gc,multi:!0,useFactory:()=>{let r=he(xP);return()=>{r.initialize()}}},e===!0?{provide:_w,useValue:!0}:[],{provide:vw,useValue:t??gw}]}function NP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var xP=(()=>{class n{subscription=new Je;initialized=!1;zone=he(xe);pendingTasks=he(bu);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var RP=(()=>{class n{appRef=he(Ps);taskService=he(bu);ngZone=he(xe);zonelessEnabled=he(yw);tracing=he(Su,{optional:!0});disableScheduling=he(_w,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(su):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(he(vw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Df||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?WI:Iw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(su+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PP(){return typeof $localize<"u"&&$localize.locale||fu}var Ls=new G("",{providedIn:"root",factory:()=>he(Ls,ne.Optional|ne.SkipSelf)||PP()});var Hf=new G(""),OP=new G("");function ws(n){return!n.moduleRef}function kP(n){let e=ws(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{ws(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Rn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ws(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Hf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Hf);s.add(o),n.moduleRef.onDestroy(()=>{Uc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return VP(r,t,()=>{let o=e.get(fC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ls,fu);if(yP(s||fu),!e.get(OP,!0))return ws(n)?e.get(Ps):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ws(n)){let u=e.get(Ps);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return FP(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function FP(n,e){let t=n.injector.get(Ps);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}function VP(n,e,t){try{let r=t();return co(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var jc=null;function LP(n=[],e){return Lt.create({name:e,providers:[{provide:mu,useValue:"platform"},{provide:Hf,useValue:new Set([()=>jc=null])},...n]})}function BP(n=[]){if(jc)return jc;let e=LP(n);return jc=e,HR(),UP(e),e}function UP(n){let e=n.get(hp,null);OE(n,()=>{e?.forEach(t=>t())})}var Uu=(()=>{class n{static __NG_ELEMENT_ID__=jP}return n})();function jP(n){return $P(At(),ye(),(n&16)===16)}function $P(n,e,t){if(ro(n)&&!t){let r=un(n.index,e);return new Rs(r,r)}else if(n.type&175){let r=e[sn];return new Rs(r,e)}return null}var qf=class{constructor(){}supports(e){return lC(e)}create(e){return new zf(e)}},HP=(n,e)=>e,zf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||HP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<gE(r,i,o)?t:r,c=gE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=c-i,f=u-i;if(d!=f){for(let y=0;y<d;y++){let m=y<o.length?o[y]:o[y]=0,S=m+y;f<=S&&S<d&&(o[y]=m+1)}let g=s.previousIndex;o[g]=f-d}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!lC(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,PR(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Gf(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gf=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Wf=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pu=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Wf,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function mE(){return new Fp([new qf])}var Fp=(()=>{class n{factories;static \u0275prov=_e({token:n,providedIn:"root",factory:mE});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mE()),deps:[[n,new zA,new St]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();function wC(n){Te(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=BP(r),o=[MP({}),{provide:xs,useExisting:RP},...t||[]],s=new du({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return kP({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Te(9)}}function Vp(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Bt(n){return Nh(n)}function uo(n,e){return bh(n,e?.equal)}var yE=class{[zt];constructor(e){this[zt]=e}destroy(){this[zt].destroy()}};var fn=new G("");var CC=null;function gr(){return CC}function Lp(n){CC??=n}var Bs=class{};var Gp=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Gp||{});var st=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(st||{}),Ce=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ce||{}),Dt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Dt||{}),bt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function AC(n){return Mt(n)[Fe.LocaleId]}function MC(n,e,t){let r=Mt(n),i=[r[Fe.DayPeriodsFormat],r[Fe.DayPeriodsStandalone]],o=Ut(i,e);return Ut(o,t)}function NC(n,e,t){let r=Mt(n),i=[r[Fe.DaysFormat],r[Fe.DaysStandalone]],o=Ut(i,e);return Ut(o,t)}function xC(n,e,t){let r=Mt(n),i=[r[Fe.MonthsFormat],r[Fe.MonthsStandalone]],o=Ut(i,e);return Ut(o,t)}function RC(n,e){let r=Mt(n)[Fe.Eras];return Ut(r,e)}function Us(n,e){let t=Mt(n);return Ut(t[Fe.DateFormat],e)}function js(n,e){let t=Mt(n);return Ut(t[Fe.TimeFormat],e)}function $s(n,e){let r=Mt(n)[Fe.DateTimeFormat];return Ut(r,e)}function pn(n,e){let t=Mt(n),r=t[Fe.NumberSymbols][e];if(typeof r>"u"){if(e===bt.CurrencyDecimal)return t[Fe.NumberSymbols][bt.Decimal];if(e===bt.CurrencyGroup)return t[Fe.NumberSymbols][bt.Group]}return r}function PC(n,e){return Mt(n)[Fe.NumberFormats][e]}function OC(n){if(!n[Fe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Fe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kC(n){let e=Mt(n);return OC(e),(e[Fe.ExtraData][2]||[]).map(r=>typeof r=="string"?Bp(r):[Bp(r[0]),Bp(r[1])])}function FC(n,e,t){let r=Mt(n);OC(r);let i=[r[Fe.ExtraData][0],r[Fe.ExtraData][1]],o=Ut(i,e)||[];return Ut(o,t)||[]}function Ut(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Bp(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var qP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ju={},zP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function VC(n,e,t,r){let i=eO(n);e=Bn(t,e)||e;let s=[],c;for(;e;)if(c=zP.exec(e),c){s=s.concat(c.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=BC(r,u),i=XP(i,r));let d="";return s.forEach(f=>{let g=ZP(f);d+=g?g(i,t,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Gu(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Bn(n,e){let t=AC(n);if(ju[t]??={},ju[t][e])return ju[t][e];let r="";switch(e){case"shortDate":r=Us(n,Dt.Short);break;case"mediumDate":r=Us(n,Dt.Medium);break;case"longDate":r=Us(n,Dt.Long);break;case"fullDate":r=Us(n,Dt.Full);break;case"shortTime":r=js(n,Dt.Short);break;case"mediumTime":r=js(n,Dt.Medium);break;case"longTime":r=js(n,Dt.Long);break;case"fullTime":r=js(n,Dt.Full);break;case"short":let i=Bn(n,"shortTime"),o=Bn(n,"shortDate");r=$u($s(n,Dt.Short),[i,o]);break;case"medium":let s=Bn(n,"mediumTime"),c=Bn(n,"mediumDate");r=$u($s(n,Dt.Medium),[s,c]);break;case"long":let u=Bn(n,"longTime"),d=Bn(n,"longDate");r=$u($s(n,Dt.Long),[u,d]);break;case"full":let f=Bn(n,"fullTime"),g=Bn(n,"fullDate");r=$u($s(n,Dt.Full),[f,g]);break}return r&&(ju[t][e]=r),r}function $u(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Jt(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function GP(n,e){return Jt(n,3).substring(0,e)}function je(n,e,t=0,r=!1,i=!1){return function(o,s){let c=WP(n,o);if((t>0||c>-t)&&(c+=t),n===3)c===0&&t===-12&&(c=12);else if(n===6)return GP(c,e);let u=pn(s,bt.MinusSign);return Jt(c,e,u,r,i)}}function WP(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Se(n,e,t=st.Format,r=!1){return function(i,o){return KP(i,o,n,e,t,r)}}function KP(n,e,t,r,i,o){switch(t){case 2:return xC(e,i,r)[n.getMonth()];case 1:return NC(e,i,r)[n.getDay()];case 0:let s=n.getHours(),c=n.getMinutes();if(o){let d=kC(e),f=FC(e,i,r),g=d.findIndex(y=>{if(Array.isArray(y)){let[m,S]=y,P=s>=m.hours&&c>=m.minutes,R=s<S.hours||s===S.hours&&c<S.minutes;if(m.hours<S.hours){if(P&&R)return!0}else if(P||R)return!0}else if(y.hours===s&&y.minutes===c)return!0;return!1});if(g!==-1)return f[g]}return MC(e,i,r)[s<12?0:1];case 3:return RC(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Hu(n){return function(e,t,r){let i=-1*r,o=pn(t,bt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Jt(s,2,o)+Jt(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Jt(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Jt(s,2,o)+":"+Jt(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Jt(s,2,o)+":"+Jt(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var QP=0,zu=4;function YP(n){let e=Gu(n,QP,1).getDay();return Gu(n,0,1+(e<=zu?zu:zu+7)-e)}function LC(n){let e=n.getDay(),t=e===0?-3:zu-e;return Gu(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Up(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=LC(t),s=YP(o.getFullYear()),c=o.getTime()-s.getTime();i=1+Math.round(c/6048e5)}return Jt(i,n,pn(r,bt.MinusSign))}}function qu(n,e=!1){return function(t,r){let o=LC(t).getFullYear();return Jt(o,n,pn(r,bt.MinusSign),e)}}var jp={};function ZP(n){if(jp[n])return jp[n];let e;switch(n){case"G":case"GG":case"GGG":e=Se(3,Ce.Abbreviated);break;case"GGGG":e=Se(3,Ce.Wide);break;case"GGGGG":e=Se(3,Ce.Narrow);break;case"y":e=je(0,1,0,!1,!0);break;case"yy":e=je(0,2,0,!0,!0);break;case"yyy":e=je(0,3,0,!1,!0);break;case"yyyy":e=je(0,4,0,!1,!0);break;case"Y":e=qu(1);break;case"YY":e=qu(2,!0);break;case"YYY":e=qu(3);break;case"YYYY":e=qu(4);break;case"M":case"L":e=je(1,1,1);break;case"MM":case"LL":e=je(1,2,1);break;case"MMM":e=Se(2,Ce.Abbreviated);break;case"MMMM":e=Se(2,Ce.Wide);break;case"MMMMM":e=Se(2,Ce.Narrow);break;case"LLL":e=Se(2,Ce.Abbreviated,st.Standalone);break;case"LLLL":e=Se(2,Ce.Wide,st.Standalone);break;case"LLLLL":e=Se(2,Ce.Narrow,st.Standalone);break;case"w":e=Up(1);break;case"ww":e=Up(2);break;case"W":e=Up(1,!0);break;case"d":e=je(2,1);break;case"dd":e=je(2,2);break;case"c":case"cc":e=je(7,1);break;case"ccc":e=Se(1,Ce.Abbreviated,st.Standalone);break;case"cccc":e=Se(1,Ce.Wide,st.Standalone);break;case"ccccc":e=Se(1,Ce.Narrow,st.Standalone);break;case"cccccc":e=Se(1,Ce.Short,st.Standalone);break;case"E":case"EE":case"EEE":e=Se(1,Ce.Abbreviated);break;case"EEEE":e=Se(1,Ce.Wide);break;case"EEEEE":e=Se(1,Ce.Narrow);break;case"EEEEEE":e=Se(1,Ce.Short);break;case"a":case"aa":case"aaa":e=Se(0,Ce.Abbreviated);break;case"aaaa":e=Se(0,Ce.Wide);break;case"aaaaa":e=Se(0,Ce.Narrow);break;case"b":case"bb":case"bbb":e=Se(0,Ce.Abbreviated,st.Standalone,!0);break;case"bbbb":e=Se(0,Ce.Wide,st.Standalone,!0);break;case"bbbbb":e=Se(0,Ce.Narrow,st.Standalone,!0);break;case"B":case"BB":case"BBB":e=Se(0,Ce.Abbreviated,st.Format,!0);break;case"BBBB":e=Se(0,Ce.Wide,st.Format,!0);break;case"BBBBB":e=Se(0,Ce.Narrow,st.Format,!0);break;case"h":e=je(3,1,-12);break;case"hh":e=je(3,2,-12);break;case"H":e=je(3,1);break;case"HH":e=je(3,2);break;case"m":e=je(4,1);break;case"mm":e=je(4,2);break;case"s":e=je(5,1);break;case"ss":e=je(5,2);break;case"S":e=je(6,1);break;case"SS":e=je(6,2);break;case"SSS":e=je(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Hu(0);break;case"ZZZZZ":e=Hu(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hu(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hu(2);break;default:return null}return jp[n]=e,e}function BC(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function JP(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function XP(n,e,t){let i=n.getTimezoneOffset(),o=BC(e,i);return JP(n,-1*(o-i))}function eO(n){if(DC(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(c=>+c);return Gu(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(qP))return tO(r)}let e=new Date(n);if(!DC(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function tO(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,c=Number(n[5]||0)-r,u=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,c,u,d),e}function DC(n){return n instanceof Date&&!isNaN(n.valueOf())}var nO=/^(\d+)?\.((\d+)(-(\d+))?)?$/,bC=22,Wu=".",Hs="0",rO=";",iO=",",$p="#";function oO(n,e,t,r,i,o,s=!1){let c="",u=!1;if(!isFinite(n))c=pn(t,bt.Infinity);else{let d=cO(n);s&&(d=aO(d));let f=e.minInt,g=e.minFrac,y=e.maxFrac;if(o){let Z=o.match(nO);if(Z===null)throw new Error(`${o} is not a valid digit info`);let re=Z[1],ve=Z[3],Ke=Z[5];re!=null&&(f=Hp(re)),ve!=null&&(g=Hp(ve)),Ke!=null?y=Hp(Ke):ve!=null&&g>y&&(y=g)}uO(d,g,y);let m=d.digits,S=d.integerLen,P=d.exponent,R=[];for(u=m.every(Z=>!Z);S<f;S++)m.unshift(0);for(;S<0;S++)m.unshift(0);S>0?R=m.splice(S,m.length):(R=m,m=[0]);let $=[];for(m.length>=e.lgSize&&$.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)$.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&$.unshift(m.join("")),c=$.join(pn(t,r)),R.length&&(c+=pn(t,i)+R.join("")),P&&(c+=pn(t,bt.Exponential)+"+"+P)}return n<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function UC(n,e,t){let r=PC(e,Gp.Decimal),i=sO(r,pn(e,bt.MinusSign));return oO(n,i,e,bt.Group,bt.Decimal,t)}function sO(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(rO),i=r[0],o=r[1],s=i.indexOf(Wu)!==-1?i.split(Wu):[i.substring(0,i.lastIndexOf(Hs)+1),i.substring(i.lastIndexOf(Hs)+1)],c=s[0],u=s[1]||"";t.posPre=c.substring(0,c.indexOf($p));for(let f=0;f<u.length;f++){let g=u.charAt(f);g===Hs?t.minFrac=t.maxFrac=f+1:g===$p?t.maxFrac=f+1:t.posSuf+=g}let d=c.split(iO);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let f=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf($p);t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function aO(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function cO(n){let e=Math.abs(n)+"",t=0,r,i,o,s,c;for((i=e.indexOf(Wu))>-1&&(e=e.replace(Wu,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Hs;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Hs;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>bC&&(r=r.splice(0,bC-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function uO(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,c=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(c>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,d=e+n.integerLen,f=r.reduceRight(function(g,y,m,S){return y=y+g,S[m]=y<10?y:y-10,u&&(S[m]===0&&m>=d?S.pop():u=!1),y>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}function Hp(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Ku=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ku(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),TC(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);TC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(j(Ou),j(Ru),j(Fp))};static \u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function TC(n,e){n.context.$implicit=e.item}var yt=(()=>{class n{_viewContainer;_context=new Qu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){SC(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){SC(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(j(Ou),j(Ru))};static \u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Qu=class{$implicit=null;ngIf=null};function SC(n,e){if(n&&!n.createEmbeddedView)throw new Y(2020,!1)}function Wp(n,e){return new Y(2100,!1)}var qp=class{createSubscription(e,t){return Bt(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Bt(()=>e.unsubscribe())}},zp=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},lO=new zp,dO=new qp,qs=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(co(t))return lO;if(xp(t))return dO;throw Wp(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(j(Uu,16))};static \u0275pipe=ku({name:"async",type:n,pure:!1})}return n})();var hO="mediumDate",jC=new G(""),$C=new G(""),Kp=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??hO,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return VC(t,s,o||this.locale,c)}catch(s){throw Wp(n,s.message)}}static \u0275fac=function(r){return new(r||n)(j(Ls,16),j(jC,24),j($C,24))};static \u0275pipe=ku({name:"date",type:n,pure:!0})}return n})();var Qp=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!fO(t))return null;i||=this._locale;try{let o=pO(t);return UC(o,i,r)}catch(o){throw Wp(n,o.message)}}static \u0275fac=function(r){return new(r||n)(j(Ls,16))};static \u0275pipe=ku({name:"number",type:n,pure:!0})}return n})();function fO(n){return!(n==null||n===""||n!==n)}function pO(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var at=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Jr({})}return n})();function Yp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Zp="browser",HC="server";function Yu(n){return n===HC}var zs=class{};var Xu=new G(""),tg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(Xu),me(xe))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Gs=class{_doc;constructor(e){this._doc=e}manager},Zu="ng-app-id";function qC(n){for(let e of n)e.remove()}function zC(n,e){let t=e.createElement("style");return t.textContent=n,t}function gO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Zu}="${e}"],link[${Zu}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Zu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Xp(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ng=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Yu(o),gO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,zC);r?.forEach(i=>this.addUsage(i,this.external,Xp))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(qC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])qC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,zC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Xp(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Zu,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(fn),me(dp),me(fp,8),me(ri))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Jp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rg=/%COMP%/g;var WC="%COMP%",mO=`_nghost-${WC}`,yO=`_ngcontent-${WC}`,_O=!0,vO=new G("",{providedIn:"root",factory:()=>_O});function IO(n){return yO.replace(rg,n)}function EO(n){return mO.replace(rg,n)}function KC(n,e){return e.map(t=>t.replace(rg,n))}var ig=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u,d=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=d,this.tracingService=f,this.platformIsServer=Yu(c),this.defaultRenderer=new Ws(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ln.ShadowDom&&(r=pe(te({},r),{encapsulation:ln.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ju?i.applyToHost(t):i instanceof Ks&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case ln.Emulated:o=new Ju(u,d,r,this.appId,f,s,c,g,y);break;case ln.ShadowDom:return new eg(u,d,t,r,s,c,this.nonce,g,y);default:o=new Ks(u,d,r,f,s,c,g,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(tg),me(ng),me(dp),me(vO),me(fn),me(ri),me(xe),me(fp),me(Su,8))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Ws=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Jp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(GC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(GC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Jp[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Jp[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pn.DashCase|Pn.Important)?e.style.setProperty(t,r,i&Pn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=gr().getGlobalEventTarget(this.doc,e),!e))throw new Y(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function GC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var eg=class extends Ws{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,d){super(e,o,s,u,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=KC(i.id,f);for(let y of f){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=y,this.shadowRoot.appendChild(m)}let g=i.getExternalStyles?.();if(g)for(let y of g){let m=Xp(y,o);c&&m.setAttribute("nonce",c),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ks=class extends Ws{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,d){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=d?KC(d,f):f,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ju=class extends Ks{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,d){let f=i+"-"+r.id;super(e,t,r,o,s,c,u,d,f),this.contentAttr=IO(f),this.hostAttr=EO(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var el=class n extends Bs{supportsDOMEvents=!0;static makeCurrent(){Lp(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=wO();return t==null?null:CO(t)}resetBaseElement(){Qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yp(document.cookie,e)}},Qs=null;function wO(){return Qs=Qs||document.head.querySelector("base"),Qs?Qs.getAttribute("href"):null}function CO(n){return new URL(n,document.baseURI).pathname}var DO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),YC=(()=>{class n extends Gs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(me(fn))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),QC=["alt","control","meta","shift"],bO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ZC=(()=>{class n extends Gs{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gr().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),QC.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=bO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),QC.forEach(s=>{if(s!==i){let c=TO[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(fn))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function og(n,e){return wC(te({rootComponent:n},SO(e)))}function SO(n){return{appProviders:[...RO,...n?.providers??[]],platformProviders:xO}}function AO(){el.makeCurrent()}function MO(){return new Rn}function NO(){return Mw(document),document}var xO=[{provide:ri,useValue:Zp},{provide:hp,useValue:AO,multi:!0},{provide:fn,useFactory:NO}];var RO=[{provide:mu,useValue:"root"},{provide:Rn,useFactory:MO},{provide:Xu,useClass:YC,multi:!0,deps:[fn]},{provide:Xu,useClass:ZC,multi:!0,deps:[fn]},ig,ng,tg,{provide:Ji,useExisting:ig},{provide:zs,useClass:DO},[]];var aD=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(j(ao),j(ni))};static \u0275dir=ke({type:n})}return n})(),hl=(()=>{class n extends aD{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=ke({type:n,features:[mt]})}return n})(),yr=new G("");var PO={provide:yr,useExisting:gt(()=>mn),multi:!0};function OO(){let n=gr()?gr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var kO=new G(""),mn=(()=>{class n extends aD{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!OO())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(j(ao),j(ni),j(kO,8))};static \u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&H("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Nt([PO]),mt]})}return n})();function ug(n){return n==null||lg(n)===0}function lg(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var mo=new G(""),fl=new G(""),FO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fo=class{static min(e){return VO(e)}static max(e){return LO(e)}static required(e){return cD(e)}static requiredTrue(e){return BO(e)}static email(e){return UO(e)}static minLength(e){return uD(e)}static maxLength(e){return jO(e)}static pattern(e){return $O(e)}static nullValidator(e){return nl()}static compose(e){return gD(e)}static composeAsync(e){return mD(e)}};function VO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function LO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function cD(n){return ug(n.value)?{required:!0}:null}function BO(n){return n.value===!0?null:{required:!0}}function UO(n){return ug(n.value)||FO.test(n.value)?null:{email:!0}}function uD(n){return e=>{let t=e.value?.length??lg(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function jO(n){return e=>{let t=e.value?.length??lg(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function $O(n){if(!n)return nl;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ug(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function nl(n){return null}function lD(n){return n!=null}function dD(n){return co(n)?Es(n):n}function hD(n){let e={};return n.forEach(t=>{e=t!=null?te(te({},e),t):e}),Object.keys(e).length===0?null:e}function fD(n,e){return e.map(t=>t(n))}function HO(n){return!n.validate}function pD(n){return n.map(e=>HO(e)?e:t=>e.validate(t))}function gD(n){if(!n)return null;let e=n.filter(lD);return e.length==0?null:function(t){return hD(fD(t,e))}}function dg(n){return n!=null?gD(pD(n)):null}function mD(n){if(!n)return null;let e=n.filter(lD);return e.length==0?null:function(t){let r=fD(t,e).map(dD);return qh(r).pipe(rn(hD))}}function hg(n){return n!=null?mD(pD(n)):null}function JC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yD(n){return n._rawValidators}function _D(n){return n._rawAsyncValidators}function sg(n){return n?Array.isArray(n)?n:[n]:[]}function rl(n,e){return Array.isArray(n)?n.includes(e):n===e}function XC(n,e){let t=sg(e);return sg(n).forEach(i=>{rl(t,i)||t.push(i)}),t}function eD(n,e){return sg(e).filter(t=>!rl(n,t))}var il=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Un=class extends il{name;get formDirective(){return null}get path(){return null}},ai=class extends il{_parent=null;name=null;valueAccessor=null},ol=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},qO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},l5=pe(te({},qO),{"[class.ng-submitted]":"isSubmitted"}),_r=(()=>{class n extends ol{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(j(ai,2))};static \u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&oi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[mt]})}return n})(),pl=(()=>{class n extends ol{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(j(Un,10))};static \u0275dir=ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&oi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[mt]})}return n})();var Ys="VALID",tl="INVALID",lo="PENDING",Zs="DISABLED",mr=class{},sl=class extends mr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Xs=class extends mr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ea=class extends mr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ho=class extends mr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},al=class extends mr{source;constructor(e){super(),this.source=e}},cl=class extends mr{source;constructor(e){super(),this.source=e}};function fg(n){return(gl(n)?n.validators:n)||null}function zO(n){return Array.isArray(n)?dg(n):n||null}function pg(n,e){return(gl(e)?e.asyncValidators:n)||null}function GO(n){return Array.isArray(n)?hg(n):n||null}function gl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function vD(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Y(1e3,"");if(!r[t])throw new Y(1001,"")}function ID(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Y(1002,"")})}var po=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Bt(this.statusReactive)}set status(e){Bt(()=>this.statusReactive.set(e))}_status=uo(()=>this.statusReactive());statusReactive=oo(void 0);get valid(){return this.status===Ys}get invalid(){return this.status===tl}get pending(){return this.status==lo}get disabled(){return this.status===Zs}get enabled(){return this.status!==Zs}errors;get pristine(){return Bt(this.pristineReactive)}set pristine(e){Bt(()=>this.pristineReactive.set(e))}_pristine=uo(()=>this.pristineReactive());pristineReactive=oo(!0);get dirty(){return!this.pristine}get touched(){return Bt(this.touchedReactive)}set touched(e){Bt(()=>this.touchedReactive.set(e))}_touched=uo(()=>this.touchedReactive());touchedReactive=oo(!1);get untouched(){return!this.touched}_events=new xn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(XC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eD(e,this._rawAsyncValidators))}hasValidator(e){return rl(this._rawValidators,e)}hasAsyncValidator(e){return rl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(te({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ea(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ea(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(te({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Xs(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Xs(!0,r))}markAsPending(e={}){this.status=lo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ho(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(te({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zs,this.errors=null,this._forEachChild(i=>{i.disable(pe(te({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sl(this.value,r)),this._events.next(new ho(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(te({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ys,this._forEachChild(r=>{r.enable(pe(te({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(te({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ys||this.status===lo)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sl(this.value,t)),this._events.next(new ho(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(te({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zs:Ys}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=lo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=dD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ho(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new be,this.statusChanges=new be}_calculateStatus(){return this._allControlsDisabled()?Zs:this.errors?tl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lo)?lo:this._anyControlsHaveStatus(tl)?tl:Ys}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Xs(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ea(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=zO(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=GO(this._rawAsyncValidators)}},go=class extends po{constructor(e,t,r){super(fg(t),pg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ID(this,!0,e),Object.keys(e).forEach(r=>{vD(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ag=class extends go{};var na=new G("",{providedIn:"root",factory:()=>ml}),ml="always";function ED(n,e){return[...e.path,n]}function ul(n,e,t=ml){gg(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),KO(n,e),YO(n,e),QO(n,e),WO(n,e)}function tD(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ll(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WO(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gg(n,e){let t=yD(n);e.validator!==null?n.setValidators(JC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=_D(n);e.asyncValidator!==null?n.setAsyncValidators(JC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ll(e._rawValidators,i),ll(e._rawAsyncValidators,i)}function dl(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=yD(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=_D(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return ll(e._rawValidators,r),ll(e._rawAsyncValidators,r),t}function KO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wD(n,e)})}function QO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wD(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function wD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YO(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function CD(n,e){n==null,gg(n,e)}function ZO(n,e){return dl(n,e)}function DD(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JO(n){return Object.getPrototypeOf(n.constructor)===hl}function bD(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function TD(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===mn?t=o:JO(o)?r=o:i=o}),i||r||t||null}function XO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var ek={provide:Un,useExisting:gt(()=>mg)},Js=Promise.resolve(),mg=(()=>{class n extends Un{callSetDisabledState;get submitted(){return Bt(this.submittedReactive)}_submitted=uo(()=>this.submittedReactive());submittedReactive=oo(!1);_directives=new Set;form;ngSubmit=new be;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new go({},dg(t),hg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Js.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ul(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Js.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Js.then(()=>{let r=this._findContainer(t.path),i=new go({});CD(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Js.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Js.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),bD(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new al(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new cl(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(j(mo,10),j(fl,10),j(na,8))};static \u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&H("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Nt([ek]),mt]})}return n})();function nD(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rD(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ta=class extends po{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(fg(t),pg(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(rD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tk=n=>n instanceof ta;var nk={provide:ai,useExisting:gt(()=>ci)},iD=Promise.resolve(),ci=(()=>{class n extends ai{_changeDetectorRef;callSetDisabledState;control=new ta;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new be;constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=TD(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),DD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ul(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){iD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Vp(r);iD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ED(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(j(Un,9),j(mo,10),j(fl,10),j(yr,10),j(Uu,8),j(na,8))};static \u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Nt([nk]),mt,dn]})}return n})();var yl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var rk={provide:yr,useExisting:gt(()=>yg),multi:!0},yg=(()=>{class n extends hl{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&H("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Nt([rk]),mt]})}return n})(),SD=new G("");var ik={provide:Un,useExisting:gt(()=>_g)},_g=(()=>{class n extends Un{callSetDisabledState;get submitted(){return Bt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=uo(()=>this._submittedReactive());_submittedReactive=oo(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new be;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return ul(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){tD(t.control||null,t,!1),XO(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),bD(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new al(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new cl(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(tD(r||null,t),tk(i)&&(ul(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);CD(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&ZO(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gg(this.form,this),this._oldForm&&dl(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(j(mo,10),j(fl,10),j(na,8))};static \u0275dir=ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&H("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Nt([ik]),mt,dn]})}return n})();var ok={provide:ai,useExisting:gt(()=>vg)},vg=(()=>{class n extends ai{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new be;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=TD(this,o)}ngOnChanges(t){this._added||this._setUpControl(),DD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ED(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(j(Un,13),j(mo,10),j(fl,10),j(yr,10),j(SD,8))};static \u0275dir=ke({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Nt([ok]),mt,dn]})}return n})();var sk={provide:yr,useExisting:gt(()=>yo),multi:!0};function AD(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ak(n){return n.split(":")[0]}var yo=(()=>{class n extends hl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=AD(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=ak(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&H("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Nt([sk]),mt]})}return n})(),_l=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(AD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(j(ni),j(ao),j(yo,9))};static \u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),ck={provide:yr,useExisting:gt(()=>MD),multi:!0};function oD(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function uk(n){return n.split(":")[0]}var MD=(()=>{class n extends hl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],d=this._getOptionValue(u.value);i.push(d)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let d=this._getOptionValue(u.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=uk(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&H("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Nt([ck]),mt]})}return n})(),vl=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(oD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(oD(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(j(ni),j(ao),j(MD,9))};static \u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function lk(n){return typeof n=="number"?n:parseInt(n,10)}var ND=(()=>{class n{_validator=nl;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):nl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,features:[dn]})}return n})();var dk={provide:mo,useExisting:gt(()=>Ig),multi:!0};var Ig=(()=>{class n extends ND{required;inputName="required";normalizeInput=Vp;createValidator=t=>cD;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Fu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Nt([dk]),mt]})}return n})();var hk={provide:mo,useExisting:gt(()=>Eg),multi:!0},Eg=(()=>{class n extends ND{minlength;inputName="minlength";normalizeInput=t=>lk(t);createValidator=t=>uD(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Fu("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Nt([hk]),mt]})}return n})();var xD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Jr({})}return n})(),cg=class extends po{constructor(e,t,r){super(fg(t),pg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ID(this,!1,e),e.forEach((r,i)=>{vD(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function sD(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var RD=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return sD(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new go(i,o)}record(t,r=null){let i=this._reduceControls(t);return new ag(i,r)}control(t,r,i){let o={};return this.useNonNullable?(sD(r)?o=r:(o.validators=r,o.asyncValidators=i),new ta(t,pe(te({},o),{nonNullable:!0}))):new ta(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new cg(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof ta)return t;if(t instanceof po)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:na,useValue:t.callSetDisabledState??ml}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Jr({imports:[xD]})}return n})(),PD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:SD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:na,useValue:t.callSetDisabledState??ml}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Jr({imports:[xD]})}return n})();function fk(n,e){if(n&1&&(x(0,"option",5),F(1),N()),n&2){let t=e.$implicit,r=z();U("value",t),V(),ot(" ",t===r.ADD_NEW_OPTION_VALUE?r.addNewOptionText:t," ")}}function pk(n,e){if(n&1){let t=Be();x(0,"li",15)(1,"span"),F(2),N(),x(3,"button",16),H("click",function(){let i=ue(t).$implicit,o=z(3);return le(o.deleteUserCustomCategory(i))}),F(4,"\xD7"),N()()}if(n&2){let t=e.$implicit,r=z(3);V(2),it(t),V(),Op("title","\u522A\u9664 ",t,""),U("disabled",r.isDisabled)}}function gk(n,e){if(n&1&&(x(0,"div",12)(1,"p",13),F(2,"\u7BA1\u7406\u81EA\u5B9A\u7FA9\u985E\u5225:"),N(),x(3,"ul"),we(4,pk,5,4,"li",14),N()()),n&2){let t=z(2);V(4),U("ngForOf",t.deletableUserCustomCategories)}}function mk(n,e){if(n&1){let t=Be();x(0,"div",6)(1,"div",7)(2,"input",8),Vn("ngModelChange",function(i){ue(t);let o=z();return pr(o.customCategoryValue,i)||(o.customCategoryValue=i),le(i)}),H("keyup.enter",function(){ue(t);let i=z();return le(i.confirmCustomCategory())}),N(),x(3,"button",9),H("click",function(){ue(t);let i=z();return le(i.confirmCustomCategory())}),F(4,"\u78BA\u8A8D"),N(),x(5,"button",10),H("click",function(){ue(t);let i=z();return le(i.cancelCustomCategory())}),F(6,"\u53D6\u6D88"),N()(),we(7,gk,5,1,"div",11),N()}if(n&2){let t=z();V(2),Fn("ngModel",t.customCategoryValue),U("disabled",t.isDisabled),V(),U("disabled",t.isDisabled),V(2),U("disabled",t.isDisabled),V(2),U("ngIf",t.deletableUserCustomCategories.length>0)}}var El=class n{predefinedCategories=[];initialCategory=null;placeholder="\u9078\u64C7\u6216\u65B0\u589E\u985E\u5225";addNewOptionText="\uFF0B \u65B0\u589E\u81EA\u5B9A\u7FA9\u985E\u5225...";localStorageKey="appUserCustomCategories";categorySelected=new be;displayCategories=[];selectedInternalCategory=null;isCustomInputVisible=!1;customCategoryValue="";userCustomCategories=[];ADD_NEW_OPTION_VALUE="__ADD_NEW_CATEGORY__";onChange=()=>{};onTouched=()=>{};isDisabled=!1;constructor(){}writeValue(e){if(e&&e!==this.ADD_NEW_OPTION_VALUE&&!this.predefinedCategories.includes(e)&&!this.userCustomCategories.includes(e)&&!this.displayCategories.includes(e)){let t=this.displayCategories.indexOf(this.ADD_NEW_OPTION_VALUE);t>-1?this.displayCategories.splice(t,0,e):this.displayCategories.push(e)}this.selectedInternalCategory=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnInit(){this.loadUserCustomCategoriesFromLocalStorage(),this.buildDisplayOptions(),this.initialCategory&&this.selectedInternalCategory===null?this.writeValue(this.initialCategory):this.selectedInternalCategory===null&&(this.selectedInternalCategory=null)}ngOnChanges(e){let t=!1,r=!1;e.predefinedCategories&&(t=!0),e.localStorageKey&&(this.loadUserCustomCategoriesFromLocalStorage(),t=!0),e.initialCategory&&(this.selectedInternalCategory===null||this.selectedInternalCategory===e.initialCategory.previousValue)&&(r=!0),t&&this.buildDisplayOptions(),(t||r)&&(this.selectedInternalCategory===null&&e.initialCategory?this.writeValue(this.initialCategory):this.selectedInternalCategory!==null&&this.writeValue(this.selectedInternalCategory)),this.selectedInternalCategory&&this.selectedInternalCategory!==this.ADD_NEW_OPTION_VALUE&&!this.displayCategories.includes(this.selectedInternalCategory)&&!this.predefinedCategories.includes(this.selectedInternalCategory)&&!this.userCustomCategories.includes(this.selectedInternalCategory)&&(this.writeValue(null),this.onChange(null))}loadUserCustomCategoriesFromLocalStorage(){try{let e=localStorage.getItem(this.localStorageKey);this.userCustomCategories=e?JSON.parse(e):[]}catch(e){console.error(`Error loading categories from localStorage (key: ${this.localStorageKey})`,e),this.userCustomCategories=[]}}saveUserCustomCategoriesToLocalStorage(){try{localStorage.setItem(this.localStorageKey,JSON.stringify(this.userCustomCategories))}catch(e){console.error(`Error saving categories to localStorage (key: ${this.localStorageKey})`,e)}}buildDisplayOptions(){let e=new Set([...this.predefinedCategories,...this.userCustomCategories]);this.displayCategories=Array.from(e).filter(t=>t!==this.ADD_NEW_OPTION_VALUE),this.displayCategories.push(this.ADD_NEW_OPTION_VALUE),this.selectedInternalCategory&&!this.displayCategories.includes(this.selectedInternalCategory)&&(this.selectedInternalCategory,this.ADD_NEW_OPTION_VALUE)}onSelectionChange(e){let t;typeof e=="string"?t=e:t=e.target.value,t==="null"&&(t=null),this.selectedInternalCategory=t,t===this.ADD_NEW_OPTION_VALUE?(this.isCustomInputVisible=!0,this.customCategoryValue="",this.onTouched()):(this.isCustomInputVisible=!1,this.categorySelected.emit(t),this.onChange(t),this.onTouched())}confirmCustomCategory(){let e=this.customCategoryValue.trim();e&&e!==this.ADD_NEW_OPTION_VALUE?(!this.predefinedCategories.includes(e)&&!this.userCustomCategories.includes(e)&&(this.userCustomCategories.push(e),this.saveUserCustomCategoriesToLocalStorage()),this.buildDisplayOptions(),this.selectedInternalCategory=e,this.categorySelected.emit(e),this.onChange(e),this.onTouched(),this.isCustomInputVisible=!1,this.customCategoryValue=""):e||(this.isCustomInputVisible=!1)}cancelCustomCategory(){this.isCustomInputVisible=!1,this.customCategoryValue="",this.selectedInternalCategory===this.ADD_NEW_OPTION_VALUE&&(this.selectedInternalCategory=null,this.onChange(null)),this.onTouched()}get deletableUserCustomCategories(){return this.userCustomCategories.filter(e=>!this.predefinedCategories.includes(e))}deleteUserCustomCategory(e){let t=this.selectedInternalCategory===e;this.userCustomCategories=this.userCustomCategories.filter(r=>r!==e),this.saveUserCustomCategoriesToLocalStorage(),this.buildDisplayOptions(),t&&(this.selectedInternalCategory=null,this.onChange(null)),this.onTouched()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-category-selector"]],inputs:{predefinedCategories:"predefinedCategories",initialCategory:"initialCategory",placeholder:"placeholder",addNewOptionText:"addNewOptionText",localStorageKey:"localStorageKey"},outputs:{categorySelected:"categorySelected"},features:[Nt([{provide:yr,useExisting:gt(()=>n),multi:!0}]),dn],decls:6,vars:6,consts:[[1,"category-selector-container"],["aria-label","\u985E\u5225\u9078\u64C7\u5668",1,"category-select",3,"ngModelChange","blur","ngModel","disabled"],["disabled","","selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","custom-management-section",4,"ngIf"],[3,"value"],[1,"custom-management-section"],[1,"custom-input-area"],["type","text","placeholder","\u8F38\u5165\u65B0\u985E\u5225\u540D\u7A31","aria-label","\u81EA\u5B9A\u7FA9\u985E\u5225\u540D\u7A31",1,"custom-category-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],["type","button",1,"custom-category-button","confirm",3,"click","disabled"],["type","button",1,"custom-category-button","cancel",3,"click","disabled"],["class","deletable-categories-area",4,"ngIf"],[1,"deletable-categories-area"],[1,"deletable-title"],["class","deletable-item",4,"ngFor","ngForOf"],[1,"deletable-item"],["type","button",1,"delete-custom-button",3,"click","disabled","title"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"select",1),H("ngModelChange",function(o){return r.onSelectionChange(o)})("blur",function(){return r.onTouched()}),x(2,"option",2),F(3),N(),we(4,fk,2,2,"option",3),N(),we(5,mk,8,5,"div",4),N()),t&2&&(V(),U("ngModel",r.selectedInternalCategory)("disabled",r.isDisabled),V(),U("ngValue",null),V(),it(r.placeholder),V(),U("ngForOf",r.displayCategories),V(),U("ngIf",r.isCustomInputVisible))},dependencies:[at,gn,yt,vr,_l,vl,mn,yo,_r,ci],styles:[".category-selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-family:sans-serif}.category-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:4px;background-color:#fff;font-size:1rem;width:100%;box-sizing:border-box}select[_ngcontent-%COMP%]   option[disabled][_ngcontent-%COMP%]{color:#999}.custom-management-section[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:10px;border-radius:4px;background-color:#f9f9f9;display:flex;flex-direction:column;gap:15px}.custom-input-area[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.custom-category-input[_ngcontent-%COMP%]{flex-grow:1;padding:8px 12px;border:1px solid #ccc;border-radius:4px;font-size:1rem;box-sizing:border-box}.custom-category-button[_ngcontent-%COMP%]{padding:8px 15px;border:none;border-radius:4px;cursor:pointer;font-size:.9rem;transition:background-color .2s ease;flex-shrink:0}.custom-category-button.confirm[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custom-category-button.confirm[_ngcontent-%COMP%]:hover{background-color:#45a049}.custom-category-button.cancel[_ngcontent-%COMP%]{background-color:#aaa;color:#fff}.custom-category-button.cancel[_ngcontent-%COMP%]:hover{background-color:#888}.deletable-categories-area[_ngcontent-%COMP%]{margin-top:10px}.deletable-title[_ngcontent-%COMP%]{font-size:.9em;color:#555;margin-bottom:5px;font-weight:700}.deletable-categories-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:150px;overflow-y:auto;border:1px solid #eee;border-radius:3px}.deletable-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;font-size:.95em;border-bottom:1px solid #f0f0f0}.deletable-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.deletable-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333}.delete-custom-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f44336;font-size:1.2em;line-height:1;padding:2px 5px;cursor:pointer;border-radius:50%}.delete-custom-button[_ngcontent-%COMP%]:hover{background-color:#ffebee;color:#c62828}"]})};var yk=()=>["\u82F1\u6587","\u7A0B\u5F0F"];function _k(n,e){n&1&&(x(0,"div",11),F(1," \u984C\u76EE\u70BA\u5FC5\u586B\u9805\u76EE "),N())}function vk(n,e){n&1&&(x(0,"div",11),F(1," \u7B54\u6848\u70BA\u5FC5\u586B\u9805\u76EE "),N())}function Ik(n,e){n&1&&(x(0,"div",11),F(1," \u985E\u5225\u70BA\u5FC5\u586B\u9805\u76EE "),N())}var wl=class n{constructor(e){this.fb=e;this.cardForm=this.fb.group({question:["",fo.required],answer:["",fo.required],category:["",fo.required]})}cardToEdit=null;formSubmitted=new be;cancel=new be;cardForm;isEditing=!1;ngOnInit(){this.updateForm()}ngOnChanges(e){e.cardToEdit&&this.updateForm()}updateForm(){this.cardToEdit?(this.isEditing=!0,this.cardForm.patchValue({question:this.cardToEdit.question,answer:this.cardToEdit.answer,category:this.cardToEdit.category})):(this.isEditing=!1,this.cardForm.reset())}onSubmit(){if(this.cardForm.valid){let e=this.cardForm.value;if(this.isEditing&&this.cardToEdit){let t=pe(te({},this.cardToEdit),{question:e.question,answer:e.answer,category:e.category});this.formSubmitted.emit(t)}else this.formSubmitted.emit(e)}}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)(j(RD))};static \u0275cmp=wt({type:n,selectors:[["app-flashcard-form"]],inputs:{cardToEdit:"cardToEdit"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},features:[dn],decls:21,vars:8,consts:[[3,"ngSubmit","formGroup"],["for","question"],["id","question","formControlName","question","rows","3"],["class","error",4,"ngIf"],["for","answer"],["id","answer","formControlName","answer","rows","3"],["for","category"],["id","category-selector","formControlName","category","localStorageKey","myAppFormCategories","placeholder","\u9078\u64C7\u5361\u7247\u985E\u5225",3,"predefinedCategories"],[1,"form-actions"],["type","submit",3,"disabled"],["type","button",3,"click"],[1,"error"]],template:function(t,r){if(t&1&&(x(0,"form",0),H("ngSubmit",function(){return r.onSubmit()}),x(1,"div")(2,"label",1),F(3,"\u984C\u76EE:"),N(),Zt(4,"textarea",2),we(5,_k,2,0,"div",3),N(),x(6,"div")(7,"label",4),F(8,"\u7B54\u6848:"),N(),Zt(9,"textarea",5),we(10,vk,2,0,"div",3),N(),x(11,"div")(12,"label",6),F(13,"\u985E\u5225:"),N(),Zt(14,"app-category-selector",7),we(15,Ik,2,0,"div",3),N(),x(16,"div",8)(17,"button",9),F(18),N(),x(19,"button",10),H("click",function(){return r.onCancel()}),F(20,"\u53D6\u6D88"),N()()()),t&2){let i,o,s;U("formGroup",r.cardForm),V(5),U("ngIf",((i=r.cardForm.get("question"))==null?null:i.invalid)&&((i=r.cardForm.get("question"))==null?null:i.touched)),V(5),U("ngIf",((o=r.cardForm.get("answer"))==null?null:o.invalid)&&((o=r.cardForm.get("answer"))==null?null:o.touched)),V(4),U("predefinedCategories",_C(7,yk)),V(),U("ngIf",((s=r.cardForm.get("category"))==null?null:s.invalid)&&((s=r.cardForm.get("category"))==null?null:s.touched)),V(2),U("disabled",r.cardForm.invalid),V(),ot(" ",r.isEditing?"\u66F4\u65B0\u5361\u7247":"\u65B0\u589E\u5361\u7247"," ")}},dependencies:[at,yt,PD,yl,mn,_r,pl,_g,vg,El],styles:["form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:700}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#6c757d}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})};function Ek(n,e){if(n&1){let t=Be();x(0,"tr")(1,"td"),F(2),N(),x(3,"td"),F(4),N(),x(5,"td"),F(6),N(),x(7,"td"),F(8),Ln(9,"date"),N(),x(10,"td"),F(11),N(),x(12,"td"),F(13),N(),x(14,"td")(15,"button",3),H("click",function(){let i=ue(t).$implicit,o=z(2);return le(o.onEdit(i))}),F(16,"\u7DE8\u8F2F"),N(),x(17,"button",3),H("click",function(){let i=ue(t).$implicit,o=z(2);return le(o.onDelete(i.id))}),F(18,"\u522A\u9664"),N()()()}if(n&2){let t=e.$implicit;V(2),it(t.question),V(2),it(t.answer),V(2),it(t.category||"\u672A\u5206\u985E"),V(2),it(t.lastAnsweredTime?Lu(9,6,t.lastAnsweredTime,"yyyy/MM/dd HH:mm"):"\u672A\u56DE\u7B54"),V(3),it(t.answerCount),V(2),it(t.score)}}function wk(n,e){if(n&1&&(x(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),F(5,"\u984C\u76EE"),N(),x(6,"th"),F(7,"\u7B54\u6848"),N(),x(8,"th"),F(9,"\u985E\u5225"),N(),x(10,"th"),F(11,"\u4E0A\u6B21\u56DE\u7B54"),N(),x(12,"th"),F(13,"\u6B21\u6578"),N(),x(14,"th"),F(15,"\u5206\u6578"),N(),x(16,"th"),F(17,"\u64CD\u4F5C"),N()()(),x(18,"tbody"),we(19,Ek,19,9,"tr",2),N()()()),n&2){let t=z();V(19),U("ngForOf",t.flashcards)}}function Ck(n,e){n&1&&(x(0,"p"),F(1,"\u76EE\u524D\u6C92\u6709\u55AE\u5B57\u5361\u3002"),N())}var Cl=class n{flashcards=[];editCard=new be;deleteCard=new be;constructor(){}onEdit(e){this.editCard.emit(e)}onDelete(e){confirm("\u78BA\u5B9A\u8981\u522A\u9664\u9019\u5F35\u5361\u7247\u55CE?")&&this.deleteCard.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-flashcard-list"]],inputs:{flashcards:"flashcards"},outputs:{editCard:"editCard",deleteCard:"deleteCard"},decls:3,vars:2,consts:[["noCards",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){if(t&1&&we(0,wk,20,1,"div",1)(1,Ck,2,0,"ng-template",null,0,Bu),t&2){let i=Vu(2);U("ngIf",r.flashcards&&r.flashcards.length>0)("ngIfElse",i)}},dependencies:[at,gn,yt,Kp],encapsulation:2})};var vo=class n{synth;voices=[];selectedVoiceURI=null;volume=1;constructor(){this.synth=window.speechSynthesis,this.loadVoices(),this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>this.loadVoices())}loadVoices(){this.voices=this.synth.getVoices();let e=localStorage.getItem("tts_voiceURI");if(e&&this.voices.find(r=>r.voiceURI===e))this.selectedVoiceURI=e;else if(this.voices.length>0){let r=this.voices.find(i=>i.lang.startsWith("en")||i.lang.startsWith("zh"))||this.voices[0];this.selectedVoiceURI=r.voiceURI}let t=localStorage.getItem("tts_volume");t&&(this.volume=parseFloat(t))}getVoices(){return this.voices}setVoice(e){this.voices.find(t=>t.voiceURI===e)&&(this.selectedVoiceURI=e,localStorage.setItem("tts_voiceURI",e))}getSelectedVoiceURI(){return this.selectedVoiceURI}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),localStorage.setItem("tts_volume",this.volume.toString())}getVolume(){return this.volume}speak(e){if(this.synth.speaking){console.error("SpeechSynthesis.speaking"),this.synth.cancel(),setTimeout(()=>this.doSpeak(e),100);return}this.doSpeak(e)}doSpeak(e){let t=new SpeechSynthesisUtterance(e);if(t.onend=()=>{},t.onerror=r=>{console.error("SpeechSynthesisUtterance.onerror",r)},this.selectedVoiceURI){let r=this.voices.find(i=>i.voiceURI===this.selectedVoiceURI);r&&(t.voice=r)}t.volume=this.volume,this.synth.speak(t)}cancel(){this.synth.cancel()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Dk(n,e){n&1&&(x(0,"option",11),F(1,"\u6B63\u5728\u8F09\u5165\u8A9E\u97F3..."),N())}function bk(n,e){if(n&1&&(x(0,"option",12),F(1),N()),n&2){let t=e.$implicit;U("value",t.voiceURI),V(),kp(" ",t.name," (",t.lang,") ")}}var Dl=class n{constructor(e){this.ttsService=e}closeModal=new be;voices=[];selectedVoiceURI=null;volume=1;ngOnInit(){this.voices=this.ttsService.getVoices(),this.selectedVoiceURI=this.ttsService.getSelectedVoiceURI(),this.volume=this.ttsService.getVolume(),this.voices.length===0&&typeof window<"u"&&window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{if(this.voices=this.ttsService.getVoices(),!this.selectedVoiceURI&&this.voices.length>0){let e=this.voices.find(t=>t.lang.startsWith("en")||t.lang.startsWith("zh"))||this.voices[0];e&&(this.selectedVoiceURI=e.voiceURI,this.ttsService.getSelectedVoiceURI()===null&&this.ttsService.setVoice(this.selectedVoiceURI))}})}testVoice(){this.ttsService.speak("\u4F60\u597D\uFF0C\u9019\u662F\u4E00\u500B\u8A9E\u97F3\u6E2C\u8A66\u3002")}onClose(){this.closeModal.emit()}static \u0275fac=function(t){return new(t||n)(j(vo))};static \u0275cmp=wt({type:n,selectors:[["app-tts-settings-modal"]],outputs:{closeModal:"closeModal"},decls:20,vars:8,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"form-group"],["for","voice-select"],["id","voice-select",3,"ngModelChange","ngModel"],["disabled","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["for","volume-slider"],["type","range","id","volume-slider","min","0","max","1","step","0.05",3,"ngModelChange","ngModel"],[1,"modal-actions"],[3,"click"],["disabled",""],[3,"value"]],template:function(t,r){t&1&&(x(0,"div",0),H("click",function(){return r.onClose()}),x(1,"div",1),H("click",function(o){return o.stopPropagation()}),x(2,"h3"),F(3,"\u8A9E\u97F3\u8A2D\u5B9A"),N(),x(4,"div",2)(5,"label",3),F(6,"\u9078\u64C7\u8072\u97F3 (\u570B\u7C4D/\u8A9E\u8A00):"),N(),x(7,"select",4),Vn("ngModelChange",function(o){return pr(r.selectedVoiceURI,o)||(r.selectedVoiceURI=o),o}),H("ngModelChange",function(){return r.selectedVoiceURI&&r.ttsService.setVoice(r.selectedVoiceURI)}),we(8,Dk,2,0,"option",5)(9,bk,2,3,"option",6),N()(),x(10,"div",2)(11,"label",7),F(12),Ln(13,"number"),N(),x(14,"input",8),Vn("ngModelChange",function(o){return pr(r.volume,o)||(r.volume=o),o}),H("ngModelChange",function(o){return r.ttsService.setVolume(o)}),N()(),x(15,"div",9)(16,"button",10),H("click",function(){return r.testVoice()}),F(17,"\u6E2C\u8A66\u8A9E\u97F3"),N(),x(18,"button",10),H("click",function(){return r.onClose()}),F(19,"\u95DC\u9589"),N()()()()),t&2&&(V(7),Fn("ngModel",r.selectedVoiceURI),V(),U("ngIf",r.voices.length===0),V(),U("ngForOf",r.voices),V(3),ot("\u97F3\u91CF: ",Lu(13,5,r.volume*100,"1.0-0"),"%"),V(2),Fn("ngModel",r.volume))},dependencies:[at,gn,yt,Qp,vr,_l,vl,mn,yg,yo,_r,ci],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0000001a;min-width:300px;max-width:500px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box}.modal-actions[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})};var Ir=class n{localStorageKey="flashcards";flashcardsSubject=new or(this.loadFlashcards());flashcards$=this.flashcardsSubject.asObservable();constructor(){this.updateCategoryCache()}loadFlashcards(){let e=localStorage.getItem(this.localStorageKey);return e?JSON.parse(e).map(t=>pe(te({},t),{lastAnsweredTime:t.lastAnsweredTime?new Date(t.lastAnsweredTime):null})):[]}saveFlashcards(e){localStorage.setItem(this.localStorageKey,JSON.stringify(e)),this.flashcardsSubject.next(this.parseDates(e))}generateId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}parseDates(e){return e.map(t=>pe(te({},t),{lastAnsweredTime:t.lastAnsweredTime?new Date(t.lastAnsweredTime):null}))}getFlashcards(){return this.flashcardsSubject.value}getFlashcardById(e){return this.getFlashcards().find(t=>t.id===e)}addFlashcard(e){let t=pe(te({},e),{id:this.generateId(),category:e.category,lastAnsweredTime:null,answerCount:0,score:0}),r=this.getFlashcards();this.saveFlashcards([...r,t])}updateFlashcard(e){let t=this.getFlashcards();t=t.map(r=>r.id===e.id?e:r),this.saveFlashcards(t)}deleteFlashcard(e){let t=this.getFlashcards();t=t.filter(r=>r.id!==e),this.saveFlashcards(t)}replaceAllFlashcards(e){let t=e.map(r=>{let i=null;return r.lastAnsweredTime&&(r.lastAnsweredTime.toDate?i=r.lastAnsweredTime.toDate():typeof r.lastAnsweredTime=="string"||typeof r.lastAnsweredTime=="number"?i=new Date(r.lastAnsweredTime):i=r.lastAnsweredTime),pe(te({},r),{lastAnsweredTime:i})});this.saveFlashcards(t)}cachedCategories=[];updateCategoryCache(){this.getAllCategories().subscribe(e=>{this.cachedCategories=e})}getNextCardToReview(){let e=this.cachedCategories,t=this.getFlashcards().filter(r=>e.includes(r.category));if(t.length!==0)return t.sort((r,i)=>{let o=r.lastAnsweredTime?r.lastAnsweredTime.getTime():-1/0,s=i.lastAnsweredTime?i.lastAnsweredTime.getTime():-1/0;return o!==s?o-s:r.answerCount!==i.answerCount?r.answerCount-i.answerCount:r.score-i.score}),t[0]}answerCard(e,t){let r=this.getFlashcardById(e);r&&(r.lastAnsweredTime=new Date,r.answerCount++,t?r.score+=1:r.score=Math.max(0,r.score-2),this.updateFlashcard(r))}selectedCategoriesKey="selectedFlashcardCategories";selectedCategoriesSubject=new or(this.loadSelectedCategories());allFlashcards$=this.flashcardsSubject.asObservable();selectedCategories$=this.selectedCategoriesSubject.asObservable();loadSelectedCategories(){let e=localStorage.getItem(this.selectedCategoriesKey);return e?JSON.parse(e):[]}setSelectedCategories(e){localStorage.setItem(this.selectedCategoriesKey,JSON.stringify(e)),console.log("categories",e),this.selectedCategoriesSubject.next(e)}getAllCategories(){return this.allFlashcards$.pipe(rn(e=>{let t=new Set;return e.forEach(r=>t.add(r.category)),Array.from(t).sort()}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tk(n,e){if(n&1){let t=Be();x(0,"label",18)(1,"input",19),H("ngModelChange",function(){ue(t);let i=z(3);return le(i.onCategorySelectionChange())}),N(),F(2),N()}if(n&2){let t=e.$implicit,r=z(3);V(),U("checked",r.selectedCategories.includes(t)),V(),ot(" ",t," ")}}function Sk(n,e){n&1&&(x(0,"p",20),F(1," \u76EE\u524D\u6C92\u6709\u4EFB\u4F55\u5361\u7247\u6216\u985E\u5225\u3002\u8ACB\u5148\u65B0\u589E\u4E00\u4E9B\u5361\u7247\u3002 "),N())}function Ak(n,e){if(n&1&&(Rp(0),we(1,Tk,3,2,"label",16)(2,Sk,2,0,"p",17),Pp()),n&2){let t=e.ngIf;V(),U("ngForOf",t),V(),U("ngIf",t.length===0)}}function Mk(n,e){if(n&1&&(x(0,"small",21),F(1),N()),n&2){let t=z(2);V(),ot("\u985E\u5225: ",t.currentCard.category,"")}}function Nk(n,e){if(n&1){let t=Be();x(0,"button",22),H("click",function(){ue(t);let i=z(2);return le(i.revealAnswer())}),F(1,"\u986F\u793A\u7B54\u6848"),N()}}function xk(n,e){if(n&1){let t=Be();x(0,"div",23)(1,"h3"),F(2,"\u7B54\u6848:"),N(),x(3,"p"),F(4),N(),x(5,"button",24),H("click",function(){ue(t);let i=z(2);return le(i.speakAnswer())}),F(6,"\u{1F50A} \u5FF5\u7B54\u6848"),N(),x(7,"button",25),H("click",function(){ue(t);let i=z(2);return le(i.openTtsSettings())}),F(8,"\u2699\uFE0F \u8A9E\u97F3\u8A2D\u5B9A"),N()()}if(n&2){let t=z(2);V(4),it(t.currentCard.answer)}}function Rk(n,e){if(n&1){let t=Be();x(0,"div",26)(1,"button",27),H("click",function(){ue(t);let i=z(2);return le(i.answer(!0))}),F(2,"\u6211\u6703\u4E86 \u{1F44D}"),N(),x(3,"button",28),H("click",function(){ue(t);let i=z(2);return le(i.answer(!1))}),F(4,"\u6211\u4E0D\u6703 \u{1F44E}"),N()()}}function Pk(n,e){if(n&1){let t=Be();x(0,"button",29),H("click",function(){ue(t);let i=z(2);return le(i.drawNextCard())}),F(1," \u8DF3\u904E / \u62BD\u4E0B\u4E00\u5F35 "),N()}}function Ok(n,e){if(n&1){let t=Be();x(0,"div",3)(1,"h2"),F(2,"\u8907\u7FD2\u55AE\u5B57\u5361"),N(),x(3,"div",4)(4,"h4"),F(5,"\u7BE9\u9078\u985E\u5225:"),N(),x(6,"div",5)(7,"label",6)(8,"input",7),Ln(9,"async"),H("change",function(i){ue(t);let o=z();return le(o.toggleSelectAllCategories(i))}),N(),F(10," \u5168\u9078/\u5168\u4E0D\u9078 "),N(),we(11,Ak,3,2,"ng-container",8),Ln(12,"async"),N()(),Zt(13,"hr"),x(14,"div",9)(15,"div",10)(16,"h3"),F(17,"\u984C\u76EE:"),N(),we(18,Mk,2,1,"small",11),x(19,"p"),F(20),N()(),we(21,Nk,2,0,"button",12)(22,xk,9,1,"div",13),N(),we(23,Rk,5,0,"div",14)(24,Pk,2,0,"button",15),N()}if(n&2){let t,r=z();V(8),U("checked",r.areAllCategoriesSelected())("disabled",((t=Vs(9,9,r.allCategories$))==null?null:t.length)===0),V(3),U("ngIf",Vs(12,11,r.allCategories$)),V(7),U("ngIf",r.currentCard.category),V(2),it(r.currentCard.question),V(),U("ngIf",!r.showAnswer),V(),U("ngIf",r.showAnswer),V(),U("ngIf",r.showAnswer),V(),U("ngIf",!r.showAnswer)}}function kk(n,e){n&1&&(x(0,"p"),F(1,"\u592A\u68D2\u4E86\uFF01\u76EE\u524D\u6C92\u6709\u9700\u8981\u8907\u7FD2\u7684\u5361\u7247\uFF0C\u6216\u8005\u4F60\u9084\u6C92\u6709\u65B0\u589E\u4EFB\u4F55\u5361\u7247\u3002"),N())}function Fk(n,e){if(n&1){let t=Be();x(0,"app-tts-settings-modal",30),H("closeModal",function(){ue(t);let i=z();return le(i.closeTtsSettings())}),N()}}var bl=class n{constructor(e,t){this.flashcardService=e;this.ttsService=t;this.allCategories$=this.flashcardService.getAllCategories()}currentCard=void 0;showAnswer=!1;isTtsSettingsModalOpen=!1;allCategories$=Hh([]);selectedCategories=[];ngOnInit(){this.flashcardService.selectedCategories$.subscribe(e=>{this.selectedCategories=[...e||[]]}),this.drawNextCard()}drawNextCard(){this.currentCard=this.flashcardService.getNextCardToReview(),this.showAnswer=!1}revealAnswer(){this.showAnswer=!0}speakAnswer(){this.currentCard&&this.currentCard.answer&&this.ttsService.speak(this.currentCard.answer)}answer(e){this.currentCard&&(this.flashcardService.answerCard(this.currentCard.id,e),this.drawNextCard())}openTtsSettings(){this.isTtsSettingsModalOpen=!0}closeTtsSettings(){this.isTtsSettingsModalOpen=!1}onCategorySelectionChange(){console.log("onCategorySelectionChange",this.selectedCategories),this.flashcardService.setSelectedCategories(this.selectedCategories),this.drawNextCard()}toggleSelectAllCategories(e){e.target.checked?this.allCategories$.subscribe(r=>{this.selectedCategories=[...r],this.onCategorySelectionChange()}).unsubscribe():(this.selectedCategories=[],this.onCategorySelectionChange())}areAllCategoriesSelected(){let e=0;return this.allCategories$.subscribe(t=>e=t.length).unsubscribe(),e>0&&this.selectedCategories.length===e}static \u0275fac=function(t){return new(t||n)(j(Ir),j(vo))};static \u0275cmp=wt({type:n,selectors:[["app-flashcard-review"]],decls:4,vars:3,consts:[["noCardsToReview",""],["class","review-container",4,"ngIf","ngIfElse"],[3,"closeModal",4,"ngIf"],[1,"review-container"],[1,"category-filter"],[1,"category-options"],[1,"category-option","select-all-label"],["type","checkbox",3,"change","checked","disabled"],[4,"ngIf"],[1,"card"],[1,"card-question"],["class","card-category-badge",4,"ngIf"],[3,"click",4,"ngIf"],["class","card-answer",4,"ngIf"],["class","answer-actions",4,"ngIf"],["class","next-card-btn",3,"click",4,"ngIf"],["class","category-option",4,"ngFor","ngForOf"],["class","no-categories-message",4,"ngIf"],[1,"category-option"],["type","checkbox",3,"ngModelChange","checked"],[1,"no-categories-message"],[1,"card-category-badge"],[3,"click"],[1,"card-answer"],["title","\u5FF5\u51FA\u7B54\u6848",3,"click"],["title","\u8A9E\u97F3\u8A2D\u5B9A",3,"click"],[1,"answer-actions"],[1,"know-btn",3,"click"],[1,"dont-know-btn",3,"click"],[1,"next-card-btn",3,"click"],[3,"closeModal"]],template:function(t,r){if(t&1&&we(0,Ok,25,13,"div",1)(1,kk,2,0,"ng-template",null,0,Bu)(3,Fk,1,0,"app-tts-settings-modal",2),t&2){let i=Vu(2);U("ngIf",r.currentCard)("ngIfElse",i),V(3),U("ngIf",r.isTtsSettingsModalOpen)}},dependencies:[at,gn,yt,qs,vr,Dl],styles:[".review-container[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:8px;padding:20px;margin:20px auto;max-width:500px;background-color:#fff;box-shadow:0 2px 4px #0000001a}.card-question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .card-answer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#555}.card-question[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .card-answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;min-height:40px}.card-answer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.answer-actions[_ngcontent-%COMP%]{margin-top:20px}.answer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1em;margin:0 10px}.know-btn[_ngcontent-%COMP%]{background-color:#28a745}.know-btn[_ngcontent-%COMP%]:hover{background-color:#218838}.dont-know-btn[_ngcontent-%COMP%]{background-color:#dc3545}.dont-know-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.next-card-btn[_ngcontent-%COMP%]{margin-top:1rem;background-color:#ffc107;color:#212529}.next-card-btn[_ngcontent-%COMP%]:hover{background-color:#e0a800}.category-filter[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;background-color:#f9f9f9;border-radius:8px;border:1px solid #eee}.category-filter[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;color:#333}.category-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.category-option[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:5px 10px;background-color:#fff;border:1px solid #ddd;border-radius:20px;cursor:pointer;transition:background-color .2s,color .2s;font-size:.9em}.category-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:5px;cursor:pointer}.category-option[_ngcontent-%COMP%]:has(input:checked){background-color:#007bff;color:#fff;border-color:#007bff}.select-all-label[_ngcontent-%COMP%]{font-weight:700}.no-categories-message[_ngcontent-%COMP%]{width:100%;text-align:center;color:#777;font-style:italic}.card-category-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e9ecef;color:#495057;padding:.25em .5em;font-size:.75em;border-radius:.25rem;margin-top:8px}hr[_ngcontent-%COMP%]{border:0;height:1px;background-color:#eee;margin:20px 0}"]})};var VD=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Vk=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},LD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=o>>2,g=(o&3)<<4|c>>4,y=(c&15)<<2|d>>6,m=d&63;u||(m=64,s||(y=64)),r.push(t[f],t[g],t[y],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Vk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new Cg;let y=o<<2|c>>4;if(r.push(y),d!==64){let m=c<<4&240|d>>2;if(r.push(m),g!==64){let S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Cg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Lk=function(n){let e=VD(n);return LD.encodeByteArray(e,!0)},ra=function(n){return Lk(n).replace(/\./g,"")},bg=function(n){try{return LD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Bk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Uk=()=>Bk().__FIREBASE_DEFAULTS__,jk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$k=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&bg(n[1]);return e&&JSON.parse(e)},Sl=()=>{try{return Uk()||jk()||$k()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Tg=n=>{var e,t;return(t=(e=Sl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},BD=n=>{let e=Tg(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Sg=()=>{var n;return(n=Sl())===null||n===void 0?void 0:n.config},Ag=n=>{var e;return(e=Sl())===null||e===void 0?void 0:e[`_${n}`]};var Tl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function UD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ra(JSON.stringify(t)),ra(JSON.stringify(s)),""].join(".")}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function Hk(){var n;let e=(n=Sl())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $D(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HD(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zD(){let n=Qe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GD(){return!Hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mg(){try{return typeof indexedDB=="object"}catch{return!1}}function WD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var qk="FirebaseError",xt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qk,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jn.prototype.create)}},jn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?zk(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new xt(i,c,r)}};function zk(n,e){return n.replace(Gk,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Gk=/\{\$([^}]+)}/g;function KD(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ui(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(FD(o)&&FD(s)){if(!ui(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function FD(n){return n!==null&&typeof n=="object"}function ia(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Io(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Eo(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function QD(n,e){let t=new Dg(n,e);return t.subscribe.bind(t)}var Dg=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Wk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wg),i.error===void 0&&(i.error=wg),i.complete===void 0&&(i.complete=wg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Wk(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wg(){}var h3=4*60*60*1e3;function Ue(n){return n&&n._delegate?n._delegate:n}var jt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var li="[DEFAULT]";var Ng=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Tl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qk(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Kk(n){return n===li?void 0:n}function Qk(n){return n.instantiationMode==="EAGER"}var Al=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ng(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Yk=[],oe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(oe||{}),Zk={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},Jk=oe.INFO,Xk={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},e1=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Xk[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Er=class{constructor(e){this.name=e,this._logLevel=Jk,this._logHandler=e1,this._userLogHandler=null,Yk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var t1=(n,e)=>e.some(t=>n instanceof t),YD,ZD;function n1(){return YD||(YD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r1(){return ZD||(ZD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var JD=new WeakMap,Rg=new WeakMap,XD=new WeakMap,xg=new WeakMap,Og=new WeakMap;function i1(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(yn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&JD.set(t,n)}).catch(()=>{}),Og.set(e,n),e}function o1(n){if(Rg.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Rg.set(n,e)}var Pg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function e0(n){Pg=n(Pg)}function s1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ml(this),e,...t);return XD.set(r,e.sort?e.sort():[e]),yn(r)}:r1().includes(n)?function(...e){return n.apply(Ml(this),e),yn(JD.get(this))}:function(...e){return yn(n.apply(Ml(this),e))}}function a1(n){return typeof n=="function"?s1(n):(n instanceof IDBTransaction&&o1(n),t1(n,n1())?new Proxy(n,Pg):n)}function yn(n){if(n instanceof IDBRequest)return i1(n);if(xg.has(n))return xg.get(n);let e=a1(n);return e!==n&&(xg.set(n,e),Og.set(e,n)),e}var Ml=n=>Og.get(n);function n0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=yn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(yn(s.result),u.oldVersion,u.newVersion,yn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var c1=["get","getKey","getAll","getAllKeys","count"],u1=["put","add","delete","clear"],kg=new Map;function t0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kg.get(e))return kg.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=u1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||c1.includes(t)))return;let o=function(s,...c){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return kg.set(e,o),o}e0(n=>pe(te({},n),{get:(e,t,r)=>t0(e,t)||n.get(e,t,r),has:(e,t)=>!!t0(e,t)||n.has(e,t)}));var Vg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(l1(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function l1(n){let e=n.getComponent();return e?.type==="VERSION"}var Lg="@firebase/app",r0="0.10.13";var $n=new Er("@firebase/app"),d1="@firebase/app-compat",h1="@firebase/analytics-compat",f1="@firebase/analytics",p1="@firebase/app-check-compat",g1="@firebase/app-check",m1="@firebase/auth",y1="@firebase/auth-compat",_1="@firebase/database",v1="@firebase/data-connect",I1="@firebase/database-compat",E1="@firebase/functions",w1="@firebase/functions-compat",C1="@firebase/installations",D1="@firebase/installations-compat",b1="@firebase/messaging",T1="@firebase/messaging-compat",S1="@firebase/performance",A1="@firebase/performance-compat",M1="@firebase/remote-config",N1="@firebase/remote-config-compat",x1="@firebase/storage",R1="@firebase/storage-compat",P1="@firebase/firestore",O1="@firebase/vertexai-preview",k1="@firebase/firestore-compat",F1="firebase",V1="10.14.1";var Bg="[DEFAULT]",L1={[Lg]:"fire-core",[d1]:"fire-core-compat",[f1]:"fire-analytics",[h1]:"fire-analytics-compat",[g1]:"fire-app-check",[p1]:"fire-app-check-compat",[m1]:"fire-auth",[y1]:"fire-auth-compat",[_1]:"fire-rtdb",[v1]:"fire-data-connect",[I1]:"fire-rtdb-compat",[E1]:"fire-fn",[w1]:"fire-fn-compat",[C1]:"fire-iid",[D1]:"fire-iid-compat",[b1]:"fire-fcm",[T1]:"fire-fcm-compat",[S1]:"fire-perf",[A1]:"fire-perf-compat",[M1]:"fire-rc",[N1]:"fire-rc-compat",[x1]:"fire-gcs",[R1]:"fire-gcs-compat",[P1]:"fire-fst",[k1]:"fire-fst-compat",[O1]:"fire-vertex","fire-js":"fire-js",[F1]:"fire-js-all"};var oa=new Map,B1=new Map,Ug=new Map;function i0(n,e){try{n.container.addComponent(e)}catch(t){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cr(n){let e=n.name;if(Ug.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;Ug.set(e,n);for(let t of oa.values())i0(t,n);for(let t of B1.values())i0(t,n);return!0}function aa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xt(n){return n.settings!==void 0}var U1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new jn("app","Firebase",U1);var jg=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}};var Dr=V1;function qg(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Bg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wr.create("bad-app-name",{appName:String(i)});if(t||(t=Sg()),!t)throw wr.create("no-options");let o=oa.get(i);if(o){if(ui(t,o.options)&&ui(r,o.config))return o;throw wr.create("duplicate-app",{appName:i})}let s=new Al(i);for(let u of Ug.values())s.addComponent(u);let c=new jg(t,r,s);return oa.set(i,c),c}function wo(n=Bg){let e=oa.get(n);if(!e&&n===Bg&&Sg())return qg();if(!e)throw wr.create("no-app",{appName:n});return e}function Nl(){return Array.from(oa.values())}function Ge(n,e,t){var r;let i=(r=L1[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(c.join(" "));return}Cr(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var j1="firebase-heartbeat-database",$1=1,sa="firebase-heartbeat-store",Fg=null;function c0(){return Fg||(Fg=n0(j1,$1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sa)}catch(t){console.warn(t)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),Fg}function H1(n){return v(this,null,function*(){try{let t=(yield c0()).transaction(sa),r=yield t.objectStore(sa).get(u0(n));return yield t.done,r}catch(e){if(e instanceof xt)$n.warn(e.message);else{let t=wr.create("idb-get",{originalErrorMessage:e?.message});$n.warn(t.message)}}})}function o0(n,e){return v(this,null,function*(){try{let r=(yield c0()).transaction(sa,"readwrite");yield r.objectStore(sa).put(e,u0(n)),yield r.done}catch(t){if(t instanceof xt)$n.warn(t.message);else{let r=wr.create("idb-set",{originalErrorMessage:t?.message});$n.warn(r.message)}}})}function u0(n){return`${n.name}!${n.options.appId}`}var q1=1024,z1=30*24*60*60*1e3,$g=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Hg(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=s0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let c=new Date(s.date).valueOf();return Date.now()-c<=z1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$n.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=s0(),{heartbeatsToSend:r,unsentEntries:i}=G1(this._heartbeatsCache.heartbeats),o=ra(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return $n.warn(t),""}})}};function s0(){return new Date().toISOString().substring(0,10)}function G1(n,e=q1){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),a0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),a0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Hg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Mg()?WD().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield H1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return o0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return o0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function a0(n){return ra(JSON.stringify({version:2,heartbeats:n})).length}function W1(n){Cr(new jt("platform-logger",e=>new Vg(e),"PRIVATE")),Cr(new jt("heartbeat",e=>new $g(e),"PRIVATE")),Ge(Lg,r0,n),Ge(Lg,r0,"esm2017"),Ge("fire-js","")}W1("");var K1="firebase",Q1="10.14.1";Ge(K1,Q1,"app");var hi=new eo("ANGULARFIRE2_VERSION");function Rl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ca=(n,e)=>{let t=e?[e]:Nl(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Do=class{constructor(){return ca(Y1)}},Y1="app-check";function Co(){}var xl=class{zone;delegate;constructor(e,t=jh){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},zg=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Co,{},Co,Co)),t.pipe(zh({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xl(Zone.current)),this.insideAngular=t.run(()=>new xl(Zone.current,Uh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(me(xe))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pl(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Z1(n){return Pl().ngZone.runOutsideAngular(()=>n())}function di(n){return Pl().ngZone.run(()=>n())}function J1(n){return X1(Pl())(n)}function X1(n){return function(t){return t=t.lift(new zg(n.ngZone)),t.pipe(cr(n.outsideAngular),ar(n.insideAngular))}}var eF=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),di(()=>n.apply(void 0,r))},_t=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=di(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Co,{},Co,Co))),r[o]=eF(r[o],t));let i=Z1(()=>n.apply(this,r));if(!e)if(i instanceof Oe){let o=Pl();return i.pipe(cr(o.outsideAngular),ar(o.insideAngular))}else return di(()=>i);return i instanceof Oe?i.pipe(J1):i instanceof Promise?di(()=>new Promise((o,s)=>i.then(c=>di(()=>o(c)),c=>di(()=>s(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:di(()=>i)};var Hn=class{constructor(e){return e}},fi=class{constructor(){return Nl()}};function tF(n){return n&&n.length===1?n[0]:new Hn(wo())}var Gg=new G("angularfire2._apps"),nF={provide:Hn,useFactory:tF,deps:[[new St,Gg]]},rF={provide:fi,deps:[[new St,Gg]]};function iF(n){return(e,t)=>{let r=t.get(ri);Ge("angularfire",hi.full,"core"),Ge("angularfire",hi.full,"app"),Ge("angular",EC.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Hn(i)}}function l0(n,...e){return to([nF,rF,{provide:Gg,useFactory:iF(n),multi:!0,deps:[xe,Lt,bo,...e]}])}var d0=_t(qg,!0);function A0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var M0=A0,N0=new jn("auth","Firebase",A0());var Bl=new Er("@firebase/auth");function oF(n,...e){Bl.logLevel<=oe.WARN&&Bl.warn(`Auth (${Dr}): ${n}`,...e)}function kl(n,...e){Bl.logLevel<=oe.ERROR&&Bl.error(`Auth (${Dr}): ${n}`,...e)}function vn(n,...e){throw gm(n,...e)}function pi(n,...e){return gm(n,...e)}function x0(n,e,t){let r=Object.assign(Object.assign({},M0()),{[e]:t});return new jn("auth","Firebase",r).create(e,{appName:n.name})}function Gn(n){return x0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gm(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return N0.create(n,...e)}function W(n,e,...t){if(!n)throw gm(e,...t)}function qn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw kl(e),new Error(e)}function Tr(n,e){n||qn(e)}function Yg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function sF(){return h0()==="http:"||h0()==="https:"}function h0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function aF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sF()||HD()||"connection"in navigator)?navigator.onLine:!0}function cF(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tr(t>e,"Short delay should be less than long delay!"),this.isMobile=jD()||qD()}get(){return aF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function mm(n,e){Tr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ul=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var lF=new gi(3e4,6e4);function Sr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ar(o,s,c,u){return v(this,arguments,function*(n,e,t,r,i={}){return R0(n,i,()=>v(null,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=ia(Object.assign({key:n.config.apiKey},f)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:y},d);return $D()||(m.referrerPolicy="no-referrer"),Ul.fetch()(P0(n,n.config.apiHost,t,g),m)}))})}function R0(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},uF),e);try{let i=new Zg(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ol(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ol(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Ol(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Ol(n,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw x0(n,f,d);vn(n,f)}}catch(i){if(i instanceof xt)throw i;vn(n,"network-request-failed",{message:String(i)})}})}function ma(o,s,c,u){return v(this,arguments,function*(n,e,t,r,i={}){let d=yield Ar(n,e,t,r,i);return"mfaPendingCredential"in d&&vn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function P0(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?mm(n.config,i):`${n.config.apiScheme}://${i}`}function dF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Zg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pi(this.auth,"network-request-failed")),lF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ol(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=pi(n,e,r);return i.customData._tokenResponse=t,i}function f0(n){return n!==void 0&&n.enterprise!==void 0}var Jg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function hF(n,e){return v(this,null,function*(){return Ar(n,"GET","/v2/recaptchaConfig",Sr(n,e))})}function fF(n,e){return v(this,null,function*(){return Ar(n,"POST","/v1/accounts:delete",e)})}function O0(n,e){return v(this,null,function*(){return Ar(n,"POST","/v1/accounts:lookup",e)})}function ua(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ym(n,e=!1){return v(this,null,function*(){let t=Ue(n),r=yield t.getIdToken(e),i=_m(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ua(Wg(i.auth_time)),issuedAtTime:ua(Wg(i.iat)),expirationTime:ua(Wg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Wg(n){return Number(n)*1e3}function _m(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return kl("JWT malformed, contained fewer than 3 sections"),null;try{let i=bg(t);return i?JSON.parse(i):(kl("Failed to decode base64 JWT payload"),null)}catch(i){return kl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function p0(n){let e=_m(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function da(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof xt&&pF(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function pF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Xg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ha=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ua(this.lastLoginAt),this.creationTime=ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jl(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield da(n,O0(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?k0(o.providerUserInfo):[],c=gF(n.providerData,s),u=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!c?.length,f=u?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ha(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function vm(n){return v(this,null,function*(){let e=Ue(n);yield jl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function gF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function k0(n){return n.map(e=>{var{providerId:t}=e,r=$h(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function mF(n,e){return v(this,null,function*(){let t=yield R0(n,{},()=>v(null,null,function*(){let r=ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=P0(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ul.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function yF(n,e){return v(this,null,function*(){return Ar(n,"POST","/v2/accounts:revokeToken",Sr(n,e))})}var la=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=p0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield mF(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return qn("not implemented")}};function br(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var To=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=$h(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ha(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield da(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ym(this,e)}reload(){return vm(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield jl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Xt(this.auth.app))return Promise.reject(Gn(this.auth));let e=yield this.getIdToken();return yield da(this,fF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,$=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Z=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:re,emailVerified:ve,isAnonymous:Ke,providerData:Ie,stsTokenManager:C}=t;W(re&&C,e,"internal-error");let _=la.fromJSON(this.name,C);W(typeof re=="string",e,"internal-error"),br(g,e.name),br(y,e.name),W(typeof ve=="boolean",e,"internal-error"),W(typeof Ke=="boolean",e,"internal-error"),br(m,e.name),br(S,e.name),br(P,e.name),br(R,e.name),br($,e.name),br(Z,e.name);let E=new n({uid:re,auth:e,email:y,emailVerified:ve,displayName:g,isAnonymous:Ke,photoURL:S,phoneNumber:m,tenantId:P,stsTokenManager:_,createdAt:$,lastLoginAt:Z});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(w=>Object.assign({},w))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new la;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jl(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?k0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new la;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ha(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,d),u})}};var g0=new Map;function zn(n){Tr(n instanceof Function,"Expected a class definition");let e=g0.get(n);return e?(Tr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,g0.set(n,e),e)}var _F=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),em=_F;function Fl(n,e,t){return`firebase:${n}:${e}:${t}`}var $l=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Fl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fl("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?To._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(zn(em),e,r);let i=(yield Promise.all(t.map(d=>v(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||zn(em),s=Fl(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(s);if(f){let g=To._fromJSON(e,f);d!==o&&(c=g),o=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(d=>v(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function m0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j0(e))return"Blackberry";if($0(e))return"Webos";if(V0(e))return"Safari";if((e.includes("chrome/")||L0(e))&&!e.includes("edge/"))return"Chrome";if(U0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function F0(n=Qe()){return/firefox\//i.test(n)}function V0(n=Qe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L0(n=Qe()){return/crios\//i.test(n)}function B0(n=Qe()){return/iemobile/i.test(n)}function U0(n=Qe()){return/android/i.test(n)}function j0(n=Qe()){return/blackberry/i.test(n)}function $0(n=Qe()){return/webos/i.test(n)}function Im(n=Qe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vF(n=Qe()){var e;return Im(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IF(){return zD()&&document.documentMode===10}function H0(n=Qe()){return Im(n)||U0(n)||$0(n)||j0(n)||/windows phone/i.test(n)||B0(n)}function q0(n,e=[]){let t;switch(n){case"Browser":t=m0(Qe());break;case"Worker":t=`${m0(Qe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dr}/${r}`}var tm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function EF(t){return v(this,arguments,function*(n,e={}){return Ar(n,"GET","/v2/passwordPolicy",Sr(n,e))})}var wF=6,nm=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:wF,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var rm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hl(this),this.idTokenSubscription=new Hl(this),this.beforeStateQueue=new tm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield $l.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield O0(this,{idToken:e}),r=yield To._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Xt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield jl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cF()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Xt(this.app))return Promise.reject(Gn(this));let t=e?Ue(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Xt(this.app)?Promise.reject(Gn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Xt(this.app)?Promise.reject(Gn(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(zn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield EF(this),t=new nm(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield yF(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&zn(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield $l.create(this,[zn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oF(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function yi(n){return Ue(n)}var Hl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=QD(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yl={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CF(n){Yl=n}function z0(n){return Yl.loadJS(n)}function DF(){return Yl.recaptchaEnterpriseScript}function bF(){return Yl.gapiScript}function G0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var TF="recaptcha-enterprise",SF="NO_RECAPTCHA",im=class{constructor(e){this.type=TF,this.auth=yi(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>v(null,null,function*(){hF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new Jg(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;f0(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(SF)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(c=>{if(!t&&f0(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=DF();u.length!==0&&(u+=c),z0(u).then(()=>{i(c,o,s)}).catch(d=>{s(d)})}}).catch(c=>{s(c)})})})}};function y0(n,e,t,r=!1){return v(this,null,function*(){let i=new im(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function om(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield y0(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield y0(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function Em(n,e){let t=aa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(ui(o,e??{}))return i;vn(i,"already-initialized")}return t.initialize({options:e})}function AF(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function wm(n,e,t){let r=yi(n);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=W0(e),{host:s,port:c}=MF(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||NF()}function W0(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function MF(n){let e=W0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:_0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:_0(s)}}}function _0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function NF(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var fa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,t){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}};function xF(n,e){return v(this,null,function*(){return Ar(n,"POST","/v1/accounts:signUp",e)})}function RF(n,e){return v(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithPassword",Sr(n,e))})}function PF(n,e){return v(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithEmailLink",Sr(n,e))})}function OF(n,e){return v(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithEmailLink",Sr(n,e))})}var pa=class n extends fa{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return om(e,t,"signInWithPassword",RF);case"emailLink":return PF(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return om(e,r,"signUpPassword",xF);case"emailLink":return OF(e,{idToken:t,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Kg(n,e){return v(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithIdp",Sr(n,e))})}function kF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FF(n){let e=Io(Eo(n)).link,t=e?Io(Eo(e)).deep_link_id:null,r=Io(Eo(n)).deep_link_id;return(r?Io(Eo(r)).link:null)||r||t||e||n}var ql=class n{constructor(e){var t,r,i,o,s,c;let u=Io(Eo(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,g=kF((i=u.mode)!==null&&i!==void 0?i:null);W(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=FF(e);try{return new n(t)}catch{return null}}};var K0=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return pa._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ql.parseLink(r);return W(i,"argument-error"),pa._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),zl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var sm=class extends zl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function VF(n,e){return v(this,null,function*(){return ma(n,"POST","/v1/accounts:signUp",Sr(n,e))})}var So=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield To._fromIdTokenResponse(e,r,i),s=v0(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=v0(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function v0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var am=class n extends xt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Q0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?am._fromErrorAndOperation(n,o,e,r):o})}function LF(n,e,t=!1){return v(this,null,function*(){let r=yield da(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return So._forOperation(n,"link",r)})}function BF(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Xt(r.app))return Promise.reject(Gn(r));let i="reauthenticate";try{let o=yield da(n,Q0(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=_m(o.idToken);W(s,r,"internal-error");let{sub:c}=s;return W(n.uid===c,r,"user-mismatch"),So._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),o}})}function Y0(n,e,t=!1){return v(this,null,function*(){if(Xt(n.app))return Promise.reject(Gn(n));let r="signIn",i=yield Q0(n,r,e),o=yield So._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Cm(n,e){return v(this,null,function*(){return Y0(yi(n),e)})}function Z0(n){return v(this,null,function*(){let e=yi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Dm(n,e,t){return v(this,null,function*(){if(Xt(n.app))return Promise.reject(Gn(n));let r=yi(n),s=yield om(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VF).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Z0(n),u}),c=yield So._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function bm(n,e,t){return Xt(n.app)?Promise.reject(Gn(n)):Cm(Ue(n),K0.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Z0(n),r}))}function Tm(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function Sm(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function Am(n,e,t,r){return Ue(n).onAuthStateChanged(e,t,r)}function Mm(n){return Ue(n).signOut()}var Gl="__sak";var Wl=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var UF=1e3,jF=10,$F=(()=>{class n extends Wl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);IF()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,jF):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},UF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield nr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield nr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield nr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),J0=$F;var HF=(()=>{class n extends Wl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Nm=HF;function qF(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var zF=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(f=>v(this,null,function*(){return f(r.origin,s)})),d=yield qF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function X0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var cm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let d=X0("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let y=g;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function _n(){return window}function GF(n){_n().location.href=n}function eb(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}function WF(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function KF(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function QF(){return eb()?self:null}var tb="firebaseLocalStorageDb",YF=1,Kl="firebaseLocalStorage",nb="fbase_key",mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Zl(n,e){return n.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function ZF(){let n=indexedDB.deleteDatabase(tb);return new mi(n).toPromise()}function um(){let n=indexedDB.open(tb,YF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Kl,{keyPath:nb})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),yield ZF(),e(yield um()))}))})}function I0(n,e,t){return v(this,null,function*(){let r=Zl(n,!0).put({[nb]:e,value:t});return new mi(r).toPromise()})}function JF(n,e){return v(this,null,function*(){let t=Zl(n,!1).get(e),r=yield new mi(t).toPromise();return r===void 0?null:r.value})}function E0(n,e){let t=Zl(n,!0).delete(e);return new mi(t).toPromise()}var XF=800,eV=3,tV=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield um(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>eV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return eb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=zF._getInstance(QF()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield WF(),!this.activeServiceWorker)return;this.sender=new cm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||KF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield um();return yield I0(t,Gl,"1"),yield E0(t,Gl),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>I0(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>JF(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>E0(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Zl(o,!1).getAll();return new mi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),XF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),rb=tV;var o9=G0("rcb"),s9=new gi(3e4,6e4);function nV(n,e){return e?zn(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ga=class extends fa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kg(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function rV(n){return Y0(n.auth,new ga(n),n.bypassAuthState)}function iV(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),BF(t,new ga(n),n.bypassAuthState)}function oV(n){return v(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),LF(t,new ga(n),n.bypassAuthState)})}var lm=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rV;case"linkViaPopup":case"linkViaRedirect":return oV;case"reauthViaPopup":case"reauthViaRedirect":return iV;default:vn(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var a9=new gi(2e3,1e4);var sV="pendingRedirect",Vl=new Map,dm=class n extends lm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Vl.get(this.auth._key());if(!e){try{let r=(yield aV(this.resolver,this.auth))?yield nr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vl.set(this.auth._key(),e)}return this.bypassAuthState||Vl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return nr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,nr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function aV(n,e){return v(this,null,function*(){let t=lV(e),r=uV(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function cV(n,e){Vl.set(n._key(),e)}function uV(n){return zn(n._redirectPersistence)}function lV(n){return Fl(sV,n.config.apiKey,n.name)}function dV(n,e,t=!1){return v(this,null,function*(){if(Xt(n.app))return Promise.reject(Gn(n));let r=yi(n),i=nV(r,e),s=yield new dm(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var hV=10*60*1e3,hm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ib(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hV&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}};function w0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ib({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function fV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ib(n);default:return!1}}function pV(t){return v(this,arguments,function*(n,e={}){return Ar(n,"GET","/v1/projects",e)})}var gV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mV=/^https?/;function yV(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield pV(n);for(let t of e)try{if(_V(t))return}catch{}vn(n,"unauthorized-domain")})}function _V(n){let e=Yg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!mV.test(t))return!1;if(gV.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var vV=new gi(3e4,6e4);function C0(){let n=_n().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function IV(n){return new Promise((e,t)=>{var r,i,o;function s(){C0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C0(),t(pi(n,"network-request-failed"))},timeout:vV.get()})}if(!((i=(r=_n().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=_n().gapi)===null||o===void 0)&&o.load)s();else{let c=G0("iframefcb");return _n()[c]=()=>{gapi.load?s():t(pi(n,"network-request-failed"))},z0(`${bF()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Ll=null,e})}var Ll=null;function EV(n){return Ll=Ll||IV(n),Ll}var wV=new gi(5e3,15e3),CV="__/auth/iframe",DV="emulator/auth/iframe",bV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SV(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?mm(e,DV):`https://${n.config.authDomain}/${CV}`,r={apiKey:e.apiKey,appName:n.name,v:Dr},i=TV.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ia(r).slice(1)}`}function AV(n){return v(this,null,function*(){let e=yield EV(n),t=_n().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:SV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bV,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=pi(n,"network-request-failed"),c=_n().setTimeout(()=>{o(s)},wV.get());function u(){_n().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var MV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NV=500,xV=600,RV="_blank",PV="http://localhost",Ql=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function OV(n,e,t,r=NV,i=xV){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},MV),{width:r.toString(),height:i.toString(),top:o,left:s}),d=Qe().toLowerCase();t&&(c=L0(d)?RV:t),F0(d)&&(e=e||PV,u.scrollbars="yes");let f=Object.entries(u).reduce((y,[m,S])=>`${y}${m}=${S},`,"");if(vF(d)&&c!=="_self")return kV(e||"",c),new Ql(null);let g=window.open(e||"",c,f);W(g,n,"popup-blocked");try{g.focus()}catch{}return new Ql(g)}function kV(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var FV="__/auth/handler",VV="emulator/auth/handler",LV=encodeURIComponent("fac");function D0(n,e,t,r,i,o){return v(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Dr,eventId:i};if(e instanceof zl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",KD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(o||{}))s[f]=g}if(e instanceof sm){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),d=u?`#${LV}=${encodeURIComponent(u)}`:"";return`${BV(n)}?${ia(c).slice(1)}${d}`})}function BV({config:n}){return n.emulator?mm(n,VV):`https://${n.authDomain}/${FV}`}var Qg="webStorageSupport",fm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nm,this._completeRedirectFn=dV,this._overrideRedirectResult=cV}_openPopup(e,t,r,i){return v(this,null,function*(){var o;Tr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield D0(e,t,r,Yg(),i);return OV(e,s,X0())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield D0(e,t,r,Yg(),i);return GF(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Tr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield AV(e),r=new hm(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qg,{type:Qg},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Qg];s!==void 0&&t(!!s),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return H0()||V0()||Im()}},ob=fm;var b0="@firebase/auth",T0="1.7.9";var pm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function UV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jV(n){Cr(new jt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q0(n)},d=new rm(r,i,o,u);return AF(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cr(new jt("auth-internal",e=>{let t=yi(e.getProvider("auth").getImmediate());return(r=>new pm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(b0,T0,UV(n)),Ge(b0,T0,"esm2017")}var $V=5*60,HV=Ag("authIdTokenMaxAge")||$V,S0=null,qV=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>HV)return;let i=t?.token;S0!==i&&(S0=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function xm(n=wo()){let e=aa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Em(n,{popupRedirectResolver:ob,persistence:[rb,J0,Nm]}),r=Ag("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=qV(o.toString());Sm(t,s,()=>s(t.currentUser)),Tm(t,c=>s(c))}}let i=Tg("auth");return i&&wm(t,`http://${i}`),t}function zV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}CF({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=pi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",zV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jV("Browser");var sb="auth",_i=class{constructor(e){return e}},ya=class{constructor(){return ca(sb)}};var Rm=new G("angularfire2.auth-instances");function OL(n,e){let t=Rl(sb,n,e);return t&&new _i(t)}function kL(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _i(r)}}var FL={provide:ya,deps:[[new St,Rm]]},VL={provide:_i,useFactory:OL,deps:[[new St,Rm],Hn]};function ab(n,...e){return Ge("angularfire",hi.full,"auth"),to([VL,FL,{provide:Rm,useFactory:kL(n),multi:!0,deps:[xe,Lt,bo,fi,[new St,Do],...e]}])}var cb=_t(Dm,!0);var ub=_t(xm,!0);var lb=_t(Am,!0);var db=_t(bm,!0);var hb=_t(Mm,!0);var fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pb={};var Mr,Pm;(function(){var n;function e(C,_){function E(){}E.prototype=_.prototype,C.D=_.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(w,D,T){for(var I=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)I[Sn-2]=arguments[Sn];return _.prototype[D].apply(w,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,E){E||(E=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(D=0;16>D;++D)w[D]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=C.g[0],E=C.g[1],D=C.g[2];var T=C.g[3],I=_+(T^E&(D^T))+w[0]+3614090360&4294967295;_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[1]+3905402710&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[2]+606105819&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[3]+3250441966&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(T^E&(D^T))+w[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[5]+1200080426&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[6]+2821735955&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[7]+4249261313&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(T^E&(D^T))+w[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[9]+2336552879&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[10]+4294925233&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[11]+2304563134&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(T^E&(D^T))+w[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[13]+4254626195&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[14]+2792965006&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[15]+1236535329&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(D^T&(E^D))+w[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[6]+3225465664&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[11]+643717713&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[0]+3921069994&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(D^T&(E^D))+w[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[10]+38016083&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[15]+3634488961&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[4]+3889429448&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(D^T&(E^D))+w[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[14]+3275163606&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[3]+4107603335&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[8]+1163531501&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(D^T&(E^D))+w[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[2]+4243563512&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[7]+1735328473&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[12]+2368359562&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(E^D^T)+w[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[8]+2272392833&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[11]+1839030562&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[14]+4259657740&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(E^D^T)+w[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[4]+1272893353&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[7]+4139469664&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[10]+3200236656&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(E^D^T)+w[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[0]+3936430074&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[3]+3572445317&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[6]+76029189&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(E^D^T)+w[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[12]+3873151461&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[15]+530742520&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[2]+3299628645&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(D^(E|~T))+w[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[7]+1126891415&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[14]+2878612391&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[5]+4237533241&4294967295,E=D+(I<<21&4294967295|I>>>11),I=_+(D^(E|~T))+w[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[3]+2399980690&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[10]+4293915773&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[1]+2240044497&4294967295,E=D+(I<<21&4294967295|I>>>11),I=_+(D^(E|~T))+w[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[15]+4264355552&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[6]+2734768916&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[13]+1309151649&4294967295,E=D+(I<<21&4294967295|I>>>11),I=_+(D^(E|~T))+w[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[11]+3174756917&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[2]+718787259&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+T&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var E=_-this.blockSize,w=this.B,D=this.h,T=0;T<_;){if(D==0)for(;T<=E;)i(this,C,T),T+=this.blockSize;if(typeof C=="string"){for(;T<_;)if(w[D++]=C.charCodeAt(T++),D==this.blockSize){i(this,w),D=0;break}}else for(;T<_;)if(w[D++]=C[T++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var E=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=E&255,E/=256;for(this.u(C),C=Array(16),_=E=0;4>_;++_)for(var w=0;32>w;w+=8)C[E++]=this.g[_]>>>w&255;return C};function o(C,_){var E=c;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=_(C)}function s(C,_){this.h=_;for(var E=[],w=!0,D=C.length-1;0<=D;D--){var T=C[D]|0;w&&T==_||(E[D]=T,w=!1)}this.g=E}var c={};function u(C){return-128<=C&&128>C?o(C,function(_){return new s([_|0],0>_?-1:0)}):new s([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return g;if(0>C)return R(d(-C));for(var _=[],E=1,w=0;C>=E;w++)_[w]=C/E|0,E*=4294967296;return new s(_,0)}function f(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(f(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(_,8)),w=g,D=0;D<C.length;D+=8){var T=Math.min(8,C.length-D),I=parseInt(C.substring(D,D+T),_);8>T?(T=d(Math.pow(_,T)),w=w.j(T).add(d(I))):(w=w.j(E),w=w.add(d(I)))}return w}var g=u(0),y=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var C=0,_=1,E=0;E<this.g.length;E++){var w=this.i(E);C+=(0<=w?w:4294967296+w)*_,_*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(P(this))return"-"+R(this).toString(C);for(var _=d(Math.pow(C,6)),E=this,w="";;){var D=ve(E,_).g;E=$(E,D.j(_));var T=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=D,S(E))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=$(this,C),P(C)?-1:S(C)?0:1};function R(C){for(var _=C.g.length,E=[],w=0;w<_;w++)E[w]=~C.g[w];return new s(E,~C.h).add(y)}n.abs=function(){return P(this)?R(this):this},n.add=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0,D=0;D<=_;D++){var T=w+(this.i(D)&65535)+(C.i(D)&65535),I=(T>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);w=I>>>16,T&=65535,I&=65535,E[D]=I<<16|T}return new s(E,E[E.length-1]&-2147483648?-1:0)};function $(C,_){return C.add(R(_))}n.j=function(C){if(S(this)||S(C))return g;if(P(this))return P(C)?R(this).j(R(C)):R(R(this).j(C));if(P(C))return R(this.j(R(C)));if(0>this.l(m)&&0>C.l(m))return d(this.m()*C.m());for(var _=this.g.length+C.g.length,E=[],w=0;w<2*_;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<C.g.length;D++){var T=this.i(w)>>>16,I=this.i(w)&65535,Sn=C.i(D)>>>16,Jo=C.i(D)&65535;E[2*w+2*D]+=I*Jo,Z(E,2*w+2*D),E[2*w+2*D+1]+=T*Jo,Z(E,2*w+2*D+1),E[2*w+2*D+1]+=I*Sn,Z(E,2*w+2*D+1),E[2*w+2*D+2]+=T*Sn,Z(E,2*w+2*D+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new s(E,0)};function Z(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function re(C,_){this.g=C,this.h=_}function ve(C,_){if(S(_))throw Error("division by zero");if(S(C))return new re(g,g);if(P(C))return _=ve(R(C),_),new re(R(_.g),R(_.h));if(P(_))return _=ve(C,R(_)),new re(R(_.g),_.h);if(30<C.g.length){if(P(C)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=_;0>=w.l(C);)E=Ke(E),w=Ke(w);var D=Ie(E,1),T=Ie(w,1);for(w=Ie(w,2),E=Ie(E,2);!S(w);){var I=T.add(w);0>=I.l(C)&&(D=D.add(E),T=I),w=Ie(w,1),E=Ie(E,1)}return _=$(C,D.j(_)),new re(D,_)}for(D=g;0<=C.l(_);){for(E=Math.max(1,Math.floor(C.m()/_.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=d(E),I=T.j(_);P(I)||0<I.l(C);)E-=w,T=d(E),I=T.j(_);S(T)&&(T=y),D=D.add(T),C=$(C,I)}return new re(D,C)}n.A=function(C){return ve(this,C).h},n.and=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)&C.i(w);return new s(E,this.h&C.h)},n.or=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)|C.i(w);return new s(E,this.h|C.h)},n.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)^C.i(w);return new s(E,this.h^C.h)};function Ke(C){for(var _=C.g.length+1,E=[],w=0;w<_;w++)E[w]=C.i(w)<<1|C.i(w-1)>>>31;return new s(E,C.h)}function Ie(C,_){var E=_>>5;_%=32;for(var w=C.g.length-E,D=[],T=0;T<w;T++)D[T]=0<_?C.i(T+E)>>>_|C.i(T+E+1)<<32-_:C.i(T+E);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Pm=pb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,Mr=pb.Integer=s}).apply(typeof fb<"u"?fb:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wn={};var Om,LL,Ao,km,_a,Xl,Fm,Vm,Lm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var b=a[p];if(!(b in h))break e;h=h[b]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function o(a,l){a instanceof String&&(a+="");var h=0,p=!1,b={next:function(){if(!p&&h<a.length){var A=h++;return{value:l(A,a[A]),done:!1}}return p=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(l,h){return h})}});var s=s||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,p),a.apply(l,b)}}return function(){return a.apply(l,arguments)}}function y(a,l,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,y.apply(null,arguments)}function m(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function S(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,b,A){for(var k=Array(arguments.length-2),De=2;De<arguments.length;De++)k[De-2]=arguments[De];return l.prototype[b].apply(p,k)}}function P(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let b=a.length||0,A=p.length||0;a.length=b+A;for(let k=0;k<A;k++)a[b+k]=p[k]}else a.push(p)}}class ${constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Z(a){return/^[\s\xa0]*$/.test(a)}function re(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ve(a){return ve[" "](a),a}ve[" "]=function(){};var Ke=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Ie(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function C(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function _(a){let l={};for(let h in a)l[h]=a[h];return l}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,p;for(let b=1;b<arguments.length;b++){p=arguments[b];for(h in p)a[h]=p[h];for(let A=0;A<E.length;A++)h=E[A],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function T(a){c.setTimeout(()=>{throw a},0)}function I(){var a=$d;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Sn{constructor(){this.h=this.g=null}add(l,h){let p=Jo.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Jo=new $(()=>new lS,a=>a.reset());class lS{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Xo,es=!1,$d=new Sn,Z_=()=>{let a=c.Promise.resolve(void 0);Xo=()=>{a.then(dS)}};var dS=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){T(h)}var l=Jo;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}es=!1};function Jn(){this.s=this.s,this.C=this.C}Jn.prototype.s=!1,Jn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Jn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var hS=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function ts(a,l){if(et.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Ke){e:{try{ve(l.nodeName);var b=!0;break e}catch{}b=!1}b||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fS[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ts.aa.h.call(this)}}S(ts,et);var fS={2:"touch",3:"pen",4:"mouse"};ts.prototype.h=function(){ts.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ns="closure_listenable_"+(1e6*Math.random()|0),pS=0;function gS(a,l,h,p,b){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=b,this.key=++pS,this.da=this.fa=!1}function qa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function za(a){this.src=a,this.g={},this.h=0}za.prototype.add=function(a,l,h,p,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var k=qd(a,l,p,b);return-1<k?(l=a[k],h||(l.fa=!1)):(l=new gS(l,this.src,A,!!p,b),l.fa=h,a.push(l)),l};function Hd(a,l){var h=l.type;if(h in a.g){var p=a.g[h],b=Array.prototype.indexOf.call(p,l,void 0),A;(A=0<=b)&&Array.prototype.splice.call(p,b,1),A&&(qa(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function qd(a,l,h,p){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==l&&A.capture==!!h&&A.ha==p)return b}return-1}var zd="closure_lm_"+(1e6*Math.random()|0),Gd={};function J_(a,l,h,p,b){if(p&&p.once)return ev(a,l,h,p,b);if(Array.isArray(l)){for(var A=0;A<l.length;A++)J_(a,l[A],h,p,b);return null}return h=Yd(h),a&&a[ns]?a.K(l,h,d(p)?!!p.capture:!!p,b):X_(a,l,h,!1,p,b)}function X_(a,l,h,p,b,A){if(!l)throw Error("Invalid event type");var k=d(b)?!!b.capture:!!b,De=Kd(a);if(De||(a[zd]=De=new za(a)),h=De.add(l,h,p,k,A),h.proxy)return h;if(p=mS(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)hS||(b=k),b===void 0&&(b=!1),a.addEventListener(l.toString(),p,b);else if(a.attachEvent)a.attachEvent(nv(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function mS(){function a(h){return l.call(a.src,a.listener,h)}let l=yS;return a}function ev(a,l,h,p,b){if(Array.isArray(l)){for(var A=0;A<l.length;A++)ev(a,l[A],h,p,b);return null}return h=Yd(h),a&&a[ns]?a.L(l,h,d(p)?!!p.capture:!!p,b):X_(a,l,h,!0,p,b)}function tv(a,l,h,p,b){if(Array.isArray(l))for(var A=0;A<l.length;A++)tv(a,l[A],h,p,b);else p=d(p)?!!p.capture:!!p,h=Yd(h),a&&a[ns]?(a=a.i,l=String(l).toString(),l in a.g&&(A=a.g[l],h=qd(A,h,p,b),-1<h&&(qa(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete a.g[l],a.h--)))):a&&(a=Kd(a))&&(l=a.g[l.toString()],a=-1,l&&(a=qd(l,h,p,b)),(h=-1<a?l[a]:null)&&Wd(h))}function Wd(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[ns])Hd(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(nv(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=Kd(l))?(Hd(h,a),h.h==0&&(h.src=null,l[zd]=null)):qa(a)}}}function nv(a){return a in Gd?Gd[a]:Gd[a]="on"+a}function yS(a,l){if(a.da)a=!0;else{l=new ts(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&Wd(a),a=h.call(p,l)}return a}function Kd(a){return a=a[zd],a instanceof za?a:null}var Qd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yd(a){return typeof a=="function"?a:(a[Qd]||(a[Qd]=function(l){return a.handleEvent(l)}),a[Qd])}function tt(){Jn.call(this),this.i=new za(this),this.M=this,this.F=null}S(tt,Jn),tt.prototype[ns]=!0,tt.prototype.removeEventListener=function(a,l,h,p){tv(this,a,l,h,p)};function dt(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new et(l,a);else if(l instanceof et)l.target=l.target||a;else{var b=l;l=new et(p,a),w(l,b)}if(b=!0,h)for(var A=h.length-1;0<=A;A--){var k=l.g=h[A];b=Ga(k,p,!0,l)&&b}if(k=l.g=a,b=Ga(k,p,!0,l)&&b,b=Ga(k,p,!1,l)&&b,h)for(A=0;A<h.length;A++)k=l.g=h[A],b=Ga(k,p,!1,l)&&b}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)qa(h[p]);delete a.g[l],a.h--}}this.F=null},tt.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},tt.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function Ga(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var b=!0,A=0;A<l.length;++A){var k=l[A];if(k&&!k.da&&k.capture==h){var De=k.listener,Ze=k.ha||k.src;k.fa&&Hd(a.i,k),b=De.call(Ze,p)!==!1&&b}}return b&&!p.defaultPrevented}function rv(a,l,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function iv(a){a.g=rv(()=>{a.g=null,a.i&&(a.i=!1,iv(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class _S extends Jn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:iv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(a){Jn.call(this),this.h=a,this.g={}}S(rs,Jn);var ov=[];function sv(a){Ie(a.g,function(l,h){this.g.hasOwnProperty(h)&&Wd(l)},a),a.g={}}rs.prototype.N=function(){rs.aa.N.call(this),sv(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zd=c.JSON.stringify,vS=c.JSON.parse,IS=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Jd(){}Jd.prototype.h=null;function av(a){return a.h||(a.h=a.i())}function cv(){}var is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xd(){et.call(this,"d")}S(Xd,et);function eh(){et.call(this,"c")}S(eh,et);var Or={},uv=null;function Wa(){return uv=uv||new tt}Or.La="serverreachability";function lv(a){et.call(this,Or.La,a)}S(lv,et);function os(a){let l=Wa();dt(l,new lv(l))}Or.STAT_EVENT="statevent";function dv(a,l){et.call(this,Or.STAT_EVENT,a),this.stat=l}S(dv,et);function ht(a){let l=Wa();dt(l,new dv(l,a))}Or.Ma="timingevent";function hv(a,l){et.call(this,Or.Ma,a),this.size=l}S(hv,et);function ss(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function as(){this.g=!0}as.prototype.xa=function(){this.g=!1};function ES(a,l,h,p,b,A){a.info(function(){if(a.g)if(A)for(var k="",De=A.split("&"),Ze=0;Ze<De.length;Ze++){var fe=De[Ze].split("=");if(1<fe.length){var nt=fe[0];fe=fe[1];var rt=nt.split("_");k=2<=rt.length&&rt[1]=="type"?k+(nt+"="+fe+"&"):k+(nt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+p+") [attempt "+b+"]: "+l+`
`+h+`
`+k})}function wS(a,l,h,p,b,A,k){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+b+"]: "+l+`
`+h+`
`+A+" "+k})}function xi(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+DS(a,h)+(p?" "+p:"")})}function CS(a,l){a.info(function(){return"TIMEOUT: "+l})}as.prototype.info=function(){};function DS(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var b=p[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<b.length;k++)b[k]=""}}}}return Zd(h)}catch{return l}}var Ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},th;function Qa(){}S(Qa,Jd),Qa.prototype.g=function(){return new XMLHttpRequest},Qa.prototype.i=function(){return{}},th=new Qa;function Xn(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pv}function pv(){this.i=null,this.g="",this.h=!1}var gv={},nh={};function rh(a,l,h){a.L=1,a.v=Xa(An(l)),a.m=h,a.P=!0,mv(a,null)}function mv(a,l){a.F=Date.now(),Ya(a),a.A=An(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Nv(h.i,"t",p),a.C=0,h=a.j.J,a.h=new pv,a.g=Kv(a.j,h?l:null,!a.m),0<a.O&&(a.M=new _S(y(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(ov[0]=b.toString()),b=ov);for(var A=0;A<b.length;A++){var k=J_(h,b[A],p||l.handleEvent,!1,l.h||l);if(!k)break;l.g[k.key]=k}l=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),os(),ES(a.i,a.u,a.A,a.l,a.R,a.m)}Xn.prototype.ca=function(a){a=a.target;let l=this.M;l&&Mn(a)==3?l.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)e:{let rt=Mn(this.g);var l=this.g.Ba();let Oi=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||Vv(this.g)))){this.J||rt!=4||l==7||(l==8||0>=Oi?os(3):os(2)),ih(this);var h=this.g.Z();this.X=h;t:if(yv(this)){var p=Vv(this.g);a="";var b=p.length,A=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),cs(this);var k="";break t}this.h.i=new c.TextDecoder}for(l=0;l<b;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(A&&l==b-1)});p.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,wS(this.i,this.u,this.A,this.l,this.R,rt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Ze=this.g;if((De=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(De)){var fe=De;break t}}fe=null}if(h=fe)xi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oh(this,h);else{this.o=!1,this.s=3,ht(12),kr(this),cs(this);break e}}if(this.P){h=!0;let qt;for(;!this.J&&this.C<k.length;)if(qt=bS(this,k),qt==nh){rt==4&&(this.s=4,ht(14),h=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==gv){this.s=4,ht(15),xi(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else xi(this.i,this.l,qt,null),oh(this,qt);if(yv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||k.length!=0||this.h.h||(this.s=1,ht(16),h=!1),this.o=this.o&&h,!h)xi(this.i,this.l,k,"[Invalid Chunked Response]"),kr(this),cs(this);else if(0<k.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),dh(nt),nt.M=!0,ht(11))}}else xi(this.i,this.l,k,null),oh(this,k);rt==4&&kr(this),this.o&&!this.J&&(rt==4?qv(this.j,this):(this.o=!1,Ya(this)))}else $S(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),kr(this),cs(this)}}}catch{}finally{}};function yv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function bS(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?nh:(h=Number(l.substring(h,p)),isNaN(h)?gv:(p+=1,p+h>l.length?nh:(l=l.slice(p,p+h),a.C=p+h,l)))}Xn.prototype.cancel=function(){this.J=!0,kr(this)};function Ya(a){a.S=Date.now()+a.I,_v(a,a.I)}function _v(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ss(y(a.ba,a),l)}function ih(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Xn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(CS(this.i,this.A),this.L!=2&&(os(),ht(17)),kr(this),this.s=2,cs(this)):_v(this,this.S-a)};function cs(a){a.j.G==0||a.J||qv(a.j,a)}function kr(a){ih(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,sv(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function oh(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||sh(h.h,a))){if(!a.K&&sh(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var b=p;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ic(h),nc(h);else break e;lh(h),ht(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=ss(y(h.Za,h),6e3));if(1>=Ev(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Vr(h,11)}else if((a.K||h.g==a)&&ic(h),!Z(l))for(b=h.Da.g.parse(l),l=0;l<b.length;l++){let fe=b[l];if(h.T=fe[0],fe=fe[1],h.G==2)if(fe[0]=="c"){h.K=fe[1],h.ia=fe[2];let nt=fe[3];nt!=null&&(h.la=nt,h.j.info("VER="+h.la));let rt=fe[4];rt!=null&&(h.Aa=rt,h.j.info("SVER="+h.Aa));let Oi=fe[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(p=1.5*Oi,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let qt=a.g;if(qt){let sc=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sc){var A=p.h;A.g||sc.indexOf("spdy")==-1&&sc.indexOf("quic")==-1&&sc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ah(A,A.h),A.h=null))}if(p.D){let hh=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;hh&&(p.ya=hh,Ae(p.I,p.D,hh))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var k=a;if(p.qa=Wv(p,p.J?p.ia:null,p.W),k.K){wv(p.h,k);var De=k,Ze=p.L;Ze&&(De.I=Ze),De.B&&(ih(De),Ya(De)),p.g=k}else $v(p);0<h.i.length&&rc(h)}else fe[0]!="stop"&&fe[0]!="close"||Vr(h,7);else h.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Vr(h,7):uh(h):fe[0]!="noop"&&h.l&&h.l.ta(fe),h.v=0)}}os(4)}catch{}}var TS=class{constructor(a,l){this.g=a,this.map=l}};function vv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Iv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ev(a){return a.h?1:a.g?a.g.size:0}function sh(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function ah(a,l){a.g?a.g.add(l):a.h=l}function wv(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}vv.prototype.cancel=function(){if(this.i=Cv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Cv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return P(a.i)}function SS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function AS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function Dv(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=AS(a),p=SS(a),b=p.length,A=0;A<b;A++)l.call(void 0,p[A],h&&h[A],a)}var bv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MS(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),b=null;if(0<=p){var A=a[h].substring(0,p);b=a[h].substring(p+1)}else A=a[h];l(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Fr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Fr){this.h=a.h,Za(this,a.j),this.o=a.o,this.g=a.g,Ja(this,a.s),this.l=a.l;var l=a.i,h=new ds;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Tv(this,h),this.m=a.m}else a&&(l=String(a).match(bv))?(this.h=!1,Za(this,l[1]||"",!0),this.o=us(l[2]||""),this.g=us(l[3]||"",!0),Ja(this,l[4]),this.l=us(l[5]||"",!0),Tv(this,l[6]||"",!0),this.m=us(l[7]||"")):(this.h=!1,this.i=new ds(null,this.h))}Fr.prototype.toString=function(){var a=[],l=this.j;l&&a.push(ls(l,Sv,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(ls(l,Sv,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ls(h,h.charAt(0)=="/"?RS:xS,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ls(h,OS)),a.join("")};function An(a){return new Fr(a)}function Za(a,l,h){a.j=h?us(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Ja(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Tv(a,l,h){l instanceof ds?(a.i=l,kS(a.i,a.h)):(h||(l=ls(l,PS)),a.i=new ds(l,a.h))}function Ae(a,l,h){a.i.set(l,h)}function Xa(a){return Ae(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function us(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ls(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,NS),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function NS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sv=/[#\/\?@]/g,xS=/[#\?:]/g,RS=/[#\?]/g,PS=/[#\?@]/g,OS=/#/g;function ds(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function er(a){a.g||(a.g=new Map,a.h=0,a.i&&MS(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=ds.prototype,n.add=function(a,l){er(this),this.i=null,a=Ri(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Av(a,l){er(a),l=Ri(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Mv(a,l){return er(a),l=Ri(a,l),a.g.has(l)}n.forEach=function(a,l){er(this),this.g.forEach(function(h,p){h.forEach(function(b){a.call(l,b,p,this)},this)},this)},n.na=function(){er(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let b=a[p];for(let A=0;A<b.length;A++)h.push(l[p])}return h},n.V=function(a){er(this);let l=[];if(typeof a=="string")Mv(this,a)&&(l=l.concat(this.g.get(Ri(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return er(this),this.i=null,a=Ri(this,a),Mv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Nv(a,l,h){Av(a,l),0<h.length&&(a.i=null,a.g.set(Ri(a,l),P(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let A=encodeURIComponent(String(p)),k=this.V(p);for(p=0;p<k.length;p++){var b=A;k[p]!==""&&(b+="="+encodeURIComponent(String(k[p]))),a.push(b)}}return this.i=a.join("&")};function Ri(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function kS(a,l){l&&!a.j&&(er(a),a.i=null,a.g.forEach(function(h,p){var b=p.toLowerCase();p!=b&&(Av(this,p),Nv(this,b,h))},a)),a.j=l}function FS(a,l){let h=new as;if(c.Image){let p=new Image;p.onload=m(tr,h,"TestLoadImage: loaded",!0,l,p),p.onerror=m(tr,h,"TestLoadImage: error",!1,l,p),p.onabort=m(tr,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=m(tr,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function VS(a,l){let h=new as,p=new AbortController,b=setTimeout(()=>{p.abort(),tr(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(A=>{clearTimeout(b),A.ok?tr(h,"TestPingServer: ok",!0,l):tr(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(b),tr(h,"TestPingServer: error",!1,l)})}function tr(a,l,h,p,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),p(h)}catch{}}function LS(){this.g=new IS}function BS(a,l,h){let p=h||"";try{Dv(a,function(b,A){let k=b;d(b)&&(k=Zd(b)),l.push(p+A+"="+encodeURIComponent(k))})}catch(b){throw l.push(p+"type="+encodeURIComponent("_badmap")),b}}function hs(a){this.l=a.Ub||null,this.j=a.eb||!1}S(hs,Jd),hs.prototype.g=function(){return new ec(this.l,this.j)},hs.prototype.i=function(a){return function(){return a}}({});function ec(a,l){tt.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ec,tt),n=ec.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,ps(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function xv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?fs(this):ps(this),this.readyState==3&&xv(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,fs(this))},n.Qa=function(a){this.g&&(this.response=a,fs(this))},n.ga=function(){this.g&&fs(this)};function fs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ps(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function ps(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Rv(a){let l="";return Ie(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function ch(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Rv(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ae(a,l,h))}function Pe(a){tt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,tt);var US=/^https?$/i,jS=["POST","PUT"];n=Pe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():th.g(),this.v=this.o?av(this.o):av(th),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(A){Pv(this,A);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var b in p)h.set(b,p[b]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let A of p.keys())h.set(A,p.get(A));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(jS,l,void 0))||p||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of h)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fv(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){Pv(this,A)}};function Pv(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Ov(a),tc(a)}function Ov(a){a.A||(a.A=!0,dt(a,"complete"),dt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,dt(this,"complete"),dt(this,"abort"),tc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tc(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?kv(this):this.bb())},n.bb=function(){kv(this)};function kv(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Mn(a)!=4||a.Z()!=2)){if(a.u&&Mn(a)==4)rv(a.Ea,0,a);else if(dt(a,"readystatechange"),Mn(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=k===0){var b=String(a.D).match(bv)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),p=!US.test(b?b.toLowerCase():"")}h=p}if(h)dt(a,"complete"),dt(a,"success");else{a.m=6;try{var A=2<Mn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",Ov(a)}}finally{tc(a)}}}}function tc(a,l){if(a.g){Fv(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||dt(a,"ready");try{h.onreadystatechange=p}catch{}}}function Fv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Mn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),vS(l)}};function Vv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function $S(a){let l={};a=(a.g&&2<=Mn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Z(a[p]))continue;var h=D(a[p]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=l[b]||[];l[b]=A,A.push(h)}C(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function Lv(a){this.Aa=0,this.i=[],this.j=new as,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,a),this.cb=gs("retryDelaySeedMs",1e4,a),this.Wa=gs("forwardChannelMaxRetries",2,a),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new vv(a&&a.concurrentRequestLimit),this.Da=new LS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lv.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){ht(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Wv(this,null,this.W),rc(this)};function uh(a){if(Bv(a),a.G==3){var l=a.U++,h=An(a.I);if(Ae(h,"SID",a.K),Ae(h,"RID",l),Ae(h,"TYPE","terminate"),ms(a,h),l=new Xn(a,a.j,l),l.L=2,l.v=Xa(An(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Kv(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Ya(l)}Gv(a)}function nc(a){a.g&&(dh(a),a.g.cancel(),a.g=null)}function Bv(a){nc(a),a.u&&(c.clearTimeout(a.u),a.u=null),ic(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function rc(a){if(!Iv(a.h)&&!a.s){a.s=!0;var l=a.Ga;Xo||Z_(),es||(Xo(),es=!0),$d.add(l,a),a.B=0}}function HS(a,l){return Ev(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ss(y(a.Ga,a,l),zv(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new Xn(this,this.j,a),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=jv(this,b,l),h=An(this.I),Ae(h,"RID",a),Ae(h,"CVER",22),this.D&&Ae(h,"X-HTTP-Session-Id",this.D),ms(this,h),A&&(this.O?l="headers="+encodeURIComponent(String(Rv(A)))+"&"+l:this.m&&ch(h,this.m,A)),ah(this.h,b),this.Ua&&Ae(h,"TYPE","init"),this.P?(Ae(h,"$req",l),Ae(h,"SID","null"),b.T=!0,rh(b,h,null)):rh(b,h,l),this.G=2}}else this.G==3&&(a?Uv(this,a):this.i.length==0||Iv(this.h)||Uv(this))};function Uv(a,l){var h;l?h=l.l:h=a.U++;let p=An(a.I);Ae(p,"SID",a.K),Ae(p,"RID",h),Ae(p,"AID",a.T),ms(a,p),a.m&&a.o&&ch(p,a.m,a.o),h=new Xn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=jv(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ah(a.h,h),rh(h,p,l)}function ms(a,l){a.H&&Ie(a.H,function(h,p){Ae(l,p,h)}),a.l&&Dv({},function(h,p){Ae(l,p,h)})}function jv(a,l,h){h=Math.min(a.i.length,h);var p=a.l?y(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){let k=["count="+h];A==-1?0<h?(A=b[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let De=!0;for(let Ze=0;Ze<h;Ze++){let fe=b[Ze].g,nt=b[Ze].map;if(fe-=A,0>fe)A=Math.max(0,b[Ze].g-100),De=!1;else try{BS(nt,k,"req"+fe+"_")}catch{p&&p(nt)}}if(De){p=k.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function $v(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;Xo||Z_(),es||(Xo(),es=!0),$d.add(l,a),a.v=0}}function lh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ss(y(a.Fa,a),zv(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Hv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ss(y(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),nc(this),Hv(this))};function dh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Hv(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=An(a.qa);Ae(l,"RID","rpc"),Ae(l,"SID",a.K),Ae(l,"AID",a.T),Ae(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ae(l,"TO",a.ja),Ae(l,"TYPE","xmlhttp"),ms(a,l),a.m&&a.o&&ch(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Xa(An(l)),h.m=null,h.P=!0,mv(h,a)}n.Za=function(){this.C!=null&&(this.C=null,nc(this),lh(this),ht(19))};function ic(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function qv(a,l){var h=null;if(a.g==l){ic(a),dh(a),a.g=null;var p=2}else if(sh(a.h,l))h=l.D,wv(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var b=a.B;p=Wa(),dt(p,new hv(p,h)),rc(a)}else $v(a);else if(b=l.s,b==3||b==0&&0<l.X||!(p==1&&HS(a,l)||p==2&&lh(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),b){case 1:Vr(a,5);break;case 4:Vr(a,10);break;case 3:Vr(a,6);break;default:Vr(a,2)}}}function zv(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function Vr(a,l){if(a.j.info("Error code "+l),l==2){var h=y(a.fb,a),p=a.Xa;let b=!p;p=new Fr(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Za(p,"https"),Xa(p),b?FS(p.toString(),h):VS(p.toString(),h)}else ht(2);a.G=0,a.l&&a.l.sa(l),Gv(a),Bv(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Gv(a){if(a.G=0,a.ka=[],a.l){let l=Cv(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Wv(a,l,h){var p=h instanceof Fr?An(h):new Fr(h);if(p.g!="")l&&(p.g=l+"."+p.g),Ja(p,p.s);else{var b=c.location;p=b.protocol,l=l?l+"."+b.hostname:b.hostname,b=+b.port;var A=new Fr(null);p&&Za(A,p),l&&(A.g=l),b&&Ja(A,b),h&&(A.l=h),p=A}return h=a.D,l=a.ya,h&&l&&Ae(p,h,l),Ae(p,"VER",a.la),ms(a,p),p}function Kv(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Pe(new hs({eb:h})):new Pe(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qv(){}n=Qv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oc(){}oc.prototype.g=function(a,l){return new Tt(a,l)};function Tt(a,l){tt.call(this),this.g=new Lv(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!Z(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Z(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Pi(this)}S(Tt,tt),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){uh(this.g)},Tt.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Zd(a),a=h);l.i.push(new TS(l.Ya++,a)),l.G==3&&rc(l)},Tt.prototype.N=function(){this.g.l=null,delete this.j,uh(this.g),delete this.g,Tt.aa.N.call(this)};function Yv(a){Xd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(Yv,Xd);function Zv(){eh.call(this),this.status=1}S(Zv,eh);function Pi(a){this.g=a}S(Pi,Qv),Pi.prototype.ua=function(){dt(this.g,"a")},Pi.prototype.ta=function(a){dt(this.g,new Yv(a))},Pi.prototype.sa=function(a){dt(this.g,new Zv)},Pi.prototype.ra=function(){dt(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,Lm=Wn.createWebChannelTransport=function(){return new oc},Vm=Wn.getStatEventTarget=function(){return Wa()},Fm=Wn.Event=Or,Xl=Wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,_a=Wn.ErrorCode=Ka,fv.COMPLETE="complete",km=Wn.EventType=fv,cv.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Ao=Wn.WebChannel=cv,LL=Wn.FetchXmlHttpFactory=hs,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Om=Wn.XhrIo=Pe}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});var gb="@firebase/firestore";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var Yo="10.14.0";var Ei=new Er("@firebase/firestore");function va(){return Ei.logLevel}function B(n,...e){if(Ei.logLevel<=oe.DEBUG){let t=e.map(A_);Ei.debug(`Firestore (${Yo}): ${n}`,...t)}}function Qn(n,...e){if(Ei.logLevel<=oe.ERROR){let t=e.map(A_);Ei.error(`Firestore (${Yo}): ${n}`,...t)}}function Fo(n,...e){if(Ei.logLevel<=oe.WARN){let t=e.map(A_);Ei.warn(`Firestore (${Yo}): ${n}`,...t)}}function A_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function Ee(n,e){n||K()}function Q(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var En=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var id=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ye.UNAUTHENTICATED))}shutdown(){}},zm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Gm=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new En;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new En,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new En)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new id(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Ye(e)}},Wm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Km=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Wm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ym=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ee(this.o===void 0);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new Qm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function BL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var od=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=BL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function Vo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var We=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new We(0,0))}static max(){return new n(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Re=class n extends sd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},UL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class n extends sd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return UL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};var Zm=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Zm.UNKNOWN_ID=-1;function jL(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new We(t+1,0):new We(t,r));return new wi(i,q.empty(),e)}function $L(n){return new wi(n.readTime,n.key,-1)}var wi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),q.empty(),-1)}static max(){return new n(X.max(),q.empty(),-1)}};function HL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var qL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ba(n){return v(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==qL)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let d=u;t(e[d]).next(f=>{s[d]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function zL(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ua(n){return n.name==="IndexedDbTransactionError"}var Qb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pd(n){return n==null}function ba(n){return n===0&&1/n==-1/0}function GL(n){return typeof n=="number"&&Number.isInteger(n)&&!ba(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var WL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rz=[...WL,"documentOverlays"],KL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QL=KL,YL=[...QL,"indexConfiguration","indexState","indexEntries"];var iz=[...YL,"globals"];function mb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ai(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ve=class n{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ro(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ro(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ro(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ro(this.root,e,this.comparator,!0)}},Ro=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class n{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ad(this.data.getIterator())}getIteratorFrom(e){return new ad(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ad=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $t=class n{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ut(Pt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var cd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var ZL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(n){if(Ee(!!n),typeof n=="string"){let e=0,t=ZL.exec(n);if(Ee(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xr(n){return typeof n=="string"?lt.fromBase64String(n):lt.fromUint8Array(n)}function M_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function N_(n){let e=n.mapValue.fields.__previous_value__;return M_(e)?N_(e):e}function Ta(n){let e=Yn(n.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}var Xm=class{constructor(e,t,r,i,o,s,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},ud=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?M_(n)?4:Jb(n)?9007199254740991:Zb(n)?10:11:K()}function bn(n,e){if(n===e)return!0;let t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ta(n).isEqual(Ta(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Yn(i.timestampValue),c=Yn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return xr(i.bytesValue).isEqual(xr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),c=Ne(o.doubleValue);return s===c?ba(s)===ba(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Vo(n.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(mb(s)!==mb(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!bn(s[u],c[u])))return!1;return!0}(n,e);default:return K()}}function Sa(n,e){return(n.values||[]).find(t=>bn(t,e))!==void 0}function Lo(n,e){if(n===e)return 0;let t=Ci(n),r=Ci(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return yb(n.timestampValue,e.timestampValue);case 4:return yb(Ta(n),Ta(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(o,s){let c=xr(o),u=xr(s);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ge(c[d],u[d]);if(f!==0)return f}return ge(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=ge(Ne(o.latitude),Ne(s.latitude));return c!==0?c:ge(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return _b(n.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,d,f;let g=o.fields||{},y=s.fields||{},m=(c=g.value)===null||c===void 0?void 0:c.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,P=ge(((d=m?.values)===null||d===void 0?void 0:d.length)||0,((f=S?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:_b(m,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ed.mapValue&&s===ed.mapValue)return 0;if(o===ed.mapValue)return 1;if(s===ed.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),d=s.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let y=ge(u[g],f[g]);if(y!==0)return y;let m=Lo(c[u[g]],d[f[g]]);if(m!==0)return m}return ge(u.length,f.length)}(n.mapValue,e.mapValue);default:throw K()}}function yb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=Yn(n),r=Yn(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function _b(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Lo(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function Bo(n){return ey(n)}function ey(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Yn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ey(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ey(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function vb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ty(n){return!!n&&"integerValue"in n}function x_(n){return!!n&&"arrayValue"in n}function Ib(n){return!!n&&"nullValue"in n}function Eb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nd(n){return!!n&&"mapValue"in n}function Zb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ea(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ai(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ea(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ea(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Jb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Rt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(t)}setAll(e){let t=Pt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Ea(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ai(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ea(this.value))}};function Xb(n){let e=[];return Ai(n.fields,(t,r)=>{let i=new Pt([t]);if(nd(r)){let o=Xb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new $t(e)}var en=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Rt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Rt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Rt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Uo=class{constructor(e,t){this.position=e,this.inclusive=t}};function wb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Lo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bn(n.position[t],e.position[t]))return!1;return!0}var jo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function JL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ld=class{},qe=class n extends ld{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ry(e,t,r):t==="array-contains"?new sy(e,r):t==="in"?new ay(e,r):t==="not-in"?new cy(e,r):t==="array-contains-any"?new uy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new iy(e,r):new oy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Lo(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tn=class n extends ld{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return eT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function eT(n){return n.op==="and"}function tT(n){return XL(n)&&eT(n)}function XL(n){for(let e of n.filters)if(e instanceof tn)return!1;return!0}function ny(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+Bo(n.value);if(tT(n))return n.filters.map(e=>ny(e)).join(",");{let e=n.filters.map(t=>ny(t)).join(",");return`${n.op}(${e})`}}function nT(n,e){return n instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(n,e):n instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&nT(s,i.filters[c]),!0):!1}(n,e):void K()}function rT(n){return n instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${Bo(t.value)}`}(n):n instanceof tn?function(t){return t.op.toString()+" {"+t.getFilters().map(rT).join(" ,")+"}"}(n):"Filter"}var ry=class extends qe{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},iy=class extends qe{constructor(e,t){super(e,"in",t),this.keys=iT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},oy=class extends qe{constructor(e,t){super(e,"not-in",t),this.keys=iT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function iT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var sy=class extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return x_(t)&&Sa(t.arrayValue,this.value)}},ay=class extends qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Sa(this.value.arrayValue,t)}},cy=class extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Sa(this.value.arrayValue,t)}},uy=class extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!x_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sa(this.value.arrayValue,r))}};var ly=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function Db(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ly(n,e,t,r,i,o,s)}function R_(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ny(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ue=t}return e.ue}function P_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cb(n.startAt,e.startAt)&&Cb(n.endAt,e.endAt)}function dy(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Di=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function e2(n,e,t,r,i,o,s,c){return new Di(n,e,t,r,i,o,s,c)}function oT(n){return new Di(n)}function bb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sT(n){return n.collectionGroup!==null}function wa(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new ut(Pt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new jo(o,r))}),t.has(Pt.keyField().canonicalString())||e.ce.push(new jo(Pt.keyField(),r))}return e.ce}function Cn(n){let e=Q(n);return e.le||(e.le=t2(e,wa(n))),e.le}function t2(n,e){if(n.limitType==="F")return Db(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new jo(i.field,o)});let t=n.endAt?new Uo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uo(n.startAt.position,n.startAt.inclusive):null;return Db(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function hy(n,e){let t=n.filters.concat([e]);return new Di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fy(n,e,t){return new Di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Od(n,e){return P_(Cn(n),Cn(e))&&n.limitType===e.limitType}function aT(n){return`${R_(Cn(n))}|lt:${n.limitType}`}function Mo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rT(i)).join(", ")}]`),Pd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(Cn(n))}; limitType=${n.limitType})`}function kd(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of wa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let d=wb(s,c,u);return s.inclusive?d<=0:d<0}(r.startAt,wa(r),i)||r.endAt&&!function(s,c,u){let d=wb(s,c,u);return s.inclusive?d>=0:d>0}(r.endAt,wa(r),i))}(n,e)}function n2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cT(n){return(e,t)=>{let r=!1;for(let i of wa(n)){let o=r2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function r2(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,c){let u=s.data.field(o),d=c.data.field(o);return u!==null&&d!==null?Lo(u,d):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var Rr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Yb(this.inner)}size(){return this.innerSize}};var i2=new Ve(q.comparator);function Zn(){return i2}var uT=new Ve(q.comparator);function Ia(...n){let e=uT;for(let t of n)e=e.insert(t.key,t);return e}function lT(n){let e=uT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vi(){return Ca()}function dT(){return Ca()}function Ca(){return new Rr(n=>n.toString(),(n,e)=>n.isEqual(e))}var o2=new Ve(q.comparator),s2=new ut(q.comparator);function se(...n){let e=s2;for(let t of n)e=e.add(t);return e}var a2=new ut(ge);function c2(){return a2}function O_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(e)?"-0":e}}function hT(n){return{integerValue:""+n}}function u2(n,e){return GL(e)?hT(e):O_(n,e)}var $o=class{constructor(){this._=void 0}};function l2(n,e,t){return n instanceof Ho?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&M_(o)&&(o=N_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof bi?pT(n,e):n instanceof Ti?gT(n,e):function(i,o){let s=fT(i,o),c=Tb(s)+Tb(i.Pe);return ty(s)&&ty(i.Pe)?hT(c):O_(i.serializer,c)}(n,e)}function d2(n,e,t){return n instanceof bi?pT(n,e):n instanceof Ti?gT(n,e):t}function fT(n,e){return n instanceof qo?function(r){return ty(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ho=class extends $o{},bi=class extends $o{constructor(e){super(),this.elements=e}};function pT(n,e){let t=mT(e);for(let r of n.elements)t.some(i=>bn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ti=class extends $o{constructor(e){super(),this.elements=e}};function gT(n,e){let t=mT(e);for(let r of n.elements)t=t.filter(i=>!bn(i,r));return{arrayValue:{values:t}}}var qo=class extends $o{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Tb(n){return Ne(n.integerValue||n.doubleValue)}function mT(n){return x_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function h2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bi&&i instanceof bi||r instanceof Ti&&i instanceof Ti?Vo(r.elements,i.elements,bn):r instanceof qo&&i instanceof qo?bn(r.Pe,i.Pe):r instanceof Ho&&i instanceof Ho}(n.transform,e.transform)}var py=class{constructor(e,t){this.version=e,this.transformResults=t}},Kn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var zo=class{};function yT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Aa(n.key,Kn.none()):new Si(n.key,n.data,Kn.none());{let t=n.data,r=Rt.empty(),i=new ut(Pt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Tn(n.key,r,new $t(i.toArray()),Kn.none())}}function f2(n,e,t){n instanceof Si?function(i,o,s){let c=i.value.clone(),u=Ab(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Tn?function(i,o,s){if(!rd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=Ab(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(_T(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Da(n,e,t,r){return n instanceof Si?function(o,s,c,u){if(!rd(o.precondition,s))return c;let d=o.value.clone(),f=Mb(o.fieldTransforms,u,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tn?function(o,s,c,u){if(!rd(o.precondition,s))return c;let d=Mb(o.fieldTransforms,u,s),f=s.data;return f.setAll(_T(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,c){return rd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function p2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=fT(r.transform,i||null);o!=null&&(t===null&&(t=Rt.empty()),t.set(r.field,o))}return t||null}function Sb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(o,s)=>h2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Si=class extends zo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tn=class extends zo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function _T(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ab(n,e,t){let r=new Map;Ee(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,d2(s,c,t[i]))}return r}function Mb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,l2(o,s,e))}return r}var Aa=class extends zo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},gy=class extends zo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var my=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&f2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Da(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Da(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=dT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=yT(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(t,r)=>Sb(t,r))&&Vo(this.baseMutations,e.baseMutations,(t,r)=>Sb(t,r))}},yy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ee(e.mutations.length===r.length);let i=function(){return o2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var _y=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var vy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $e,de;function g2(n){switch(n){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function vT(n){if(n===void 0)return Qn("GRPC error has no .code"),M.UNKNOWN;switch(n){case $e.OK:return M.OK;case $e.CANCELLED:return M.CANCELLED;case $e.UNKNOWN:return M.UNKNOWN;case $e.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case $e.INTERNAL:return M.INTERNAL;case $e.UNAVAILABLE:return M.UNAVAILABLE;case $e.UNAUTHENTICATED:return M.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case $e.NOT_FOUND:return M.NOT_FOUND;case $e.ALREADY_EXISTS:return M.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return M.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case $e.ABORTED:return M.ABORTED;case $e.OUT_OF_RANGE:return M.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return M.UNIMPLEMENTED;case $e.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(de=$e||($e={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var Nb=null;function m2(){return new TextEncoder}var y2=new Mr([4294967295,4294967295],0);function xb(n){let e=m2().encode(n),t=new Pm;return t.update(e),new Uint8Array(t.digest())}function Rb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mr([t,r],0),new Mr([i,o],0)]}var Iy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ii(`Invalid padding: ${t}`);if(r<0)throw new Ii(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ii(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ii(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Mr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Mr.fromNumber(r)));return i.compare(y2)===1&&(i=new Mr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=xb(e),[r,i]=Rb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.Ie===0)return;let t=xb(e),[r,i]=Rb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ii=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ma.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Ve(ge),Zn(),se())}},Ma=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var Oo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},hd=class{constructor(e,t){this.targetId=e,this.me=t}},fd=class{constructor(e,t,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},pd=class{constructor(){this.fe=0,this.ge=Ob(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Ma(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ob()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ey=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=Pb(),this.Qe=new Ve(ge)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(dy(o))if(r===0){let s=new q(o.path);this.Ue(t,s,en.newNoDocument(s,X.min()))}else Ee(r===1);else{let s=this.Ye(t);if(s!==r){let c=this.Ze(e),u=c?this.Xe(c,e,s):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}Nb?.et(function(f,g,y,m,S){var P,R,$,Z,re,ve;let Ke={localCacheCount:f,existenceFilterCount:g.count,databaseId:y.database,projectId:y.projectId},Ie=g.unchangedNames;return Ie&&(Ke.bloomFilter={applied:S===0,hashCount:(P=Ie?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Z=($=(R=Ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||$===void 0?void 0:$.length)!==null&&Z!==void 0?Z:0,padding:(ve=(re=Ie?.bits)===null||re===void 0?void 0:re.padding)!==null&&ve!==void 0?ve:0,mightContain:C=>{var _;return(_=m?.mightContain(C))!==null&&_!==void 0&&_}}),Ke}(s,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=xr(r).toUint8Array()}catch(u){if(u instanceof cd)return Fo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Iy(s,i,o)}catch(u){return Fo(u instanceof Ii?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let c=this.Je(s);if(c){if(o.current&&dy(c.target)){let u=new q(c.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,en.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new dd(e,t,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=Pb(),this.Qe=new Ve(ge),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ut(ge),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Pb(){return new Ve(q.comparator)}function Ob(){return new Ve(q.comparator)}var _2={asc:"ASCENDING",desc:"DESCENDING"},v2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I2={and:"AND",or:"OR"},wy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Cy(n,e){return n.useProto3Json||Pd(e)?e:{value:e}}function gd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E2(n,e){return gd(n,e.toTimestamp())}function Dn(n){return Ee(!!n),X.fromTimestamp(function(t){let r=Yn(t);return new We(r.seconds,r.nanos)}(n))}function k_(n,e){return Dy(n,e).canonicalString()}function Dy(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ET(n){let e=Re.fromString(n);return Ee(TT(e)),e}function by(n,e){return k_(n.databaseId,e.path)}function Bm(n,e){let t=ET(e);if(t.get(1)!==n.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(CT(t))}function wT(n,e){return k_(n.databaseId,e)}function w2(n){let e=ET(n);return e.length===4?Re.emptyPath():CT(e)}function Ty(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CT(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function kb(n,e,t){return{name:by(n,e),fields:t.value.mapValue.fields}}function C2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(Ee(f===void 0||typeof f=="string"),lt.fromBase64String(f||"")):(Ee(f===void 0||f instanceof Buffer||f instanceof Uint8Array),lt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(d){let f=d.code===void 0?M.UNKNOWN:vT(d.code);return new L(f,d.message||"")}(s);t=new fd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bm(n,r.document.name),o=Dn(r.document.updateTime),s=r.document.createTime?Dn(r.document.createTime):X.min(),c=new Rt({mapValue:{fields:r.document.fields}}),u=en.newFoundDocument(i,o,s,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new Oo(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bm(n,r.document),o=r.readTime?Dn(r.readTime):X.min(),s=en.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Oo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bm(n,r.document),o=r.removedTargetIds||[];t=new Oo([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new vy(i,o),c=r.targetId;t=new hd(c,s)}}return t}function D2(n,e){let t;if(e instanceof Si)t={update:kb(n,e.key,e.value)};else if(e instanceof Aa)t={delete:by(n,e.key)};else if(e instanceof Tn)t={update:kb(n,e.key,e.data),updateMask:P2(e.fieldMask)};else{if(!(e instanceof gy))return K();t={verify:by(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Ho)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ti)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof qo)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:E2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function b2(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Dn(i.updateTime):Dn(o);return s.isEqual(X.min())&&(s=Dn(o)),new py(s,i.transformResults||[])}(t,e))):[]}function T2(n,e){return{documents:[wT(n,e.path)]}}function S2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wT(n,i);let o=function(d){if(d.length!==0)return bT(tn.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:No(y.field),direction:N2(y.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Cy(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function A2(n){let e=w2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ee(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(g){let y=DT(g);return y instanceof tn&&tT(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(y=>function(S){return new jo(xo(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(g){let y;return y=typeof g=="object"?g.value:g,Pd(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(g){let y=!!g.before,m=g.values||[];return new Uo(m,y)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let y=!g.before,m=g.values||[];return new Uo(m,y)}(t.endAt)),e2(e,i,s,o,c,"F",u,d)}function M2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=xo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=xo(t.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=xo(t.unaryFilter.field);return qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=xo(t.unaryFilter.field);return qe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return qe.create(xo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return tn.create(t.compositeFilter.filters.map(r=>DT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function N2(n){return _2[n]}function x2(n){return v2[n]}function R2(n){return I2[n]}function No(n){return{fieldPath:n.canonicalString()}}function xo(n){return Pt.fromServerFormat(n.fieldPath)}function bT(n){return n instanceof qe?function(t){if(t.op==="=="){if(Eb(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(Ib(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Eb(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(Ib(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:x2(t.op),value:t.value}}}(n):n instanceof tn?function(t){let r=t.getFilters().map(i=>bT(i));return r.length===1?r[0]:{compositeFilter:{op:R2(t.op),filters:r}}}(n):K()}function P2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Na=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),c=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Sy=class{constructor(e){this.ct=e}};function O2(n){let e=A2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fy(e,e.limit,"L"):e}var md=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ba(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Yn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Jb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Zb(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(c)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};md.vt=new md;var Ay=class{constructor(){this.un=new My}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(wi.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},My=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ut(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Re.comparator)).toArray()}};var sz=new Uint8Array(0);var In=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var xa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Ny=class{constructor(){this.changes=new Rr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ry=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Da(r.mutation,i,$t.empty(),We.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=vi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ia();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=vi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=Zn(),s=Ca(),c=function(){return Ca()}();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Tn)?o=o.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),Da(f.mutation,d,f.mutation.getFieldMask(),We.now())):s.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new xy(f,(g=s.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Ca(),i=new Ve((s,c)=>s-c),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||$t.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=dT();f.forEach(y=>{if(!o.has(y)){let m=yT(t.get(y),r.get(y));m!==null&&g.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(vi()),c=-1,u=o;return s.next(d=>O.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,se())).next(f=>({batchId:c,changes:lT(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Ia();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ia();return this.indexManager.getCollectionParents(e,o).next(c=>O.forEach(c,u=>{let d=function(g,y){return new Di(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,y)=>{s=s.insert(g,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,d)=>{let f=d.getKey();s.get(f)===null&&(s=s.insert(f,en.newInvalidDocument(f)))});let c=Ia();return s.forEach((u,d)=>{let f=o.get(u);f!==void 0&&Da(f.mutation,d,$t.empty(),We.now()),kd(t,d)&&(c=c.insert(u,d))}),c})}};var Py=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Dn(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:O2(i.bundledQuery),readTime:Dn(i.readTime)}}(t)),O.resolve()}};var Oy=class{constructor(){this.overlays=new Ve(q.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vi();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=vi(),o=t.length+1,s=new q(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ve((d,f)=>d-f),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=o.get(d.largestBatchId);f===null&&(f=vi(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=vi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return O.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _y(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var ky=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Ra=class{constructor(){this.Tr=new ut(He.Er),this.dr=new ut(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new He(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new He(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new Re([])),r=new He(t,e),i=new He(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new Re([])),r=new He(t,e),i=new He(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new He(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},He=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||ge(e.wr,t.wr)}static Ar(e,t){return ge(e.wr,t.wr)||q.comparator(e.key,t.key)}};var Fy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ut(He.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new my(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.br=this.br.add(new He(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new He(t,0),i=new He(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let c=this.Dr(s.wr);o.push(c)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(ge);return t.forEach(i=>{let o=new He(i,0),s=new He(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],c=>{r=r.add(c.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new He(new q(o),0),c=new ut(ge);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},s),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ee(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let o=new He(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new He(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Vy=class{constructor(e){this.Mr=e,this.docs=function(){return new Ve(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let r=Zn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():en.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Zn(),s=t.path,c=new q(s.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||HL($L(f),r)<=0||(i.has(f.key)||kd(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ly(this)}getSize(e){return O.resolve(this.size)}},Ly=class extends Ny{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var By=class{constructor(e){this.persistence=e,this.Nr=new Rr(t=>R_(t),P_),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ra,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new xa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var Uy=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qb(0),this.Kr=!1,this.Kr=!0,this.$r=new ky,this.referenceDelegate=e(this),this.Ur=new By(this),this.indexManager=new Ay,this.remoteDocumentCache=function(i){return new Vy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Sy(t),this.Gr=new Py(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Fy(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new jy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},jy=class extends Jm{constructor(e){super(),this.currentSequenceNumber=e}},$y=class n{constructor(e){this.persistence=e,this.Jr=new Ra,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Hy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var qy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GD()?8:zL(Qe())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new qy;return this.Xi(e,t,s).next(c=>{if(o.result=c,this.zi)return this.es(e,t,s,c.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(va()<=oe.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(va()<=oe.DEBUG&&B("QueryEngine","Query:",Mo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(va()<=oe.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):O.resolve())}Yi(e,t){if(bb(t))return O.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fy(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,s,u.readTime)?this.Yi(e,fy(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return bb(t)||i.isEqual(X.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?O.resolve(null):(va()<=oe.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mo(t)),this.rs(e,s,t,jL(i,-1)).next(c=>c))})}ts(e,t){let r=new ut(cT(e));return t.forEach((i,o)=>{kd(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return va()<=oe.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Mo(t)),this.Ji.getDocumentsMatchingQuery(e,t,wi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Gy=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ve(ge),this._s=new Rr(o=>R_(o),P_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ry(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function k2(n,e,t,r){return new Gy(n,e,t,r)}function ST(n,e){return v(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=se();for(let d of i){s.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of o){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:c}))})})})}function F2(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let g=d.batch,y=g.keys(),m=O.resolve();return y.forEach(S=>{m=m.next(()=>f.getEntry(u,S)).next(P=>{let R=d.docVersions.get(S);Ee(R!==null),P.version.compareTo(R)<0&&(g.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),m.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function AT(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function V2(n,e){let t=Q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let y=i.get(g);if(!y)return;c.push(t.Ur.removeMatchingKeys(o,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,f.addedDocuments,g)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?m=m.withResumeToken(lt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(g,m),function(P,R,$){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(y,m,f)&&c.push(t.Ur.updateTargetData(o,m))});let u=Zn(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(L2(o,s,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(X.min())){let f=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return O.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.os=i,o))}function L2(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Zn();return t.forEach((c,u)=>{let d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):B("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function B2(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function U2(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Na(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Wy(n,e,t){return v(this,null,function*(){let r=Q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ua(s))throw s;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Fb(n,e,t){let r=Q(n),i=X.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,f){let g=Q(u),y=g._s.get(f);return y!==void 0?O.resolve(g.os.get(y)):g.Ur.getTargetData(d,f)}(r,s,Cn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:se())).next(c=>(j2(r,n2(e),c),{documents:c,Ts:o})))}function j2(n,e,t){let r=n.us.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var yd=class{constructor(){this.activeTargetIds=c2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ky=class{constructor(){this.so=new yd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qy=class{_o(e){}shutdown(){}};var _d=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var td=null;function Um(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}var $2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Yy=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ct="WebChannelConnection",Zy=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let c=Um(),u=this.xo(t,r.toUriEncodedString());B("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(t,u,d,i).then(f=>(B("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Fo("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,o,s,c){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=$2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Um();return new Promise((s,c)=>{let u=new Om;u.setWithCredentials(!0),u.listenOnce(km.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _a.NO_ERROR:let f=u.getResponseJson();B(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case _a.TIMEOUT:B(ct,`RPC '${e}' ${o} timed out`),c(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case _a.HTTP_ERROR:let g=u.getStatus();if(B(ct,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let S=function(R){let $=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf($)>=0?$:M.UNKNOWN}(m.status);c(new L(S,m.message))}else c(new L(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{B(ct,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);B(ct,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Um(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Lm(),c=Vm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");B(ct,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=s.createWebChannel(f,u),y=!1,m=!1,S=new Yy({Io:R=>{m?B(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(B(ct,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),B(ct,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),P=(R,$,Z)=>{R.listen($,re=>{try{Z(re)}catch(ve){setTimeout(()=>{throw ve},0)}})};return P(g,Ao.EventType.OPEN,()=>{m||(B(ct,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),P(g,Ao.EventType.CLOSE,()=>{m||(m=!0,B(ct,`RPC '${e}' stream ${i} transport closed`),S.So())}),P(g,Ao.EventType.ERROR,R=>{m||(m=!0,Fo(ct,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new L(M.UNAVAILABLE,"The operation could not be completed")))}),P(g,Ao.EventType.MESSAGE,R=>{var $;if(!m){let Z=R.data[0];Ee(!!Z);let re=Z,ve=re.error||(($=re[0])===null||$===void 0?void 0:$.error);if(ve){B(ct,`RPC '${e}' stream ${i} received error:`,ve);let Ke=ve.status,Ie=function(E){let w=$e[E];if(w!==void 0)return vT(w)}(Ke),C=ve.message;Ie===void 0&&(Ie=M.INTERNAL,C="Unknown error status: "+Ke+" with message "+ve.message),m=!0,S.So(new L(Ie,C)),g.close()}else B(ct,`RPC '${e}' stream ${i} received:`,Z),S.bo(Z)}}),P(c,Fm.STAT_EVENT,R=>{R.stat===Xl.PROXY?B(ct,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Xl.NOPROXY&&B(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function jm(){return typeof document<"u"?document:null}function Fd(n){return new wy(n,!0)}var vd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Id=class{constructor(e,t,r,i,o,s,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vd(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Jy=class extends Id{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=C2(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Dn(s.readTime):X.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Ty(this.serializer),t.addTarget=function(o,s){let c,u=s.target;if(c=dy(u)?{documents:T2(o,u)}:{query:S2(o,u)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=IT(o,s.resumeToken);let d=Cy(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(X.min())>0){c.readTime=gd(o,s.snapshotVersion.toTimestamp());let d=Cy(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=M2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Ty(this.serializer),t.removeTarget=e,this.a_(t)}},Xy=class extends Id{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=b2(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Ty(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>D2(this.serializer,r))};this.a_(t)}};var e_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Dy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Lo(e,Dy(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},t_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qn(t),this.D_=!1):B("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var n_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Mi(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let d=Q(u);d.L_.add(4),yield ja(d),d.q_.set("Unknown"),d.L_.delete(4),yield Vd(d)})}(this))}))}),this.q_=new t_(r,i)}};function Vd(n){return v(this,null,function*(){if(Mi(n))for(let e of n.B_)yield e(!0)})}function ja(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function MT(n,e){let t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),B_(t)?L_(t):Zo(t).r_()&&V_(t,e))}function F_(n,e){let t=Q(n),r=Zo(t);t.N_.delete(e),r.r_()&&NT(t,e),t.N_.size===0&&(r.r_()?r.o_():Mi(t)&&t.q_.set("Unknown"))}function V_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zo(n).A_(e)}function NT(n,e){n.Q_.xe(e),Zo(n).R_(e)}function L_(n){n.Q_=new Ey({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Zo(n).start(),n.q_.v_()}function B_(n){return Mi(n)&&!Zo(n).n_()&&n.N_.size>0}function Mi(n){return Q(n).L_.size===0}function xT(n){n.Q_=void 0}function H2(n){return v(this,null,function*(){n.q_.set("Online")})}function q2(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{V_(n,e)})})}function z2(n,e){return v(this,null,function*(){xT(n),B_(n)?(n.q_.M_(e),L_(n)):n.q_.set("Unknown")})}function G2(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof fd&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ed(n,r)}else if(e instanceof Oo?n.Q_.Ke(e):e instanceof hd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let r=yield AT(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.Q_.rt(s);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.N_.get(d);f&&o.N_.set(d,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,d)=>{let f=o.N_.get(u);if(!f)return;o.N_.set(u,f.withResumeToken(lt.EMPTY_BYTE_STRING,f.snapshotVersion)),NT(o,u);let g=new Na(f.target,u,d,f.sequenceNumber);V_(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Ed(n,r)}})}function Ed(n,e,t){return v(this,null,function*(){if(!Ua(e))throw e;n.L_.add(1),yield ja(n),n.q_.set("Offline"),t||(t=()=>AT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Vd(n)}))})}function RT(n,e){return e().catch(t=>Ed(n,t,e))}function Ld(n){return v(this,null,function*(){let e=Q(n),t=Pr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;W2(e);)try{let i=yield B2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,K2(e,i)}catch(i){yield Ed(e,i)}PT(e)&&OT(e)})}function W2(n){return Mi(n)&&n.O_.length<10}function K2(n,e){n.O_.push(e);let t=Pr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function PT(n){return Mi(n)&&!Pr(n).n_()&&n.O_.length>0}function OT(n){Pr(n).start()}function Q2(n){return v(this,null,function*(){Pr(n).p_()})}function Y2(n){return v(this,null,function*(){let e=Pr(n);for(let t of n.O_)e.m_(t.mutations)})}function Z2(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=yy.from(r,e,t);yield RT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ld(n)})}function J2(n,e){return v(this,null,function*(){e&&Pr(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return g2(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();Pr(r).s_(),yield RT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ld(r)}})}(n,e)),PT(n)&&OT(n)})}function Vb(n,e){return v(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=Mi(t);t.L_.add(3),yield ja(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Vd(t)})}function X2(n,e){return v(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield Vd(t)):e||(t.L_.add(2),yield ja(t),t.q_.set("Unknown"))})}function Zo(n){return n.K_||(n.K_=function(t,r,i){let o=Q(t);return o.w_(),new Jy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:H2.bind(null,n),Ro:q2.bind(null,n),mo:z2.bind(null,n),d_:G2.bind(null,n)}),n.B_.push(e=>v(null,null,function*(){e?(n.K_.s_(),B_(n)?L_(n):n.q_.set("Unknown")):(yield n.K_.stop(),xT(n))}))),n.K_}function Pr(n){return n.U_||(n.U_=function(t,r,i){let o=Q(t);return o.w_(),new Xy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q2.bind(null,n),mo:J2.bind(null,n),f_:Y2.bind(null,n),g_:Z2.bind(null,n)}),n.B_.push(e=>v(null,null,function*(){e?(n.U_.s_(),yield Ld(n)):(yield n.U_.stop(),n.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var r_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function U_(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),Ua(n))return new L(M.UNAVAILABLE,`${e}: ${n}`);throw n}var wd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Ia(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Cd=class{constructor(){this.W_=new Ve(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Go=class n{constructor(e,t,r,i,o,s,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,wd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var i_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},o_=class{constructor(){this.queries=Lb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=Lb(),o.forEach((s,c)=>{for(let u of c.j_)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function Lb(){return new Rr(n=>aT(n),Od)}function eB(n,e){return v(this,null,function*(){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new i_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=U_(s,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&j_(t)})}function tB(n,e){return v(this,null,function*(){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function nB(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.j_)c.X_(i)&&(r=!0);s.z_=i}}r&&j_(t)}function rB(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function j_(n){n.Y_.forEach(e=>{e.next()})}var s_,Bb;(Bb=s_||(s_={})).ea="default",Bb.Cache="cache";var a_=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==s_.Cache}};var Dd=class{constructor(e){this.key=e}},bd=class{constructor(e){this.key=e}},c_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=cT(e),this.Ra=new wd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Cd,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let y=i.get(f),m=kd(this.query,g)?g:null,S=!!y&&this.mutatedKeys.has(y.key),P=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;y&&m?y.data.isEqual(m.data)?S!==P&&(r.track({type:3,doc:m}),R=!0):this.ga(y,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Aa(m,u)>0||d&&this.Aa(m,d)<0)&&(c=!0)):!y&&m?(r.track({type:0,doc:m}),R=!0):y&&!m&&(r.track({type:1,doc:y}),R=!0,(u||d)&&(c=!0)),R&&(m?(s=s.add(m),o=P?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:s,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((f,g)=>function(m,S){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return P(m)-P(S)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,s.length!==0||d?{snapshot:new Go(this.query,e.Ra,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new bd(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Dd(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},u_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},l_=class{constructor(e){this.key=e,this.va=!1}},d_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Rr(c=>aT(c),Od),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(q.comparator),this.Na=new Map,this.La=new Ra,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function iB(n,e,t=!0){return v(this,null,function*(){let r=UT(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield kT(r,e,t,!0),i})}function oB(n,e){return v(this,null,function*(){let t=UT(n);yield kT(t,e,!0,!1)})}function kT(n,e,t,r){return v(this,null,function*(){let i=yield U2(n.localStore,Cn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield sB(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&MT(n.remoteStore,i),c})}function sB(n,e,t,r,i){return v(this,null,function*(){n.Ka=(g,y,m)=>function(P,R,$,Z){return v(this,null,function*(){let re=R.view.ma($);re.ns&&(re=yield Fb(P.localStore,R.query,!1).then(({documents:C})=>R.view.ma(C,re)));let ve=Z&&Z.targetChanges.get(R.targetId),Ke=Z&&Z.targetMismatches.get(R.targetId)!=null,Ie=R.view.applyChanges(re,P.isPrimaryClient,ve,Ke);return jb(P,R.targetId,Ie.wa),Ie.snapshot})}(n,g,y,m);let o=yield Fb(n.localStore,e,!0),s=new c_(e,o.Ts),c=s.ma(o.documents),u=Ma.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,u);jb(n,t,d.wa);let f=new u_(e,t,s);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function aB(n,e,t){return v(this,null,function*(){let r=Q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Od(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Wy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&F_(r.remoteStore,i.targetId),h_(r,i.targetId)}).catch(Ba))):(h_(r,i.targetId),yield Wy(r.localStore,i.targetId,!0))})}function cB(n,e){return v(this,null,function*(){let t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),F_(t.remoteStore,r.targetId))})}function uB(n,e,t){return v(this,null,function*(){let r=mB(n);try{let i=yield function(s,c){let u=Q(s),d=We.now(),f=c.reduce((m,S)=>m.add(S.key),se()),g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let S=Zn(),P=se();return u.cs.getEntries(m,f).next(R=>{S=R,S.forEach(($,Z)=>{Z.isValidDocument()||(P=P.add($))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,S)).next(R=>{g=R;let $=[];for(let Z of c){let re=p2(Z,g.get(Z.key).overlayedDocument);re!=null&&$.push(new Tn(Z.key,re,Xb(re.value.mapValue),Kn.exists(!0)))}return u.mutationQueue.addMutationBatch(m,d,$,c)}).next(R=>{y=R;let $=R.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(m,R.batchId,$)})}).then(()=>({batchId:y.batchId,changes:lT(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let d=s.Ba[s.currentUser.toKey()];d||(d=new Ve(ge)),d=d.insert(c,u),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,t),yield $a(r,i.changes),yield Ld(r.remoteStore)}catch(i){let o=U_(i,"Failed to persist write");t.reject(o)}})}function FT(n,e){return v(this,null,function*(){let t=Q(n);try{let r=yield V2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ee(s.va):i.removedDocuments.size>0&&(Ee(s.va),s.va=!1))}),yield $a(t,r,e)}catch(r){yield Ba(r)}})}function Ub(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=Q(s);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let y of g.j_)y.Z_(c)&&(d=!0)}),d&&j_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lB(n,e,t){return v(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ve(q.comparator);s=s.insert(o,en.newNoDocument(o,X.min()));let c=se().add(o),u=new dd(X.min(),new Map,new Ve(ge),s,c);yield FT(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),$_(r)}else yield Wy(r.localStore,e,!1).then(()=>h_(r,e,t)).catch(Ba)})}function dB(n,e){return v(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield F2(t.localStore,e);LT(t,r,null),VT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $a(t,i)}catch(i){yield Ba(i)}})}function hB(n,e,t){return v(this,null,function*(){let r=Q(n);try{let i=yield function(s,c){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(Ee(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);LT(r,e,t),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $a(r,i)}catch(i){yield Ba(i)}})}function VT(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function LT(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function h_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||BT(n,r)})}function BT(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(F_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$_(n))}function jb(n,e,t){for(let r of t)r instanceof Dd?(n.La.addReference(r.key,e),fB(n,r)):r instanceof bd?(B("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||BT(n,r.key)):K()}function fB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(B("SyncEngine","New document in limbo: "+t),n.xa.add(r),$_(n))}function $_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(Re.fromString(e)),r=n.qa.next();n.Na.set(r,new l_(t)),n.Oa=n.Oa.insert(t,r),MT(n.remoteStore,new Na(Cn(oT(t.path)),r,"TargetPurposeLimboResolution",Qb.oe))}}function $a(n,e,t){return v(this,null,function*(){let r=Q(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{s.push(r.Ka(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=Hy.Wi(u.targetId,d);o.push(g)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,d){return v(this,null,function*(){let f=Q(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(d,y=>O.forEach(y.$i,m=>f.persistence.referenceDelegate.addReference(g,y.targetId,m)).next(()=>O.forEach(y.Ui,m=>f.persistence.referenceDelegate.removeReference(g,y.targetId,m)))))}catch(g){if(!Ua(g))throw g;B("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let y=g.targetId;if(!g.fromCache){let m=f.os.get(y),S=m.snapshotVersion,P=m.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(y,P)}}})}(r.localStore,o))})}function pB(n,e){return v(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield ST(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $a(t,r.hs)}})}function gB(n,e){let t=Q(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let c=t.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}function UT(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lB.bind(null,e),e.Ca.d_=nB.bind(null,e.eventManager),e.Ca.$a=rB.bind(null,e.eventManager),e}function mB(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hB.bind(null,e),e}var $b=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Fd(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return k2(this.persistence,new zy,t.initialUser,this.serializer)}Ga(t){return new Uy($y.Zr,this.serializer)}Wa(t){return new Ky}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var yB=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ub(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pB.bind(null,this.syncEngine),yield X2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new o_}()}createDatastore(t){let r=Fd(t.databaseInfo.databaseId),i=function(s){return new Zy(s)}(t.databaseInfo);return function(s,c,u,d){return new e_(s,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,u){return new n_(i,o,s,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>Ub(this.syncEngine,r,0),function(){return _d.D()?new _d:new Qy}())}createSyncEngine(t,r){return function(o,s,c,u,d,f,g){let y=new d_(o,s,c,u,d,f);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=Q(o);B("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ja(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var f_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var p_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=od.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){B("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=U_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $m(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield ST(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Hb(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _B(n);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Vb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Vb(e.remoteStore,i)),n._onlineComponents=e})}function _B(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $m(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fo("Error using user provided cache. Falling back to memory cache: "+t),yield $m(n,new $b)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield $m(n,new $b);return n._offlineComponents})}function jT(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield Hb(n,n._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield Hb(n,new yB))),n._onlineComponents})}function vB(n){return jT(n).then(e=>e.syncEngine)}function IB(n){return v(this,null,function*(){let e=yield jT(n),t=e.eventManager;return t.onListen=iB.bind(null,e.syncEngine),t.onUnlisten=aB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cB.bind(null,e.syncEngine),t})}function EB(n,e,t={}){let r=new En;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,c,u,d){let f=new f_({next:y=>{f.Za(),s.enqueueAndForget(()=>tB(o,g)),y.fromCache&&u.source==="server"?d.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),g=new a_(c,f,{includeMetadataChanges:!0,_a:!0});return eB(o,g)}(yield IB(n),n.asyncQueue,e,t,r)})),r.promise}function $T(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var qb=new Map;function HT(n,e,t){if(!t)throw new L(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wB(n,e,t,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zb(n){if(!q.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gb(n){if(q.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Td(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bd(n);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Sd=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qm;switch(r.type){case"firstParty":return new Km(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=qb.get(t);r&&(B("ComponentProvider","Removing Datastore"),qb.delete(t),r.terminate())}(this),Promise.resolve()}};function qT(n,e,t,r={}){var i;let o=(n=Td(n,Wo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ye.MOCK_USER;else{c=UD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ye(d)}n._authCredentials=new zm(new id(c,u))}}var Ko=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ht=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Nr=class n extends Ko{constructor(e,t,r){super(e,t,oT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function zT(n,e,...t){if(n=Ue(n),HT("collection","path",e),n instanceof Wo){let r=Re.fromString(e,...t);return Gb(r),new Nr(n,null,r)}{if(!(n instanceof Ht||n instanceof Nr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return Gb(r),new Nr(n.firestore,null,r)}}function GT(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=od.newId()),HT("doc","path",e),n instanceof Wo){let r=Re.fromString(e,...t);return zb(r),new Ht(n,null,new q(r))}{if(!(n instanceof Ht||n instanceof Nr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return zb(r),new Ht(n.firestore,n instanceof Nr?n.converter:null,new q(r))}}var Ad=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vd(this,"async_queue_retry"),this.Vu=()=>{let r=jm();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=jm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=jm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new En;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ua(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(r);throw Qn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=r_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Pa=class extends Wo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ad,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ad(e),this._firestoreClient=void 0,yield e}})}};function WT(n,e){let t=typeof n=="object"?n:wo(),r=typeof n=="string"?n:e||"(default)",i=aa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=BD("firestore");o&&qT(i,...o)}return i}function H_(n){if(n._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CB(n),n._firestoreClient}function CB(n){var e,t,r;let i=n._freezeSettings(),o=function(c,u,d,f){return new Xm(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,$T(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new p_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Oa=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(lt.fromBase64String(e))}catch(t){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ka=class{constructor(e){this._methodName=e}};var Fa=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Va=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var DB=/^__.*__$/,g_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Si(e,this.data,t,this.fieldTransforms)}},Md=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function KT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var m_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KT(this.Cu)&&DB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},y_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Fd(e)}Qu(e,t,r,i=!1){return new m_({Cu:e,methodName:t,qu:r,path:Pt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function QT(n){let e=n._freezeSettings(),t=Fd(n._databaseId);return new y_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bB(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);q_("Data must be an object, but it was:",s,r);let c=YT(r,s),u,d;if(o.merge)u=new $t(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let g of o.mergeFields){let y=__(e,g,t);if(!s.contains(y))throw new L(M.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);JT(f,y)||f.push(y)}u=new $t(f),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new g_(new Rt(c),u,d)}var Nd=class n extends ka{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function TB(n,e,t,r){let i=n.Qu(1,e,t);q_("Data must be an object, but it was:",i,r);let o=[],s=Rt.empty();Ai(r,(u,d)=>{let f=z_(e,u,t);d=Ue(d);let g=i.Nu(f);if(d instanceof Nd)o.push(f);else{let y=Ha(d,g);y!=null&&(o.push(f),s.set(f,y))}});let c=new $t(o);return new Md(s,c,i.fieldTransforms)}function SB(n,e,t,r,i,o){let s=n.Qu(1,e,t),c=[__(e,r,t)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(__(e,o[y])),u.push(o[y+1]);let d=[],f=Rt.empty();for(let y=c.length-1;y>=0;--y)if(!JT(d,c[y])){let m=c[y],S=u[y];S=Ue(S);let P=s.Nu(m);if(S instanceof Nd)d.push(m);else{let R=Ha(S,P);R!=null&&(d.push(m),f.set(m,R))}}let g=new $t(d);return new Md(f,g,s.fieldTransforms)}function AB(n,e,t,r=!1){return Ha(t,n.Qu(r?4:3,e))}function Ha(n,e){if(ZT(n=Ue(n)))return q_("Unsupported field value:",e,n),YT(n,e);if(n instanceof ka)return function(r,i){if(!KT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=Ha(c,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=We.fromDate(r);return{timestampValue:gd(i.serializer,o)}}if(r instanceof We){let o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gd(i.serializer,o)}}if(r instanceof Fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oa)return{bytesValue:IT(i.serializer,r._byteString)};if(r instanceof Ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:k_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Va)return function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return O_(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bd(r)}`)}(n,e)}function YT(n,e){let t={};return Yb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(n,(r,i)=>{let o=Ha(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ZT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof We||n instanceof Fa||n instanceof Oa||n instanceof Ht||n instanceof ka||n instanceof Va)}function q_(n,e,t){if(!ZT(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Bd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function __(n,e,t){if((e=Ue(e))instanceof Qo)return e._internalPath;if(typeof e=="string")return z_(n,e);throw xd("Field path arguments must be of type string or ",n,!1,void 0,t)}var MB=new RegExp("[~\\*/\\[\\]]");function z_(n,e,t){if(e.search(MB)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qo(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,c+n+u)}function JT(n,e){return n.some(t=>t.isEqual(e))}var Rd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new v_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(XT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},v_=class extends Rd{data(){return super.data()}};function XT(n,e){return typeof e=="string"?z_(n,e):e instanceof Qo?e._internalPath:e._delegate._internalPath}function NB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var La=class{},I_=class extends La{};function eS(n,e,...t){let r=[];e instanceof La&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof w_).length,c=o.filter(u=>u instanceof E_).length;if(s>1||s>0&&c>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var E_=class n extends I_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return tS(e._query,t),new Ko(e.firestore,e.converter,hy(e._query,t))}_parse(e){let t=QT(e.firestore);return function(o,s,c,u,d,f,g){let y;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Kb(g,f);let m=[];for(let S of g)m.push(Wb(u,o,S));y={arrayValue:{values:m}}}else y=Wb(u,o,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Kb(g,f),y=AB(c,s,g,f==="in"||f==="not-in");return qe.create(d,f,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var w_=class n extends La{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:tn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let u of c)tS(s,u),s=hy(s,u)}(e._query,t),new Ko(e.firestore,e.converter,hy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Wb(n,e,t){if(typeof(t=Ue(t))=="string"){if(t==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sT(e)&&t.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Re.fromString(t));if(!q.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vb(n,new q(r))}if(t instanceof Ht)return vb(n,t._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bd(t)}.`)}function Kb(n,e){if(!Array.isArray(n)||n.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tS(n,e){let t=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var C_=class{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ai(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new Va(o)}convertGeoPoint(e){return new Fa(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=N_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){let t=Yn(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);Ee(TT(r));let i=new ud(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||Qn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function xB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Po=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},D_=class extends Rd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ko(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(XT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ko=class extends D_{data(e={}){return super.data(e)}},b_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Po(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ko(this._firestore,this._userDataWriter,r.key,r,new Po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new ko(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Po(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ko(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Po(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:RB(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function RB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}var T_=class extends C_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}};function nS(n){n=Td(n,Ko);let e=Td(n.firestore,Pa),t=H_(e),r=new T_(e);return NB(n._query),EB(t,n._query).then(i=>new b_(e,r,n,i))}function PB(n,e){return function(r,i){let o=new En;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return uB(yield vB(r),i,o)})),o.promise}(H_(n),e)}var S_=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=QT(e)}set(e,t,r){this._verifyNotCommitted();let i=Hm(e,this._firestore),o=xB(i.converter,t,r),s=bB(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Hm(e,this._firestore),s;return s=typeof(t=Ue(t))=="string"||t instanceof Qo?SB(this._dataReader,"WriteBatch.update",o._key,t,r,i):TB(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Hm(e,this._firestore);return this._mutations=this._mutations.concat(new Aa(t._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Hm(n,e){if((n=Ue(n)).firestore!==e)throw new L(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function rS(n){return H_(n=Td(n,Pa)),new S_(n,e=>PB(n,e))}(function(e,t=!0){(function(i){Yo=i})(Dr),Cr(new jt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Pa(new Gm(r.getProvider("auth-internal")),new Ym(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ud(d.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ge(gb,"4.7.3",e),Ge(gb,"4.7.3","esm2017")})();var Ni=class{constructor(e){return e}},iS="firestore",G_=class{constructor(){return ca(iS)}};var W_=new G("angularfire2.firestore-instances");function OB(n,e){let t=Rl(iS,n,e);return t&&new Ni(t)}function kB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ni(r)}}var FB={provide:G_,deps:[[new St,W_]]},VB={provide:Ni,useFactory:OB,deps:[[new St,W_],Hn]};function oS(n,...e){return Ge("angularfire",hi.full,"fst"),to([VB,FB,{provide:W_,useFactory:kB(n),multi:!0,deps:[xe,Lt,bo,fi,[new St,ya],[new St,Do],...e]}])}var K_=_t(zT,!0);var sS=_t(GT,!0);var Q_=_t(nS,!0);var aS=_t(WT,!0);var Y_=_t(eS,!0);var cS=_t(rS,!0);function LB(n,e){n&1&&(x(0,"div",8),F(1," \u8655\u7406\u4E2D... "),N())}function BB(n,e){if(n&1&&(x(0,"div",9),F(1),N()),n&2){let t=z();V(),ot(" ",t.error," ")}}function UB(n,e){if(n&1&&(x(0,"div",10),F(1),N()),n&2){let t=z();V(),ot(" ",t.successMessage," ")}}function jB(n,e){if(n&1){let t=Be();x(0,"form",11),H("ngSubmit",function(){ue(t);let i=z();return le(i.handleAuthAction())}),x(1,"div",12)(2,"label",13),F(3,"\u96FB\u5B50\u90F5\u4EF6:"),N(),x(4,"input",14),Vn("ngModelChange",function(i){ue(t);let o=z();return pr(o.email,i)||(o.email=i),le(i)}),N()(),x(5,"div",12)(6,"label",15),F(7,"\u5BC6\u78BC:"),N(),x(8,"input",16),Vn("ngModelChange",function(i){ue(t);let o=z();return pr(o.password,i)||(o.password=i),le(i)}),N()(),x(9,"button",17),F(10),N(),x(11,"button",18),H("click",function(){ue(t);let i=z();return le(i.toggleAuthMode())}),F(12),N()()}if(n&2){let t=z();V(4),Fn("ngModel",t.email),V(4),Fn("ngModel",t.password),V(),U("disabled",t.isLoading||!t.email||!t.password),V(),ot(" ",t.isRegisterMode?"\u8A3B\u518A\u65B0\u5E33\u6236":"\u767B\u5165"," "),V(2),ot(" ",t.isRegisterMode?"\u5DF2\u6709\u5E33\u6236\uFF1F\u524D\u5F80\u767B\u5165":"\u6C92\u6709\u5E33\u6236\uFF1F\u9EDE\u6B64\u8A3B\u518A"," ")}}function $B(n,e){if(n&1){let t=Be();x(0,"div",19)(1,"div",20)(2,"button",21),H("click",function(){ue(t);let i=z();return le(i.uploadToFirebase())}),F(3," \u2B06\uFE0F \u4E0A\u50B3\u672C\u5730\u8CC7\u6599\u5230\u96F2\u7AEF "),N(),x(4,"button",21),H("click",function(){ue(t);let i=z();return le(i.downloadFromFirebase())}),F(5," \u2B07\uFE0F \u5F9E\u96F2\u7AEF\u4E0B\u8F09\u4E26\u540C\u6B65\u5230\u672C\u5730 "),N(),Zt(6,"hr"),x(7,"button",22),H("click",function(){ue(t);let i=z();return le(i.logout())}),F(8,"\u767B\u51FA"),N()()()}if(n&2){let t=z();V(2),U("disabled",t.isLoading),V(2),U("disabled",t.isLoading),V(3),U("disabled",t.isLoading)}}var Ud=class n{closeModal=new be;auth=he(_i);firestore=he(Ni);flashcardService=he(Ir);user=null;isLoading=!1;error=null;successMessage=null;email="";password="";isRegisterMode=!1;authUnsubscribe;ngOnInit(){this.authUnsubscribe=lb(this.auth,e=>{this.user=e,e?(this.email=e.email||"",this.successMessage=`\u5DF2\u767B\u5165\u70BA: ${e.email}`,this.error=null):(this.email="",this.password="")})}ngOnDestroy(){this.authUnsubscribe&&this.authUnsubscribe()}toggleAuthMode(){this.isRegisterMode=!this.isRegisterMode,this.error=null,this.successMessage=null,this.password=""}handleAuthAction(){return v(this,null,function*(){if(!this.email||!this.password){this.error="\u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6\u548C\u5BC6\u78BC\u3002";return}this.isLoading=!0,this.error=null,this.successMessage=null;try{if(this.isRegisterMode){let e=yield cb(this.auth,this.email,this.password);this.user=e.user,this.successMessage="\u5E33\u6236\u8A3B\u518A\u6210\u529F\u4E26\u5DF2\u767B\u5165\uFF01"}else{let e=yield db(this.auth,this.email,this.password);this.user=e.user,this.successMessage="\u767B\u5165\u6210\u529F\uFF01"}this.password=""}catch(e){switch(console.error(e),e.code){case"auth/invalid-email":this.error="\u7121\u6548\u7684\u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F\u3002";break;case"auth/user-disabled":this.error="\u6B64\u5E33\u6236\u5DF2\u88AB\u7981\u7528\u3002";break;case"auth/user-not-found":this.error="\u627E\u4E0D\u5230\u6B64\u96FB\u5B50\u90F5\u4EF6\u5C0D\u61C9\u7684\u5E33\u6236\u3002";break;case"auth/wrong-password":this.error="\u5BC6\u78BC\u932F\u8AA4\u3002";break;case"auth/email-already-in-use":this.error="\u6B64\u96FB\u5B50\u90F5\u4EF6\u5DF2\u88AB\u8A3B\u518A\u3002";break;case"auth/weak-password":this.error="\u5BC6\u78BC\u5F37\u5EA6\u4E0D\u8DB3\uFF0C\u81F3\u5C11\u9700\u89816\u500B\u5B57\u5143\u3002";break;default:this.error=`\u64CD\u4F5C\u5931\u6557: ${e.message}`}}finally{this.isLoading=!1}})}logout(){return v(this,null,function*(){this.isLoading=!0,this.error=null;try{yield hb(this.auth),this.successMessage="\u767B\u51FA\u6210\u529F\uFF01",this.email="",this.password="",this.isRegisterMode=!1}catch(e){console.error(e),this.error="\u767B\u51FA\u5931\u6557: "+e.message}finally{this.isLoading=!1}})}uploadToFirebase(){return v(this,null,function*(){if(!this.user){this.error="\u8ACB\u5148\u767B\u5165\u3002";return}this.isLoading=!0,this.error=null,this.successMessage=null;try{let e=this.flashcardService.getFlashcards();if(e.length===0){this.successMessage="\u672C\u5730\u6C92\u6709\u5361\u7247\u53EF\u4E0A\u50B3\u3002",this.isLoading=!1;return}let t=cS(this.firestore),r=K_(this.firestore,`users/${this.user.uid}/flashcards`);(yield Q_(Y_(r))).forEach(o=>{t.delete(o.ref)}),e.forEach(o=>{let s=sS(r,o.id),c=te({},o);c.lastAnsweredTime&&(c.lastAnsweredTime=We.fromDate(new Date(c.lastAnsweredTime))),t.set(s,c)}),yield t.commit(),this.successMessage=`\u6210\u529F\u4E0A\u50B3 ${e.length} \u5F35\u5361\u7247\u5230\u96F2\u7AEF\uFF01`}catch(e){console.error(e),this.error="\u4E0A\u50B3\u5931\u6557: "+e.message}finally{this.isLoading=!1}})}downloadFromFirebase(){return v(this,null,function*(){if(!this.user){this.error="\u8ACB\u5148\u767B\u5165\u3002";return}this.isLoading=!0,this.error=null,this.successMessage=null;try{let e=K_(this.firestore,`users/${this.user.uid}/flashcards`),t=Y_(e),r=yield Q_(t),i=[];if(r.forEach(o=>{let s=o.data(),c=null;s.lastAnsweredTime&&s.lastAnsweredTime.toDate?c=s.lastAnsweredTime.toDate():s.lastAnsweredTime&&(c=new Date(s.lastAnsweredTime)),i.push({id:o.id,question:s.question,answer:s.answer,category:s.category,answerCount:s.answerCount,score:s.score,lastAnsweredTime:c})}),i.length===0){this.successMessage="\u96F2\u7AEF\u6C92\u6709\u5361\u7247\u53EF\u4E0B\u8F09\u3002\u672C\u5730\u8CC7\u6599\u672A\u8B8A\u66F4\u3002",this.isLoading=!1;return}this.flashcardService.replaceAllFlashcards(i),this.successMessage=`\u6210\u529F\u5F9E\u96F2\u7AEF\u4E0B\u8F09\u4E26\u540C\u6B65 ${i.length} \u5F35\u5361\u7247\uFF01`}catch(e){console.error(e),this.error="\u4E0B\u8F09\u5931\u6557: "+e.message}finally{this.isLoading=!1}})}onClose(){this.closeModal.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-firebase-sync-modal"]],outputs:{closeModal:"closeModal"},decls:11,vars:6,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["class","loading-spinner",4,"ngIf"],["class","message error-message",4,"ngIf"],["class","message success-message",4,"ngIf"],["class","auth-form",3,"ngSubmit",4,"ngIf"],["class","user-actions",4,"ngIf"],[1,"close-btn",3,"click","disabled"],[1,"loading-spinner"],[1,"message","error-message"],[1,"message","success-message"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","minlength","6",3,"ngModelChange","ngModel"],["type","submit",1,"auth-button",3,"disabled"],["type","button",1,"toggle-auth-mode-button",3,"click"],[1,"user-actions"],[1,"actions"],[3,"click","disabled"],[1,"logout-btn",3,"click","disabled"]],template:function(t,r){t&1&&(x(0,"div",0),H("click",function(){return r.onClose()}),x(1,"div",1),H("click",function(o){return o.stopPropagation()}),x(2,"h3"),F(3,"Firebase \u8CC7\u6599\u540C\u6B65"),N(),we(4,LB,2,0,"div",2)(5,BB,2,1,"div",3)(6,UB,2,1,"div",4)(7,jB,13,5,"form",5)(8,$B,9,3,"div",6),x(9,"button",7),H("click",function(){return r.onClose()}),F(10,"\u95DC\u9589"),N()()()),t&2&&(V(4),U("ngIf",r.isLoading),V(),U("ngIf",r.error),V(),U("ngIf",r.successMessage&&!r.error),V(),U("ngIf",!r.user&&!r.isLoading),V(),U("ngIf",r.user&&!r.isLoading),V(),U("disabled",r.isLoading))},dependencies:[at,yt,vr,yl,mn,_r,pl,Ig,Eg,ci,mg],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1050}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:8px;box-shadow:0 4px 15px #0003;min-width:350px;max-width:550px;text-align:center}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#333}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:.95em;color:#555}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;margin:10px 0;border:none;border-radius:5px;font-size:1em;cursor:pointer;transition:background-color .2s ease}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.logout-btn[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#212529!important}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#e0a800!important}.close-btn[_ngcontent-%COMP%]{background-color:#6c757d!important;color:#fff!important;margin-top:20px}.close-btn[_ngcontent-%COMP%]:hover{background-color:#5a6268!important}.loading-spinner[_ngcontent-%COMP%]{padding:20px;font-style:italic;color:#007bff}.message[_ngcontent-%COMP%]{padding:10px;margin:15px 0;border-radius:4px;font-weight:700}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.success-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}hr[_ngcontent-%COMP%]{margin:20px 0;border:0;border-top:1px solid #eee}.auth-form[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#495057}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:4px;box-sizing:border-box;font-size:1em}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.auth-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;margin:10px 0 5px;border:none;border-radius:5px;font-size:1em;cursor:pointer;background-color:#28a745;color:#fff;transition:background-color .2s ease}.auth-button[_ngcontent-%COMP%]:hover{background-color:#218838}.auth-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.toggle-auth-mode-button[_ngcontent-%COMP%]{background:none;border:none;color:#007bff;cursor:pointer;padding:5px 0;text-decoration:underline;font-size:.9em;display:block;width:100%;margin-top:5px}.toggle-auth-mode-button[_ngcontent-%COMP%]:hover{color:#0056b3}.user-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}"]})};function HB(n,e){if(n&1){let t=Be();x(0,"button",6),H("click",function(){ue(t);let i=z(2);return le(i.openAddForm())}),F(1,"\u65B0\u589E\u55AE\u5B57\u5361"),N()}}function qB(n,e){if(n&1){let t=Be();x(0,"app-flashcard-form",7),H("formSubmitted",function(i){ue(t);let o=z(2);return le(o.handleFormSubmit(i))})("cancel",function(){ue(t);let i=z(2);return le(i.handleFormCancel())}),N()}if(n&2){let t=z(2);U("cardToEdit",t.cardToEdit)}}function zB(n,e){if(n&1){let t=Be();x(0,"div"),we(1,HB,2,0,"button",3)(2,qB,1,1,"app-flashcard-form",4),x(3,"app-flashcard-list",5),Ln(4,"async"),H("editCard",function(i){ue(t);let o=z();return le(o.openEditForm(i))})("deleteCard",function(i){ue(t);let o=z();return le(o.handleDeleteCard(i))}),N()()}if(n&2){let t=z();V(),U("ngIf",!t.showForm),V(),U("ngIf",t.showForm),V(),U("flashcards",Vs(4,3,t.flashcards$))}}function GB(n,e){n&1&&(x(0,"div"),Zt(1,"app-flashcard-review"),N())}function WB(n,e){if(n&1){let t=Be();x(0,"app-firebase-sync-modal",8),H("closeModal",function(){ue(t);let i=z();return le(i.closeFirebaseSyncModal())}),N()}}var jd=class n{constructor(e){this.flashcardService=e;this.flashcards$=this.flashcardService.flashcards$}title="MemoCard";flashcards$;showForm=!1;cardToEdit=null;currentView="list";isFirebaseSyncModalOpen=!1;ngOnInit(){}toggleView(e){this.currentView=e,e==="list"&&(this.showForm=!1,this.cardToEdit=null)}openAddForm(){this.cardToEdit=null,this.showForm=!0,this.currentView="list"}openEditForm(e){this.cardToEdit=e,this.showForm=!0,this.currentView="list"}handleFormSubmit(e){"id"in e?this.flashcardService.updateFlashcard(e):this.flashcardService.addFlashcard(e),this.showForm=!1,this.cardToEdit=null}handleFormCancel(){this.showForm=!1,this.cardToEdit=null}handleDeleteCard(e){this.flashcardService.deleteFlashcard(e)}openFirebaseSyncModal(){this.isFirebaseSyncModalOpen=!0}closeFirebaseSyncModal(){this.isFirebaseSyncModalOpen=!1}static \u0275fac=function(t){return new(t||n)(j(Ir))};static \u0275cmp=wt({type:n,selectors:[["app-root"]],decls:17,vars:8,consts:[[3,"click"],[4,"ngIf"],[3,"closeModal",4,"ngIf"],["class","add-new-btn",3,"click",4,"ngIf"],[3,"cardToEdit","formSubmitted","cancel",4,"ngIf"],[3,"editCard","deleteCard","flashcards"],[1,"add-new-btn",3,"click"],[3,"formSubmitted","cancel","cardToEdit"],[3,"closeModal"]],template:function(t,r){t&1&&(x(0,"header")(1,"h1"),F(2),N(),x(3,"nav")(4,"button",0),H("click",function(){return r.toggleView("list")}),F(5,"\u5361\u7247\u5217\u8868"),N(),x(6,"button",0),H("click",function(){return r.toggleView("review")}),F(7,"\u958B\u59CB\u8907\u7FD2"),N(),x(8,"button",0),H("click",function(){return r.openFirebaseSyncModal()}),F(9,"\u2601\uFE0F \u96F2\u7AEF\u540C\u6B65"),N()()(),x(10,"main"),we(11,zB,5,5,"div",1)(12,GB,2,0,"div",1),N(),x(13,"footer")(14,"p"),F(15,"\xA9 Powerd by Google Gemin 2.5 pro MemoCard 20250525"),N()(),we(16,WB,1,0,"app-firebase-sync-modal",2)),t&2&&(V(2),it(r.title),V(2),oi("active",r.currentView==="list"),V(2),oi("active",r.currentView==="review"),V(5),U("ngIf",r.currentView==="list"),V(),U("ngIf",r.currentView==="review"),V(4),U("ngIf",r.isFirebaseSyncModalOpen))},dependencies:[at,yt,qs,wl,Cl,bl,Ud],styles:['.main-nav[_ngcontent-%COMP%]{background-color:#f8f8f8;padding:0 20px;height:60px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e0e0e0}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;gap:20px}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#555;font-weight:500;padding:10px 5px;position:relative;transition:color .2s}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]{color:#007aff}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:3px;background-color:#007aff}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active-link){color:#000}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]{display:flex;align-items:center}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:.9em;color:#555}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]{padding:8px 12px;background-color:#007aff;color:#fff;border:none;border-radius:15px;cursor:pointer;font-size:.9em;transition:background-color .2s}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]:hover{background-color:#005ecb}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button.logout[_ngcontent-%COMP%]{background-color:#6c757d}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button.logout[_ngcontent-%COMP%]:hover{background-color:#5a6268}.content[_ngcontent-%COMP%]{padding:20px}']})};var uS={production:!1,firebase:{apiKey:"AIzaSyAgdsshTV18S8QX7dZYU19C8iBCMRNnQRo",authDomain:"gemini25memocard.firebaseapp.com",projectId:"gemini25memocard",storageBucket:"gemini25memocard.firebasestorage.app",messagingSenderId:"26704060076",appId:"1:26704060076:web:d497dae17135fcd2fb4909",measurementId:"G-XC7FN1EYS8"}};var KB={providers:[l0(()=>d0(uS.firebase)),ab(()=>ub()),oS(()=>aS())]};og(jd,KB).catch(n=>console.error(n));export{KB as appConfig};
