---
title: 指定された IP とポートに接続できない問題の解決
date: 2023-04-09 15:00
categories: Development
author: kai98k
tags:
  - Internet
---

IIS の設定がすべて完了し、サーバー上でサイトを正常に開くことができ、Web ページを確認できたと思っていたのに、外部 IP を使用して接続して確認しようとすると接続できず、すべてが夢で空論だったことに気づくことがあります。このとき、問題を見つけるためにいくつかのテストを行う必要があります。これらの [接続テストツール](https://urwebapp.github.io/Web/Windows%20%E6%B8%AC%E8%A9%A6%E9%80%A3%E7%B7%9A%E5%B7%A5%E5%85%B7/) を使用すると役立ちます。

接続に本当に問題があることがわかった場合は、次のチェックを行って問題を解決する必要があります。

## ファイアウォールルール

Windows の場合、Windows ファイアウォールで受信 (Inbound) と送信 (Outbound) の新しいルールを追加する必要があります。すべてのポートがデフォルトで接続可能であるとは限らないため、ここで設定を行う必要があります。

1. ファイアウォールを開き、左側の受信/送信の規則 (Inbound/Outbound Rules) をクリックします

![ステップ1](https://i.imgur.com/wu9lcih.png)

2. 右側の新しい規則 (New Rule) をクリックします

![ステップ2](https://i.imgur.com/5uC54sa.png)

3. ポート (Port) をクリックします

![ステップ3](https://i.imgur.com/jKF8YRr.png)

4. 指定されたポートを入力します。すべてのポートを開かないでください

![ステップ4](https://i.imgur.com/c4Ls19Q.png)

5. そのポートの接続を許可します

![ステップ5](https://i.imgur.com/XSmbvJd.png)

6. ルールを適用するネットワークプロファイルを選択します。これは、コンピューターでネットワーク接続を設定するときによく表示される 3 つのオプションです。

![ステップ6](https://i.imgur.com/ZkjUWvO.png)

7. 名前を付けて追加を完了します

![ステップ7](https://i.imgur.com/Hafw0Et.png)

## SSL および URL リダイレクト/書き換えの確認

Windows の場合、IIS で接続に SSL が必要かどうか、または URL 書き換えルールがあるかどうかを確認できます。つまり、この IP アドレスへの接続を指定しているのに、別の IP アドレスにリダイレクトされていないかを確認します。

![SSL および URL リダイレクト/書き換えの確認](https://i.imgur.com/gyC1NiT.png)

## リソースモニター (Resource Monitor)

上記がすべて問題ない場合、そのポートが他のリソースによって占有されている可能性があります。このときは、リソースモニターを開いて確認する必要があります。

![リソースモニター](https://i.imgur.com/L7trrzd.png)

現在リソースによって使用されているポートを確認できます。重複があるかどうかを確認してください。これが接続できない原因である可能性があります。

![リソースによって使用されているポート](https://i.imgur.com/3y3PPiO.png)

## Reference

私と上司
