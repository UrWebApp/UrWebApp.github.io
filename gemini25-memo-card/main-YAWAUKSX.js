var zA=Object.defineProperty,GA=Object.defineProperties;var WA=Object.getOwnPropertyDescriptors;var PI=Object.getOwnPropertySymbols,KA=Object.getPrototypeOf,QA=Object.prototype.hasOwnProperty,YA=Object.prototype.propertyIsEnumerable,ZA=Reflect.get;var OI=(n,e,t)=>e in n?zA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ie=(n,e)=>{for(var t in e||={})QA.call(e,t)&&OI(n,t,e[t]);if(PI)for(var t of PI(e))YA.call(e,t)&&OI(n,t,e[t]);return n},ye=(n,e)=>GA(n,WA(e));var fr=(n,e,t)=>ZA(KA(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(d){i(d)}},s=u=>{try{c(t.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});function Mh(n,e){return Object.is(n,e)}var ze=null,wc=!1,Nh=1,Qt=Symbol("SIGNAL");function ae(n){let e=ze;return ze=n,e}function xh(){return ze}var Rs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Dc(n){if(wc)throw new Error("");if(ze===null)return;ze.consumerOnSignalRead(n);let e=ze.nextProducerIndex++;if(Sc(ze),e<ze.producerNode.length&&ze.producerNode[e]!==n&&xs(ze)){let t=ze.producerNode[e];Tc(t,ze.producerIndexOfThis[e])}ze.producerNode[e]!==n&&(ze.producerNode[e]=n,ze.producerIndexOfThis[e]=xs(ze)?FI(n,ze,e):0),ze.producerLastReadVersion[e]=n.version}function kI(){Nh++}function Rh(n){if(!(xs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Nh)){if(!n.producerMustRecompute(n)&&!Fh(n)){Ah(n);return}n.producerRecomputeValue(n),Ah(n)}}function Ph(n){if(n.liveConsumerNode===void 0)return;let e=wc;wc=!0;try{for(let t of n.liveConsumerNode)t.dirty||JA(t)}finally{wc=e}}function Oh(){return ze?.consumerAllowSignalWrites!==!1}function JA(n){n.dirty=!0,Ph(n),n.consumerMarkedDirty?.(n)}function Ah(n){n.dirty=!1,n.lastCleanEpoch=Nh}function bc(n){return n&&(n.nextProducerIndex=0),ae(n)}function kh(n,e){if(ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Fh(n){Sc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Rh(t),r!==t.version))return!0}return!1}function Vh(n){if(Sc(n),xs(n))for(let e=0;e<n.producerNode.length;e++)Tc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function FI(n,e,t){if(VI(n),n.liveConsumerNode.length===0&&LI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=FI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Tc(n,e){if(VI(n),n.liveConsumerNode.length===1&&LI(n))for(let r=0;r<n.producerNode.length;r++)Tc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Sc(i),i.producerIndexOfThis[r]=e}}function xs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Sc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function VI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function LI(n){return n.producerNode!==void 0}function Lh(n,e){let t=Object.create(XA);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Rh(t),Dc(t),t.value===Cc)throw t.error;return t.value};return r[Qt]=t,r}var Th=Symbol("UNSET"),Sh=Symbol("COMPUTING"),Cc=Symbol("ERRORED"),XA=ye(ie({},Rs),{value:Th,dirty:!0,error:null,equal:Mh,kind:"computed",producerMustRecompute(n){return n.value===Th||n.value===Sh},producerRecomputeValue(n){if(n.value===Sh)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Sh;let t=bc(n),r,i=!1;try{r=n.computation(),ae(null),i=e!==Th&&e!==Cc&&r!==Cc&&n.equal(e,r)}catch(o){r=Cc,n.error=o}finally{kh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function eM(){throw new Error}var BI=eM;function UI(n){BI(n)}function Bh(n){BI=n}var tM=null;function Uh(n,e){let t=Object.create($h);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Dc(t),t.value);return r[Qt]=t,r}function Ac(n,e){Oh()||UI(n),n.equal(n.value,e)||(n.value=e,nM(n))}function jh(n,e){Oh()||UI(n),Ac(n,e(n.value))}var $h=ye(ie({},Rs),{equal:Mh,value:void 0,kind:"signal"});function nM(n){n.version++,kI(),Ph(n),tM?.()}function Hh(n){let e=ae(null);try{return n()}finally{ae(e)}}var qh;function Ps(){return qh}function Ln(n){let e=qh;return qh=n,e}var Mc=Symbol("NotFound");function le(n){return typeof n=="function"}function Nc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xc=Nc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Kr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(o){e=o instanceof xc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{jI(o)}catch(s){e=e??[],s instanceof xc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Kr(t,e)}remove(e){let{_finalizers:t}=this;t&&Kr(t,e),e instanceof n&&e._removeParent(this)}};et.EMPTY=(()=>{let n=new et;return n.closed=!0,n})();var zh=et.EMPTY;function Rc(n){return n instanceof et||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function jI(n){le(n)?n():n.unsubscribe()}var Yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gi={setTimeout(n,e,...t){let{delegate:r}=Gi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Pc(n){Gi.setTimeout(()=>{let{onUnhandledError:e}=Yt;if(e)e(n);else throw n})}function Gh(){}var $I=Wh("C",void 0,void 0);function HI(n){return Wh("E",void 0,n)}function qI(n){return Wh("N",n,void 0)}function Wh(n,e,t){return{kind:n,value:e,error:t}}var Qr=null;function Wi(n){if(Yt.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Qr;if(Qr=null,t)throw r}}else n()}function zI(n){Yt.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=n)}var Yr=class extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rc(e)&&e.add(this)):this.destination=cM}static create(e,t,r){return new Ki(e,t,r)}next(e){this.isStopped?Qh(qI(e),this):this._next(e)}error(e){this.isStopped?Qh(HI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qh($I,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sM=Function.prototype.bind;function Kh(n,e){return sM.call(n,e)}var Yh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Oc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Oc(r)}else Oc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Oc(t)}}},Ki=class extends Yr{constructor(e,t,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Yt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kh(e.next,o),error:e.error&&Kh(e.error,o),complete:e.complete&&Kh(e.complete,o)}):i=e}this.destination=new Yh(i)}};function Oc(n){Yt.useDeprecatedSynchronousErrorHandling?zI(n):Pc(n)}function aM(n){throw n}function Qh(n,e){let{onStoppedNotification:t}=Yt;t&&Gi.setTimeout(()=>t(n,e))}var cM={closed:!0,next:Gh,error:aM,complete:Gh};var Qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function kc(n){return n}function GI(n){return n.length===0?kc:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Oe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=lM(t)?t:new Ki(t,r,i);return Wi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=WI(r),new r((i,o)=>{let s=new Ki({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qi](){return this}pipe(...t){return GI(t)(this)}toPromise(t){return t=WI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function WI(n){var e;return(e=n??Yt.Promise)!==null&&e!==void 0?e:Promise}function uM(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}function lM(n){return n&&n instanceof Yr||uM(n)&&Rc(n)}function dM(n){return le(n?.lift)}function pr(n){return e=>{if(dM(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function gr(n,e,t,r,i){return new Zh(n,e,t,r,i)}var Zh=class extends Yr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var KI=Nc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var cn=(()=>{class n extends Oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Fc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new KI}next(t){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zh:(this.currentObservers=null,o.push(t),new et(()=>{this.currentObservers=null,Kr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Oe;return t.source=this,t}}return n.create=(e,t)=>new Fc(e,t),n})(),Fc=class extends cn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:zh}};var mr=class extends cn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jh={now(){return(Jh.delegate||Date).now()},delegate:void 0};var Vc=class extends et{constructor(e,t){super()}schedule(e,t=0){return this}};var Os={setInterval(n,e,...t){let{delegate:r}=Os;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Os;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Yi=class extends Vc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Os.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Os.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Kr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zi.now=Jh.now;var Ji=class extends Zi{constructor(e,t=Zi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Xh=new Ji(Yi);var Lc=class extends Yi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Bc=class extends Ji{};var ef=new Bc(Lc);function QI(n){return n&&le(n.schedule)}function YI(n){return n[n.length-1]}function ZI(n){return le(YI(n))?n.pop():void 0}function JI(n){return QI(YI(n))?n.pop():void 0}function tf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function eE(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(h){try{d(r.next(h))}catch(g){s(g)}}function u(h){try{d(r.throw(h))}catch(g){s(g)}}function d(h){h.done?o(h.value):i(h.value).then(c,u)}d((r=r.apply(n,e||[])).next())})}function XI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zr(n){return this instanceof Zr?(this.v=n,this):new Zr(n)}function tE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(S){return Promise.resolve(S).then(m,g)}}function c(m,S){r[m]&&(i[m]=function(P){return new Promise(function(R,H){o.push([m,P,R,H])>1||u(m,P)})},S&&(i[m]=S(i[m])))}function u(m,S){try{d(r[m](S))}catch(P){y(o[0][3],P)}}function d(m){m.value instanceof Zr?Promise.resolve(m.value.v).then(h,g):y(o[0][2],m)}function h(m){u("next",m)}function g(m){u("throw",m)}function y(m,S){m(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function nE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof XI=="function"?XI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(d){o({value:d,done:c})},s)}}var Uc=n=>n&&typeof n.length=="number"&&typeof n!="function";function jc(n){return le(n?.then)}function $c(n){return le(n[Qi])}function Hc(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function qc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zc=hM();function Gc(n){return le(n?.[zc])}function Wc(n){return tE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zr(t.read());if(i)return yield Zr(void 0);yield yield Zr(r)}}finally{t.releaseLock()}})}function Kc(n){return le(n?.getReader)}function yr(n){if(n instanceof Oe)return n;if(n!=null){if($c(n))return fM(n);if(Uc(n))return pM(n);if(jc(n))return gM(n);if(Hc(n))return rE(n);if(Gc(n))return mM(n);if(Kc(n))return yM(n)}throw qc(n)}function fM(n){return new Oe(e=>{let t=n[Qi]();if(le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pM(n){return new Oe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function gM(n){return new Oe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pc)})}function mM(n){return new Oe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function rE(n){return new Oe(e=>{_M(n,e).catch(t=>e.error(t))})}function yM(n){return rE(Wc(n))}function _M(n,e){var t,r,i,o;return eE(this,void 0,void 0,function*(){try{for(t=nE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function un(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function _r(n,e=0){return pr((t,r)=>{t.subscribe(gr(r,i=>un(r,n,()=>r.next(i),e),()=>un(r,n,()=>r.complete(),e),i=>un(r,n,()=>r.error(i),e)))})}function vr(n,e=0){return pr((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function iE(n,e){return yr(n).pipe(vr(e),_r(e))}function oE(n,e){return yr(n).pipe(vr(e),_r(e))}function sE(n,e){return new Oe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function aE(n,e){return new Oe(t=>{let r;return un(t,e,()=>{r=n[zc](),un(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function Qc(n,e){if(!n)throw new Error("Iterable cannot be null");return new Oe(t=>{un(t,e,()=>{let r=n[Symbol.asyncIterator]();un(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function cE(n,e){return Qc(Wc(n),e)}function uE(n,e){if(n!=null){if($c(n))return iE(n,e);if(Uc(n))return sE(n,e);if(jc(n))return oE(n,e);if(Hc(n))return Qc(n,e);if(Gc(n))return aE(n,e);if(Kc(n))return cE(n,e)}throw qc(n)}function ks(n,e){return e?uE(n,e):yr(n)}function nf(...n){let e=JI(n);return ks(n,e)}function ln(n,e){return pr((t,r)=>{let i=0;t.subscribe(gr(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:vM}=Array;function IM(n,e){return vM(e)?n(...e):n(e)}function lE(n){return ln(e=>IM(n,e))}var{isArray:EM}=Array,{getPrototypeOf:wM,prototype:CM,keys:DM}=Object;function dE(n){if(n.length===1){let e=n[0];if(EM(e))return{args:e,keys:null};if(bM(e)){let t=DM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function bM(n){return n&&typeof n=="object"&&wM(n)===CM}function hE(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function rf(...n){let e=ZI(n),{args:t,keys:r}=dE(n),i=new Oe(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),u=s,d=s;for(let h=0;h<s;h++){let g=!1;yr(t[h]).subscribe(gr(o,y=>{g||(g=!0,d--),c[h]=y},()=>u--,void 0,()=>{(!u||!g)&&(d||o.next(r?hE(r,c):c),o.complete())}))}});return e?i.pipe(lE(e)):i}function of(n,e,t){let r=le(n)||e||t?{next:n,error:e,complete:t}:n;return r?pr((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(gr(o,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),o.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):kc}var iw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",W=class extends Error{code;constructor(e,t){super(ow(e,t)),this.code=e}};function TM(n){return`NG0${Math.abs(n)}`}function ow(n,e){return`${TM(n)}${e?": "+e:""}`}function Ks(n){return{toString:n}.toString()}var Yc="__parameters__";function SM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sw(n,e,t){return Ks(()=>{let r=SM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,d,h){let g=u.hasOwnProperty(Yc)?u[Yc]:Object.defineProperty(u,Yc,{value:[]})[Yc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var dn=globalThis;function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function AM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Vt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function fE(n,e){return n?e?`${n} ${e}`:n:e||""}var MM=Me({__forward_ref__:Me});function gt(n){return n.__forward_ref__=gt,n.toString=function(){return Vt(this())},n}function pt(n){return aw(n)?n():n}function aw(n){return typeof n=="function"&&n.hasOwnProperty(MM)&&n.__forward_ref__===gt}function ge(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ep(n){return pE(n,cw)||pE(n,uw)}function pE(n,e){return n.hasOwnProperty(e)?n[e]:null}function NM(n){let e=n&&(n[cw]||n[uw]);return e||null}function gE(n){return n&&(n.hasOwnProperty(mE)||n.hasOwnProperty(xM))?n[mE]:null}var cw=Me({\u0275prov:Me}),mE=Me({\u0275inj:Me}),uw=Me({ngInjectableDef:Me}),xM=Me({ngInjectorDef:Me}),G=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lw(n){return n&&!!n.\u0275providers}var RM=Me({\u0275cmp:Me}),PM=Me({\u0275dir:Me}),OM=Me({\u0275pipe:Me});var au=Me({\u0275fac:Me}),Bs=Me({__NG_ELEMENT_ID__:Me}),yE=Me({__NG_ENV_ID__:Me});function ro(n){return typeof n=="string"?n:n==null?"":String(n)}function kM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ro(n)}function dw(n,e){throw new W(-200,n)}function wp(n,e){throw new W(-201,!1)}var oe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(oe||{}),Ef;function hw(){return Ef}function It(n){let e=Ef;return Ef=n,e}function fw(n,e,t){let r=Ep(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&oe.Optional)return null;if(e!==void 0)return e;wp(n,"Injector")}var FM={},Xr=FM,wf="__NG_DI_FLAG__",cu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Mc:Xr,r)}},uu="ngTempTokenPath",VM="ngTokenPath",LM=/\n/gm,BM="\u0275",_E="__source";function UM(n,e=oe.Default){if(Ps()===void 0)throw new W(-203,!1);if(Ps()===null)return fw(n,void 0,e);{let t=Ps(),r;return t instanceof cu?r=t.injector:r=t,r.get(n,e&oe.Optional?null:void 0,e)}}function pe(n,e=oe.Default){return(hw()||UM)(pt(n),e)}function de(n,e=oe.Default){return pe(n,xu(e))}function xu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cf(n){let e=[];for(let t=0;t<n.length;t++){let r=pt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let c=r[s],u=jM(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(pe(i,o))}else e.push(pe(r))}return e}function pw(n,e){return n[wf]=e,n.prototype[wf]=e,n}function jM(n){return n[wf]}function $M(n,e,t,r){let i=n[uu];throw e[_E]&&i.unshift(e[_E]),n.message=HM(`
`+n.message,i,t,r),n[VM]=i,n[uu]=null,n}function HM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==BM?n.slice(2):n;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Vt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(LM,`
  `)}`}var Dt=pw(sw("Optional"),8);var qM=pw(sw("SkipSelf"),4);function ti(n,e){let t=n.hasOwnProperty(au);return t?n[au]:null}function zM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function GM(n){return n.flat(Number.POSITIVE_INFINITY)}function Cp(n,e){n.forEach(t=>Array.isArray(t)?Cp(t,e):e(t))}function gw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function WM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function KM(n,e,t){let r=Qs(n,e);return r>=0?n[r|1]=t:(r=~r,WM(n,r,e,t)),r}function sf(n,e){let t=Qs(n,e);if(t>=0)return n[t|1]}function Qs(n,e){return QM(n,e,1)}function QM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ni={},Ft=[],Us=new G(""),mw=new G("",-1),yw=new G(""),du=class{get(e,t=Xr){if(t===Xr){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return t}};function js(n){return n[RM]||null}function YM(n){return n[PM]||null}function ZM(n){return n[OM]||null}function di(n){return{\u0275providers:n}}function JM(...n){return{\u0275providers:_w(!0,n),\u0275fromNgModule:!0}}function _w(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Cp(e,s=>{let c=s;Df(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&vw(i,o),t}function vw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Dp(i,o=>{e(o,r)})}}function Df(n,e,t,r){if(n=pt(n),!n)return!1;let i=null,o=gE(n),s=!o&&js(n);if(!o&&!s){let u=n.ngModule;if(o=gE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)Df(d,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{Cp(o.imports,h=>{Df(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&vw(d,e)}if(!c){let d=ti(i)||(()=>new i);e({provide:i,useFactory:d,deps:Ft},i),e({provide:yw,useValue:i,multi:!0},i),e({provide:Us,useValue:()=>pe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let d=n;Dp(u,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Dp(n,e){for(let t of n)lw(t)&&(t=t.\u0275providers),Array.isArray(t)?Dp(t,e):e(t)}var XM=Me({provide:String,useValue:Me});function Iw(n){return n!==null&&typeof n=="object"&&XM in n}function eN(n){return!!(n&&n.useExisting)}function tN(n){return!!(n&&n.useFactory)}function io(n){return typeof n=="function"}function nN(n){return!!n.useClass}var Ru=new G(""),tu={},vE={},af;function bp(){return af===void 0&&(af=new du),af}var wr=class{},$s=class extends wr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Tf(e,s=>this.processProvider(s)),this.records.set(mw,Xi(void 0,this)),i.has("environment")&&this.records.set(wr,Xi(void 0,this));let o=this.records.get(Ru);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yw,Ft,oe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Mc:Xr,r)}destroy(){Vs(this),this._destroyed=!0;let e=ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(e)}}onDestroy(e){return Vs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Vs(this);let t=Ln(this),r=It(void 0),i;try{return e()}finally{Ln(t),It(r)}}get(e,t=Xr,r=oe.Default){if(Vs(this),e.hasOwnProperty(yE))return e[yE](this);r=xu(r);let i,o=Ln(this),s=It(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=aN(e)&&Ep(e);d&&this.injectableDefInScope(d)?u=Xi(bf(e),tu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let c=r&oe.Self?bp():this.parent;return t=r&oe.Optional&&t===Xr?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[uu]=c[uu]||[]).unshift(Vt(e)),o)throw c;return $M(c,e,"R3InjectorError",this.source)}else throw c}finally{It(s),Ln(o)}}resolveInjectorInitializers(){let e=ae(null),t=Ln(this),r=It(void 0),i;try{let o=this.get(Us,Ft,oe.Self);for(let s of o)s()}finally{Ln(t),It(r),ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=pt(e);let t=io(e)?e:pt(e&&e.provide),r=iN(e);if(!io(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Xi(void 0,tu,!0),i.factory=()=>Cf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ae(null);try{return t.value===vE?dw(Vt(e)):t.value===tu&&(t.value=vE,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&sN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ae(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=pt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function bf(n){let e=Ep(n),t=e!==null?e.factory:ti(n);if(t!==null)return t;if(n instanceof G)throw new W(204,!1);if(n instanceof Function)return rN(n);throw new W(204,!1)}function rN(n){if(n.length>0)throw new W(204,!1);let t=NM(n);return t!==null?()=>t.factory(n):()=>new n}function iN(n){if(Iw(n))return Xi(void 0,n.useValue);{let e=Ew(n);return Xi(e,tu)}}function Ew(n,e,t){let r;if(io(n)){let i=pt(n);return ti(i)||bf(i)}else if(Iw(n))r=()=>pt(n.useValue);else if(tN(n))r=()=>n.useFactory(...Cf(n.deps||[]));else if(eN(n))r=(i,o)=>pe(pt(n.useExisting),o!==void 0&&o&oe.Optional?oe.Optional:void 0);else{let i=pt(n&&(n.useClass||n.provide));if(oN(n))r=()=>new i(...Cf(n.deps));else return ti(i)||bf(i)}return r}function Vs(n){if(n.destroyed)throw new W(205,!1)}function Xi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oN(n){return!!n.deps}function sN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function aN(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function Tf(n,e){for(let t of n)Array.isArray(t)?Tf(t,e):t&&lw(t)?Tf(t.\u0275providers,e):e(t)}function ww(n,e){let t;n instanceof $s?(Vs(n),t=n):t=new cu(n);let r,i=Ln(t),o=It(void 0);try{return e()}finally{Ln(i),It(o)}}function cN(){return hw()!==void 0||Ps()!=null}function uN(n){return typeof n=="function"}var qn=0,te=1,Z=2,ot=3,Jt=4,Xt=5,hu=6,fu=7,Et=8,oo=9,Bn=10,Le=11,Hs=12,IE=13,fo=14,fn=15,ri=16,eo=17,Un=18,Pu=19,Cw=20,Ir=21,cf=22,pu=23,Lt=24,uf=25,wt=26,Dw=1;var ii=7,gu=8,so=9,Mt=10;function Er(n){return Array.isArray(n)&&typeof n[Dw]=="object"}function zn(n){return Array.isArray(n)&&n[Dw]===!0}function Tp(n){return(n.flags&4)!==0}function po(n){return n.componentOffset>-1}function Ou(n){return(n.flags&1)===1}function pn(n){return!!n.template}function mu(n){return(n[Z]&512)!==0}function go(n){return(n[Z]&256)===256}var Sf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function bw(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Bt=(()=>{let n=()=>Tw;return n.ngInherit=!0,n})();function Tw(n){return n.type.prototype.ngOnChanges&&(n.setInput=dN),lN}function lN(){let n=Aw(this),e=n?.current;if(e){let t=n.previous;if(t===ni)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function dN(n,e,t,r,i){let o=this.declaredInputs[r],s=Aw(n)||hN(n,{previous:ni,current:null}),c=s.current||(s.current={}),u=s.previous,d=u[o];c[o]=new Sf(d&&d.currentValue,t,u===ni),bw(n,e,i,t)}var Sw="__ngSimpleChanges__";function Aw(n){return n[Sw]||null}function hN(n,e){return n[Sw]=e}var EE=null;var Te=function(n,e=null,t){EE?.(n,e,t)},fN="svg",pN="math";function gn(n){for(;Array.isArray(n);)n=n[qn];return n}function Mw(n,e){return gn(e[n])}function _n(n,e){return gn(e[n.index])}function Nw(n,e){return n.data[e]}function Sp(n,e){return n[e]}function gN(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function mn(n,e){let t=e[n];return Er(t)?t:t[qn]}function mN(n){return(n[Z]&4)===4}function Ap(n){return(n[Z]&128)===128}function yN(n){return zn(n[ot])}function ao(n,e){return e==null?null:n[e]}function xw(n){n[eo]=0}function Rw(n){n[Z]&1024||(n[Z]|=1024,Ap(n)&&Fu(n))}function _N(n,e){for(;n>0;)e=e[fo],n--;return e}function ku(n){return!!(n[Z]&9216||n[Lt]?.dirty)}function Af(n){n[Bn].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),ku(n)&&Fu(n)}function Fu(n){n[Bn].changeDetectionScheduler?.notify(0);let e=oi(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Ap(e)));)e=oi(e)}function Pw(n,e){if(go(n))throw new W(911,!1);n[Ir]===null&&(n[Ir]=[]),n[Ir].push(e)}function vN(n,e){if(n[Ir]===null)return;let t=n[Ir].indexOf(e);t!==-1&&n[Ir].splice(t,1)}function oi(n){let e=n[ot];return zn(e)?e[ot]:e}function Mp(n){return n[fu]??=[]}function Np(n){return n.cleanup??=[]}function IN(n,e,t,r){let i=Mp(e);i.push(t),n.firstCreatePass&&Np(n).push(r,i.length-1)}var ee={lFrame:jw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Mf=!1;function EN(){return ee.lFrame.elementDepthCount}function wN(){ee.lFrame.elementDepthCount++}function CN(){ee.lFrame.elementDepthCount--}function xp(){return ee.bindingsEnabled}function DN(){return ee.skipHydrationRootTNode!==null}function bN(n){return ee.skipHydrationRootTNode===n}function TN(){ee.skipHydrationRootTNode=null}function he(){return ee.lFrame.lView}function Ge(){return ee.lFrame.tView}function ne(n){return ee.lFrame.contextLView=n,n[Et]}function re(n){return ee.lFrame.contextLView=null,n}function Nt(){let n=Ow();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ow(){return ee.lFrame.currentTNode}function SN(){let n=ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function hi(n,e){let t=ee.lFrame;t.currentTNode=n,t.isParent=e}function Rp(){return ee.lFrame.isParent}function kw(){ee.lFrame.isParent=!1}function AN(){return ee.lFrame.contextLView}function Fw(){return Mf}function wE(n){let e=Mf;return Mf=n,e}function Pp(){let n=ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function MN(){return ee.lFrame.bindingIndex}function NN(n){return ee.lFrame.bindingIndex=n}function Vu(){return ee.lFrame.bindingIndex++}function Vw(n){let e=ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function xN(){return ee.lFrame.inI18n}function RN(n,e){let t=ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,Nf(e)}function PN(){return ee.lFrame.currentDirectiveIndex}function Nf(n){ee.lFrame.currentDirectiveIndex=n}function ON(n){let e=ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Lw(){return ee.lFrame.currentQueryIndex}function Op(n){ee.lFrame.currentQueryIndex=n}function kN(n){let e=n[te];return e.type===2?e.declTNode:e.type===1?n[Xt]:null}function Bw(n,e,t){if(t&oe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&oe.Host);)if(i=kN(o),i===null||(o=o[fo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ee.lFrame=Uw();return r.currentTNode=e,r.lView=n,!0}function kp(n){let e=Uw(),t=n[te];ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Uw(){let n=ee.lFrame,e=n===null?null:n.child;return e===null?jw(n):e}function jw(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function $w(){let n=ee.lFrame;return ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Hw=$w;function Fp(){let n=$w();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function FN(n){return(ee.lFrame.contextLView=_N(n,ee.lFrame.contextLView))[Et]}function fi(){return ee.lFrame.selectedIndex}function si(n){ee.lFrame.selectedIndex=n}function Lu(){let n=ee.lFrame;return Nw(n.tView,n.selectedIndex)}function VN(){return ee.lFrame.currentNamespace}var qw=!0;function Bu(){return qw}function Uu(n){qw=n}function LN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Tw(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Vp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function nu(n,e,t){zw(n,e,3,t)}function ru(n,e,t,r){(n[Z]&3)===t&&zw(n,e,t,r)}function lf(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function zw(n,e,t,r){let i=r!==void 0?n[eo]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[eo]+=65536),(c<o||o==-1)&&(BN(n,t,e,u),n[eo]=(n[eo]&4294901760)+u+2),u++}function CE(n,e){Te(4,n,e);let t=ae(null);try{e.call(n)}finally{ae(t),Te(5,n,e)}}function BN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[Z]>>14<n[eo]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,CE(c,o)):CE(c,o)}var no=-1,ai=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function UN(n){return(n.flags&8)!==0}function jN(n){return(n.flags&16)!==0}function $N(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];qN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function HN(n){return n===3||n===4||n===6}function qN(n){return n.charCodeAt(0)===64}function co(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?DE(n,t,i,null,e[++r]):DE(n,t,i,null,null))}}return n}function DE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Gw(n){return n!==no}function yu(n){return n&32767}function zN(n){return n>>16}function _u(n,e){let t=zN(n),r=e;for(;t>0;)r=r[fo],t--;return r}var xf=!0;function vu(n){let e=xf;return xf=n,e}var GN=256,Ww=GN-1,Kw=5,WN=0,hn={};function KN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Bs)&&(r=t[Bs]),r==null&&(r=t[Bs]=WN++);let i=r&Ww,o=1<<i;e.data[n+(i>>Kw)]|=o}function Iu(n,e){let t=Qw(n,e);if(t!==-1)return t;let r=e[te];r.firstCreatePass&&(n.injectorIndex=e.length,df(r.data,n),df(e,null),df(r.blueprint,null));let i=Lp(n,e),o=n.injectorIndex;if(Gw(i)){let s=yu(i),c=_u(i,e),u=c[te].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|u[s+d]}return e[o+8]=i,o}function df(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Qw(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Lp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=eC(i),r===null)return no;if(t++,i=i[fo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return no}function Rf(n,e,t){KN(n,e,t)}function Yw(n,e,t){if(t&oe.Optional||n!==void 0)return n;wp(e,"NodeInjector")}function Zw(n,e,t,r){if(t&oe.Optional&&r===void 0&&(r=null),(t&(oe.Self|oe.Host))===0){let i=n[oo],o=It(void 0);try{return i?i.get(e,r,t&oe.Optional):fw(e,r,t&oe.Optional)}finally{It(o)}}return Yw(r,e,t)}function Jw(n,e,t,r=oe.Default,i){if(n!==null){if(e[Z]&2048&&!(r&oe.Self)){let s=JN(n,e,t,r,hn);if(s!==hn)return s}let o=Xw(n,e,t,r,hn);if(o!==hn)return o}return Zw(e,t,r,i)}function Xw(n,e,t,r,i){let o=YN(t);if(typeof o=="function"){if(!Bw(e,n,r))return r&oe.Host?Yw(i,t,r):Zw(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))wp(t);else return s}finally{Hw()}}else if(typeof o=="number"){let s=null,c=Qw(n,e),u=no,d=r&oe.Host?e[fn][Xt]:null;for((c===-1||r&oe.SkipSelf)&&(u=c===-1?Lp(n,e):e[c+8],u===no||!TE(r,!1)?c=-1:(s=e[te],c=yu(u),e=_u(u,e)));c!==-1;){let h=e[te];if(bE(o,c,h.data)){let g=QN(c,e,t,s,r,d);if(g!==hn)return g}u=e[c+8],u!==no&&TE(r,e[te].data[c+8]===d)&&bE(o,c,e)?(s=h,c=yu(u),e=_u(u,e)):c=-1}}return i}function QN(n,e,t,r,i,o){let s=e[te],c=s.data[n+8],u=r==null?po(c)&&xf:r!=s&&(c.type&3)!==0,d=i&oe.Host&&o===c,h=iu(c,s,t,u,d);return h!==null?qs(e,s,h,c,i):hn}function iu(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,d=n.directiveEnd,h=o>>20,g=r?c:c+h,y=i?c+h:d;for(let m=g;m<y;m++){let S=s[m];if(m<u&&t===S||m>=u&&S.type===t)return m}if(i){let m=s[u];if(m&&pn(m)&&m.type===t)return u}return null}function qs(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ai){let c=o;c.resolving&&dw(kM(s[t]));let u=vu(c.canSeeViewProviders);c.resolving=!0;let d,h=c.injectImpl?It(c.injectImpl):null,g=Bw(n,r,oe.Default);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&LN(t,s[t],e)}finally{h!==null&&It(h),vu(u),c.resolving=!1,Hw()}}return o}function YN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Bs)?n[Bs]:void 0;return typeof e=="number"?e>=0?e&Ww:ZN:e}function bE(n,e,t){let r=1<<n;return!!(t[e+(n>>Kw)]&r)}function TE(n,e){return!(n&oe.Self)&&!(n&oe.Host&&e)}var ei=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Jw(this._tNode,this._lView,e,xu(r),t)}};function ZN(){return new ei(Nt(),he())}function pi(n){return Ks(()=>{let e=n.prototype.constructor,t=e[au]||Pf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[au]||Pf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pf(n){return aw(n)?()=>{let e=Pf(pt(n));return e&&e()}:ti(n)}function JN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!mu(s);){let c=Xw(o,s,t,r|oe.Self,hn);if(c!==hn)return c;let u=o.parent;if(!u){let d=s[Cw];if(d){let h=d.get(t,hn,r);if(h!==hn)return h}u=eC(s),s=s[fo]}o=u}return i}function eC(n){let e=n[te],t=e.type;return t===2?e.declTNode:t===1?n[Xt]:null}function SE(n,e=null,t=null,r){let i=XN(n,e,t,r);return i.resolveInjectorInitializers(),i}function XN(n,e=null,t=null,r,i=new Set){let o=[t||Ft,JM(n)];return r=r||(typeof n=="object"?void 0:Vt(n)),new $s(o,e||bp(),r||null,i)}var Ct=class n{static THROW_IF_NOT_FOUND=Xr;static NULL=new du;static create(e,t){if(Array.isArray(e))return SE({name:""},t,e,"");{let r=e.name??"";return SE({name:r},e.parent,e.providers,r)}}static \u0275prov=ge({token:n,providedIn:"any",factory:()=>pe(mw)});static __NG_ELEMENT_ID__=-1};var ex=new G("");ex.__NG_ELEMENT_ID__=n=>{let e=Nt();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(n&oe.Optional)return null;throw new W(204,!1)};var tC=!1,nC=(()=>{class n{static __NG_ELEMENT_ID__=tx;static __NG_ENV_ID__=t=>t}return n})(),Of=class extends nC{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return go(t)?(e(),()=>{}):(Pw(t,e),()=>vN(t,e))}};function tx(){return new Of(he())}var zs=class{},Bp=new G("",{providedIn:"root",factory:()=>!1});var rC=new G(""),iC=new G(""),ju=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new mr(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})();var kf=class extends cn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,cN()&&(this.destroyRef=de(nC,{optional:!0})??void 0,this.pendingTasks=de(ju,{optional:!0})??void 0)}emit(e){let t=ae(null);try{super.next(e)}finally{ae(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof et&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},be=kf;function Eu(...n){}function oC(n){let e,t;function r(){n=Eu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function AE(n){return queueMicrotask(()=>n()),()=>{n=Eu}}var Up="isAngularZone",wu=Up+"_ID",nx=0,Ne=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new be(!1);onMicrotaskEmpty=new be(!1);onStable=new be(!1);onError=new be(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=tC}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ox(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Up)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rx,Eu,Eu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rx={};function jp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ix(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){oC(()=>{n.callbackScheduled=!1,Ff(n),n.isCheckStableRunning=!0,jp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ff(n)}function ox(n){let e=()=>{ix(n)},t=nx++;n._inner=n._inner.fork({name:"angular",properties:{[Up]:!0,[wu]:t,[wu+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(sx(u))return r.invokeTask(o,s,c,u);try{return ME(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),NE(n)}},onInvoke:(r,i,o,s,c,u,d)=>{try{return ME(n),r.invoke(o,s,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ax(u)&&e(),NE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ff(n),jp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ff(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ME(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NE(n){n._nesting--,jp(n)}var Vf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new be;onMicrotaskEmpty=new be;onStable=new be;onError=new be;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function sx(n){return sC(n,"__ignore_ng_zone__")}function ax(n){return sC(n,"__scheduler_tick__")}function sC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var jn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},cx=new G("",{providedIn:"root",factory:()=>{let n=de(Ne),e=de(jn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function ux(){return mo(Nt(),he())}function mo(n,e){return new vn(_n(n,e))}var vn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ux}return n})();function lx(n){return n instanceof vn?n.nativeElement:n}function dx(n){return typeof n=="function"&&n[Qt]!==void 0}function yo(n,e){let t=Uh(n,e?.equal),r=t[Qt];return t.set=i=>Ac(r,i),t.update=i=>jh(r,i),t.asReadonly=hx.bind(t),t}function hx(){let n=this[Qt];if(n.readonlyFn===void 0){let e=()=>this();e[Qt]=n,n.readonlyFn=e}return n.readonlyFn}function aC(n){return dx(n)&&typeof n.set=="function"}function fx(){return this._results[Symbol.iterator]()}var Lf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new cn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=GM(e);(this._changesDetected=!zM(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fx};function cC(n){return(n.flags&128)===128}var uC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(uC||{}),lC=new Map,px=0;function gx(){return px++}function mx(n){lC.set(n[Pu],n)}function Bf(n){lC.delete(n[Pu])}var xE="__ngContext__";function _o(n,e){Er(e)?(n[xE]=e[Pu],mx(e)):n[xE]=e}function dC(n){return fC(n[Hs])}function hC(n){return fC(n[Jt])}function fC(n){for(;n!==null&&!zn(n);)n=n[Jt];return n}var Uf;function pC(n){Uf=n}function gC(){if(Uf!==void 0)return Uf;if(typeof document<"u")return document;throw new W(210,!1)}var $p=new G("",{providedIn:"root",factory:()=>yx}),yx="ng",Hp=new G(""),gi=new G("",{providedIn:"platform",factory:()=>"unknown"});var qp=new G("",{providedIn:"root",factory:()=>gC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _x="h",vx="b";var mC=!1,Ix=new G("",{providedIn:"root",factory:()=>mC});var yC=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(yC||{}),$u=new G(""),RE=new Set;function Ex(n){RE.has(n)||(RE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var wx=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})();var Cx=(n,e,t,r)=>{};function Dx(n,e,t,r){Cx(n,e,t,r)}var bx=()=>null;function _C(n,e,t=!1){return bx(n,e,t)}function vC(n,e){let t=n.contentQueries;if(t!==null){let r=ae(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Op(o),c.contentQueries(2,e[s],s)}}}finally{ae(r)}}}function jf(n,e,t){Op(0);let r=ae(null);try{e(n,t)}finally{ae(r)}}function zp(n,e,t){if(Tp(e)){let r=ae(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{ae(r)}}}var yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(yn||{}),Zc;function Tx(){if(Zc===void 0&&(Zc=null,dn.trustedTypes))try{Zc=dn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zc}function Hu(n){return Tx()?.createHTML(n)||n}var Jc;function Sx(){if(Jc===void 0&&(Jc=null,dn.trustedTypes))try{Jc=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Jc}function PE(n){return Sx()?.createHTML(n)||n}var $n=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iw})`}},$f=class extends $n{getTypeName(){return"HTML"}},Hf=class extends $n{getTypeName(){return"Style"}},qf=class extends $n{getTypeName(){return"Script"}},zf=class extends $n{getTypeName(){return"URL"}},Gf=class extends $n{getTypeName(){return"ResourceURL"}};function br(n){return n instanceof $n?n.changingThisBreaksApplicationSecurity:n}function mi(n,e){let t=Ax(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${iw})`)}return t===e}function Ax(n){return n instanceof $n&&n.getTypeName()||null}function IC(n){return new $f(n)}function EC(n){return new Hf(n)}function wC(n){return new qf(n)}function CC(n){return new zf(n)}function DC(n){return new Gf(n)}function Mx(n){let e=new Kf(n);return Nx()?new Wf(e):e}var Wf=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Hu(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Kf=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Hu(e),t}};function Nx(){try{return!!new window.DOMParser().parseFromString(Hu(""),"text/html")}catch{return!1}}var xx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gp(n){return n=String(n),n.match(xx)?n:"unsafe:"+n}function Gn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Ys(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var bC=Gn("area,br,col,hr,img,wbr"),TC=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),SC=Gn("rp,rt"),Rx=Ys(SC,TC),Px=Ys(TC,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ox=Ys(SC,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),OE=Ys(bC,Px,Ox,Rx),AC=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kx=Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fx=Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Vx=Ys(AC,kx,Fx),Lx=Gn("script,style,template"),Qf=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=jx(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=Ux(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=kE(e).toLowerCase();if(!OE.hasOwnProperty(t))return this.sanitizedSomething=!0,!Lx.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,c=s.toLowerCase();if(!Vx.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let u=o.value;AC[c]&&(u=Gp(u)),this.buf.push(" ",s,'="',FE(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=kE(e).toLowerCase();OE.hasOwnProperty(t)&&!bC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(FE(e))}};function Bx(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Ux(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw MC(e);return e}function jx(n){let e=n.firstChild;if(e&&Bx(n,e))throw MC(e);return e}function kE(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function MC(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var $x=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hx=/([^\#-~ |!])/g;function FE(n){return n.replace(/&/g,"&amp;").replace($x,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(Hx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Xc;function Wp(n,e){let t=null;try{Xc=Xc||Mx(n);let r=e?String(e):"";t=Xc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Xc.getInertBodyElement(r)}while(r!==o);let c=new Qf().sanitizeChildren(VE(t)||t);return Hu(c)}finally{if(t){let r=VE(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function VE(n){return"content"in n&&qx(n)?n.content:null}function qx(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Wn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wn||{});function NC(n){let e=zx();return e?PE(e.sanitize(Wn.HTML,n)||""):mi(n,"HTML")?PE(br(n)):Wp(gC(),ro(n))}function zx(){let n=he();return n&&n[Bn].sanitizer}var Gx=/^>|^->|<!--|-->|--!>|<!-$/g,Wx=/(<|>)/g,Kx="\u200B$1\u200B";function Qx(n){return n.replace(Gx,e=>e.replace(Wx,Kx))}function Yx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var xC="ng-template";function Zx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Yx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Kp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Kp(n){return n.type===4&&n.value!==xC}function Jx(n,e,t){let r=n.type===4&&!t?xC:n.value;return e===r}function Xx(n,e,t){let r=4,i=n.attrs,o=i!==null?nR(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Zt(r)&&!Zt(u))return!1;if(s&&Zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Jx(n,u,t)||u===""&&e.length===1){if(Zt(r))return!1;s=!0}}else if(r&8){if(i===null||!Zx(n,i,u,t)){if(Zt(r))return!1;s=!0}}else{let d=e[++c],h=eR(u,i,Kp(n),t);if(h===-1){if(Zt(r))return!1;s=!0;continue}if(d!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Zt(r))return!1;s=!0}}}}return Zt(r)||s}function Zt(n){return(n&1)===0}function eR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return rR(e,n)}function tR(n,e,t=!1){for(let r=0;r<e.length;r++)if(Xx(n,e[r],t))return!0;return!1}function nR(n){for(let e=0;e<n.length;e++){let t=n[e];if(HN(t))return e}return n.length}function rR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LE(n,e){return n?":not("+e.trim()+")":e}function iR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zt(s)&&(e+=LE(o,i),i=""),r=s,o=o||!Zt(r);t++}return i!==""&&(e+=LE(o,i)),e}function oR(n){return n.map(iR).join(",")}function sR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var en={};function aR(n,e){return n.createText(e)}function cR(n,e,t){n.setValue(e,t)}function uR(n,e){return n.createComment(Qx(e))}function RC(n,e,t){return n.createElement(e,t)}function Cu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function PC(n,e,t){n.appendChild(e,t)}function BE(n,e,t,r,i){r!==null?Cu(n,e,t,r,i):PC(n,e,t)}function lR(n,e,t){n.removeChild(null,e,t)}function dR(n,e,t){n.setAttribute(e,"style",t)}function hR(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&$N(n,e,r),i!==null&&hR(n,e,i),o!==null&&dR(n,e,o)}function Qp(n,e,t,r,i,o,s,c,u,d,h){let g=wt+r,y=g+i,m=fR(g,y),S=typeof d=="function"?d():d;return m[te]={type:n,blueprint:m,template:t,queries:null,viewQuery:c,declTNode:e,data:m.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function fR(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:en);return t}function pR(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Qp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Yp(n,e,t,r,i,o,s,c,u,d,h){let g=e.blueprint.slice();return g[qn]=i,g[Z]=r|4|128|8|64|1024,(d!==null||n&&n[Z]&2048)&&(g[Z]|=2048),xw(g),g[ot]=g[fo]=n,g[Et]=t,g[Bn]=s||n&&n[Bn],g[Le]=c||n&&n[Le],g[oo]=u||n&&n[oo]||null,g[Xt]=o,g[Pu]=gx(),g[hu]=h,g[Cw]=d,g[fn]=e.type==2?n[fn]:g,g}function gR(n,e,t){let r=_n(e,n),i=pR(t),o=n[Bn].rendererFactory,s=Zp(n,Yp(n,i,null,kC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function kC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function FC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zp(n,e){return n[Hs]?n[IE][Jt]=e:n[Hs]=e,n[IE]=e,e}function k(n=1){VC(Ge(),he(),fi()+n,!1)}function VC(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&nu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ru(e,o,0,t)}si(t)}var qu=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qu||{});function Yf(n,e,t,r){let i=ae(null);try{let[o,s,c]=n.inputs[t],u=null;(s&qu.SignalBased)!==0&&(u=e[o][Qt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):bw(e,u,o,r)}finally{ae(i)}}function LC(n,e,t,r,i){let o=fi(),s=r&2;try{si(-1),s&&e.length>wt&&VC(n,e,wt,!1),Te(s?2:0,i),t(r,i)}finally{si(o),Te(s?3:1,i)}}function zu(n,e,t){ER(n,e,t),(t.flags&64)===64&&wR(n,e,t)}function Jp(n,e,t=_n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function mR(n,e,t,r){let o=r.get(Ix,mC)||t===yn.ShadowDom,s=n.selectRootElement(e,o);return yR(s),s}function yR(n){_R(n)}var _R=()=>null;function vR(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Xp(n,e,t,r,i,o,s,c){if(!c&&tg(e,n,t,r,i)){po(e)&&IR(t,e.index);return}if(e.type&3){let u=_n(e,t);r=vR(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function IR(n,e){let t=mn(e,n);t[Z]&16||(t[Z]|=64)}function ER(n,e,t){let r=t.directiveStart,i=t.directiveEnd;po(t)&&gR(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Iu(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=qs(e,n,s,t);if(_o(u,e),o!==null&&TR(e,s-r,u,c,t,o),pn(c)){let d=mn(t.index,e);d[Et]=qs(e,n,s,t)}}}function wR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=PN();try{si(o);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];Nf(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&CR(u,d)}}finally{si(-1),Nf(s)}}function CR(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function eg(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];tR(e,o.selectors,!1)&&(r??=[],pn(o)?r.unshift(o):r.push(o))}return r}function DR(n,e,t,r,i,o){let s=_n(n,e);bR(e[Le],s,o,n.value,t,r,i)}function bR(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?ro(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function TR(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1];Yf(r,t,u,d)}}function SR(n,e){let t=n[oo],r=t?t.get(jn,null):null;r&&r.handleError(e)}function tg(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],h=s[u+1],g=e.data[d];Yf(g,t[d],h,i),c=!0}if(o)for(let u of o){let d=t[u],h=e.data[u];Yf(h,d,r,i),c=!0}return c}function AR(n,e){let t=mn(e,n),r=t[te];MR(r,t);let i=t[qn];i!==null&&t[hu]===null&&(t[hu]=_C(i,t[oo])),Te(18),ng(r,t,t[Et]),Te(19,t[Et])}function MR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ng(n,e,t){kp(e);try{let r=n.viewQuery;r!==null&&jf(1,r,t);let i=n.template;i!==null&&LC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Un]?.finishViewCreation(n),n.staticContentQueries&&vC(n,e),n.staticViewQueries&&jf(2,n.viewQuery,t);let o=n.components;o!==null&&NR(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,Fp()}}function NR(n,e){for(let t=0;t<e.length;t++)AR(n,e[t])}function xR(n,e,t,r){let i=ae(null);try{let o=e.tView,c=n[Z]&4096?4096:16,u=Yp(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[ri]=d;let h=n[Un];return h!==null&&(u[Un]=h.createEmbeddedView(o)),ng(o,u,t),u}finally{ae(i)}}function UE(n,e){return!e||e.firstChild===null||cC(n)}var RR;function rg(n,e){return RR(n,e)}var Hn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Hn||{});function BC(n){return(n.flags&32)===32}function to(n,e,t,r,i){if(r!=null){let o,s=!1;zn(r)?o=r:Er(r)&&(s=!0,r=r[qn]);let c=gn(r);n===0&&t!==null?i==null?PC(e,t,c):Cu(e,t,c,i||null,!0):n===1&&t!==null?Cu(e,t,c,i||null,!0):n===2?lR(e,c,s):n===3&&e.destroyNode(c),o!=null&&qR(e,n,o,t,i)}}function PR(n,e){UC(n,e),e[qn]=null,e[Xt]=null}function OR(n,e,t,r,i,o){r[qn]=i,r[Xt]=e,Wu(n,r,t,1,i,o)}function UC(n,e){e[Bn].changeDetectionScheduler?.notify(9),Wu(n,e,e[Le],2,null,null)}function kR(n){let e=n[Hs];if(!e)return hf(n[te],n);for(;e;){let t=null;if(Er(e))t=e[Hs];else{let r=e[Mt];r&&(t=r)}if(!t){for(;e&&!e[Jt]&&e!==n;)Er(e)&&hf(e[te],e),e=e[ot];e===null&&(e=n),Er(e)&&hf(e[te],e),t=e&&e[Jt]}e=t}}function ig(n,e){let t=n[so],r=t.indexOf(e);t.splice(r,1)}function jC(n,e){if(go(e))return;let t=e[Le];t.destroyNode&&Wu(n,e,t,3,null,null),kR(e)}function hf(n,e){if(go(e))return;let t=ae(null);try{e[Z]&=-129,e[Z]|=256,e[Lt]&&Vh(e[Lt]),VR(n,e),FR(n,e),e[te].type===1&&e[Le].destroy();let r=e[ri];if(r!==null&&zn(e[ot])){r!==e[ot]&&ig(r,e);let i=e[Un];i!==null&&i.detachView(n)}Bf(e)}finally{ae(t)}}function FR(n,e){let t=n.cleanup,r=e[fu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[fu]=null);let i=e[Ir];if(i!==null){e[Ir]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[pu];if(o!==null){e[pu]=null;for(let s of o)s.destroy()}}function VR(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ai)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Te(4,c,u);try{u.call(c)}finally{Te(5,c,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function LR(n,e,t){return BR(n,e.parent,t)}function BR(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qn];if(po(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===yn.None||i===yn.Emulated)return null}return _n(r,t)}function UR(n,e,t){return $R(n,e,t)}function jR(n,e,t){return n.type&40?_n(n,t):null}var $R=jR,jE;function Gu(n,e,t,r){let i=LR(n,r,e),o=e[Le],s=r.parent||e[Xt],c=UR(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)BE(o,i,t[u],c,!1);else BE(o,i,t,c,!1);jE!==void 0&&jE(o,r,e,t,i)}function Ls(n,e){if(e!==null){let t=e.type;if(t&3)return _n(e,n);if(t&4)return Zf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ls(n,r);{let i=n[e.index];return zn(i)?Zf(-1,i):gn(i)}}else{if(t&128)return Ls(n,e.next);if(t&32)return rg(e,n)()||gn(n[e.index]);{let r=$C(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oi(n[fn]);return Ls(i,r)}else return Ls(n,e.next)}}}return null}function $C(n,e){if(e!==null){let r=n[fn][Xt],i=e.projection;return r.projection[i]}return null}function Zf(n,e){let t=Mt+n+1;if(t<e.length){let r=e[t],i=r[te].firstChild;if(i!==null)return Ls(r,i)}return e[ii]}function og(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&_o(gn(c),r),t.flags|=2),!BC(t))if(u&8)og(n,e,t.child,r,i,o,!1),to(e,n,i,c,o);else if(u&32){let d=rg(t,r),h;for(;h=d();)to(e,n,i,h,o);to(e,n,i,c,o)}else u&16?HR(n,e,r,t,i,o):to(e,n,i,c,o);t=s?t.projectionNext:t.next}}function Wu(n,e,t,r,i,o){og(t,r,n.firstChild,e,i,o,!1)}function HR(n,e,t,r,i,o){let s=t[fn],u=s[Xt].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let h=u[d];to(e,n,i,h,o)}else{let d=u,h=s[ot];cC(r)&&(d.flags|=128),og(n,e,d,h,i,o,!0)}}function qR(n,e,t,r,i){let o=t[ii],s=gn(t);o!==s&&to(e,n,r,o,i);for(let c=Mt;c<t.length;c++){let u=t[c];Wu(u[te],u,n,e,r,o)}}function zR(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Hn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hn.Important),n.setStyle(t,r,i,o))}}function Du(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(gn(o)),zn(o)&&GR(o,r);let s=t.type;if(s&8)Du(n,e,t.child,r);else if(s&32){let c=rg(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=$C(e,t);if(Array.isArray(c))r.push(...c);else{let u=oi(e[fn]);Du(u[te],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function GR(n,e){for(let t=Mt;t<n.length;t++){let r=n[t],i=r[te].firstChild;i!==null&&Du(r[te],r,i,e)}n[ii]!==n[qn]&&e.push(n[ii])}function HC(n){if(n[uf]!==null){for(let e of n[uf])e.impl.addSequence(e);n[uf].length=0}}var qC=[];function WR(n){return n[Lt]??KR(n)}function KR(n){let e=qC.pop()??Object.create(YR);return e.lView=n,e}function QR(n){n.lView[Lt]!==n&&(n.lView=null,qC.push(n))}var YR=ye(ie({},Rs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Fu(n.lView)},consumerOnSignalRead(){this.lView[Lt]=this}});function ZR(n){let e=n[Lt]??Object.create(JR);return e.lView=n,e}var JR=ye(ie({},Rs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=oi(n.lView);for(;e&&!zC(e[te]);)e=oi(e);e&&Rw(e)},consumerOnSignalRead(){this.lView[Lt]=this}});function zC(n){return n.type!==2}function GC(n){if(n[pu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[pu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var XR=100;function WC(n,e=!0,t=0){let i=n[Bn].rendererFactory,o=!1;o||i.begin?.();try{eP(n,t)}catch(s){throw e&&SR(n,s),s}finally{o||i.end?.()}}function eP(n,e){let t=Fw();try{wE(!0),Jf(n,e);let r=0;for(;ku(n);){if(r===XR)throw new W(103,!1);r++,Jf(n,1)}}finally{wE(t)}}function tP(n,e,t,r){if(go(e))return;let i=e[Z],o=!1,s=!1;kp(e);let c=!0,u=null,d=null;o||(zC(n)?(d=WR(e),u=bc(d)):xh()===null?(c=!1,d=ZR(e),u=bc(d)):e[Lt]&&(Vh(e[Lt]),e[Lt]=null));try{xw(e),NN(n.bindingStartIndex),t!==null&&LC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let m=n.preOrderCheckHooks;m!==null&&nu(e,m,null)}else{let m=n.preOrderHooks;m!==null&&ru(e,m,0,null),lf(e,0)}if(s||nP(e),GC(e),KC(e,0),n.contentQueries!==null&&vC(n,e),!o)if(h){let m=n.contentCheckHooks;m!==null&&nu(e,m)}else{let m=n.contentHooks;m!==null&&ru(e,m,1),lf(e,1)}iP(n,e);let g=n.components;g!==null&&YC(e,g,0);let y=n.viewQuery;if(y!==null&&jf(2,y,r),!o)if(h){let m=n.viewCheckHooks;m!==null&&nu(e,m)}else{let m=n.viewHooks;m!==null&&ru(e,m,2),lf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cf]){for(let m of e[cf])m();e[cf]=null}o||(HC(e),e[Z]&=-73)}catch(h){throw o||Fu(e),h}finally{d!==null&&(kh(d,u),c&&QR(d)),Fp()}}function KC(n,e){for(let t=dC(n);t!==null;t=hC(t))for(let r=Mt;r<t.length;r++){let i=t[r];QC(i,e)}}function nP(n){for(let e=dC(n);e!==null;e=hC(e)){if(!(e[Z]&2))continue;let t=e[so];for(let r=0;r<t.length;r++){let i=t[r];Rw(i)}}}function rP(n,e,t){Te(18);let r=mn(e,n);QC(r,t),Te(19,r[Et])}function QC(n,e){Ap(n)&&Jf(n,e)}function Jf(n,e){let r=n[te],i=n[Z],o=n[Lt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Fh(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)tP(r,n,r.template,n[Et]);else if(i&8192){GC(n),KC(n,1);let c=r.components;c!==null&&YC(n,c,1),HC(n)}}function YC(n,e,t){for(let r=0;r<e.length;r++)rP(n,e[r],t)}function iP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)si(~i);else{let o=i,s=t[++r],c=t[++r];RN(s,o);let u=e[o];Te(24,u),c(2,u),Te(25,u)}}}finally{si(-1)}}function sg(n,e){let t=Fw()?64:1088;for(n[Bn].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=oi(n);if(mu(n)&&!r)return n;n=r}return null}function ZC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function oP(n,e,t,r=!0){let i=e[te];if(sP(i,e,n,t),r){let s=Zf(t,n),c=e[Le],u=c.parentNode(n[ii]);u!==null&&OR(i,n[Xt],c,e,u,s)}let o=e[hu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Xf(n,e){if(n.length<=Mt)return;let t=Mt+e,r=n[t];if(r){let i=r[ri];i!==null&&i!==n&&ig(i,r),e>0&&(n[t-1][Jt]=r[Jt]);let o=lu(n,Mt+e);PR(r[te],r);let s=o[Un];s!==null&&s.detachView(o[te]),r[ot]=null,r[Jt]=null,r[Z]&=-129}return r}function sP(n,e,t,r){let i=Mt+r,o=t.length;r>0&&(t[i-1][Jt]=e),r<o-Mt?(e[Jt]=t[i],gw(t,Mt+r,e)):(t.push(e),e[Jt]=null),e[ot]=t;let s=e[ri];s!==null&&t!==s&&JC(s,e);let c=e[Un];c!==null&&c.insertView(n),Af(e),e[Z]|=128}function JC(n,e){let t=n[so],r=e[ot];if(Er(r))n[Z]|=2;else{let i=r[ot][fn];e[fn]!==i&&(n[Z]|=2)}t===null?n[so]=[e]:t.push(e)}var Gs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[te];return Du(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Et]}set context(e){this._lView[Et]=e}get destroyed(){return go(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ot];if(zn(e)){let t=e[gu],r=t?t.indexOf(this):-1;r>-1&&(Xf(e,r),lu(t,r))}this._attachedToViewContainer=!1}jC(this._lView[te],this._lView)}onDestroy(e){Pw(this._lView,e)}markForCheck(){sg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){Af(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,WC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=mu(this._lView),t=this._lView[ri];t!==null&&!e&&ig(t,this._lView),UC(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=mu(this._lView),r=this._lView[ri];r!==null&&!t&&JC(r,this._lView),Af(this._lView)}};var ci=(()=>{class n{static __NG_ELEMENT_ID__=uP}return n})(),aP=ci,cP=class extends aP{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=xR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Gs(i)}};function uP(){return Ku(Nt(),he())}function Ku(n,e){return n.type&4?new cP(e,n,mo(n,e)):null}function Qu(n,e,t,r,i){let o=n.data[e];if(o===null)o=lP(n,e,t,r,i),xN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=SN();o.injectorIndex=s===null?-1:s.injectorIndex}return hi(o,!0),o}function lP(n,e,t,r,i){let o=Ow(),s=Rp(),c=s?o:o&&o.parent,u=n.data[e]=hP(n,c,t,e,r,i);return dP(n,u,o,s),u}function dP(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function hP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return DN()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var x5=new RegExp(`^(\\d+)*(${vx}|${_x})*(.*)`);var fP=()=>null;function $E(n,e){return fP(n,e)}var pP=class{},XC=class{},ep=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Vt(e)}.`)}},ag=class{static NULL=new ep},uo=class{},vo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>gP()}return n})();function gP(){let n=he(),e=Nt(),t=mn(e.index,n);return(Er(t)?t:n)[Le]}var mP=(()=>{class n{static \u0275prov=ge({token:n,providedIn:"root",factory:()=>null})}return n})();var ff={},tp=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xu(r);let i=this.injector.get(e,ff,r);return i!==ff||t===ff?i:this.parentInjector.get(e,t,r)}};function np(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=fE(i,c);else if(o==2){let u=c,d=e[++s];r=fE(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function j(n,e=oe.Default){let t=he();if(t===null)return pe(n,e);let r=Nt();return Jw(r,t,pt(n),e)}function cg(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c,u=null,d=null,h=_P(s);h===null?c=s:[c,u,d]=h,EP(n,e,t,c,o,u,d)}o!==null&&r!==null&&yP(t,r,o)}function yP(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new W(-301,!1);r.push(e[i],o)}}function _P(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let c=n[s];if(s===0&&pn(c)&&(e=c),c.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,vP(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function vP(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function IP(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function EP(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let y=0;y<c;y++){let m=r[y];!u&&pn(m)&&(u=!0,IP(n,t,y)),Rf(Iu(t,e),n,m.type)}SP(t,n.data.length,c);for(let y=0;y<c;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let d=!1,h=!1,g=FC(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let y=0;y<c;y++){let m=r[y];if(t.mergedAttrs=co(t.mergedAttrs,m.hostAttrs),CP(n,t,e,g,m),TP(g,m,i),s!==null&&s.has(m)){let[P,R]=s.get(m);t.directiveToIndex.set(m.type,[g,P+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,g);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let S=m.type.prototype;!d&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}wP(n,t,o)}function wP(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))HE(0,e,i,r),HE(1,e,i,r),zE(e,r,!1);else{let o=t.get(i);qE(0,e,o,r),qE(1,e,o,r),zE(e,r,!0)}}}function HE(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),e0(e,o)}}function qE(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),e0(e,s)}}function e0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zE(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Kp(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let d=i[u];for(let h of d)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let d=o[u];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function CP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ti(i.type,!0)),s=new ai(o,pn(i),j);n.blueprint[r]=s,t[r]=s,DP(n,e,r,FC(n,t,i.hostVars,en),i)}function DP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;bP(s)!=c&&s.push(c),s.push(t,r,o)}}function bP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function TP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pn(e)&&(t[""]=n)}}function SP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function t0(n,e,t,r,i,o,s,c){let u=e.consts,d=ao(u,s),h=Qu(e,n,2,r,d);return o&&cg(e,t,h,ao(u,c),i),h.mergedAttrs=co(h.mergedAttrs,h.attrs),h.attrs!==null&&np(h,h.attrs,!1),h.mergedAttrs!==null&&np(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function n0(n,e){Vp(n,e),Tp(e)&&n.queries.elementEnd(e)}var rp=class extends ag{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=js(e);return new bu(t,this.ngModule)}};function AP(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&qu.SignalBased)!==0};return i&&(o.transform=i),o})}function MP(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function NP(n,e,t){let r=e instanceof wr?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new tp(t,r):t}function xP(n){let e=n.get(uo,null);if(e===null)throw new W(407,!1);let t=n.get(mP,null),r=n.get(zs,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function RP(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return RC(e,t,t==="svg"?fN:t==="math"?pN:null)}var bu=class extends XC{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=AP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=MP(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=oR(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Te(22);let o=ae(null);try{let s=this.componentDef,c=r?["ng-version","19.2.13"]:sR(this.componentDef.selectors[0]),u=Qp(0,null,null,1,0,null,null,null,null,[c],null),d=NP(s,i||this.ngModule,e),h=xP(d),g=h.rendererFactory.createRenderer(null,s),y=r?mR(g,r,s.encapsulation,d):RP(s,g),m=Yp(null,u,null,512|kC(s),null,null,h,g,d,null,_C(y,d,!0));m[wt]=y,kp(m);let S=null;try{let P=t0(wt,u,m,"#host",()=>[this.componentDef],!0,0);y&&(OC(g,y,P),_o(y,m)),zu(u,m,P),zp(u,P,m),n0(u,P),t!==void 0&&PP(P,this.ngContentSelectors,t),S=mn(P.index,m),m[Et]=S[Et],ng(u,m,null)}catch(P){throw S!==null&&Bf(S),Bf(m),P}finally{Te(23),Fp()}return new ip(this.componentType,m)}finally{ae(o)}}},ip=class extends pP{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Nw(t[te],wt),this.location=mo(this._tNode,t),this.instance=mn(this._tNode.index,t)[Et],this.hostView=this.changeDetectorRef=new Gs(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=tg(r,i[te],i,e,t);this.previousInputValues.set(e,t);let s=mn(r.index,i);sg(s,1)}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Io=(()=>{class n{static __NG_ELEMENT_ID__=OP}return n})();function OP(){let n=Nt();return i0(n,he())}var kP=Io,r0=class extends kP{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mo(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){let e=Lp(this._hostTNode,this._hostLView);if(Gw(e)){let t=_u(e,this._hostLView),r=yu(e),i=t[te].data[r+8];return new ei(i,t)}else return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=GE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$E(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,UE(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!uN(e),c;if(s)c=t;else{let S=t||{};c=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new bu(js(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let P=(s?d:this.parentInjector).get(wr,null);P&&(o=P)}let h=js(u.componentType??{}),g=$E(this._lContainer,h?.id??null),y=g?.firstChild??null,m=u.create(d,i,y,o);return this.insertImpl(m.hostView,c,UE(this._hostTNode,g)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(yN(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[ot],d=new r0(u,u[Xt],u[ot]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return oP(s,i,o,r),e.attachToViewContainerRef(),gw(pf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=GE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xf(this._lContainer,t);r&&(lu(pf(this._lContainer),t),jC(r[te],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xf(this._lContainer,t);return r&&lu(pf(this._lContainer),t)!=null?new Gs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function GE(n){return n[gu]}function pf(n){return n[gu]||(n[gu]=[])}function i0(n,e){let t,r=e[n.index];return zn(r)?t=r:(t=ZC(r,e,null,n),e[n.index]=t,Zp(e,t)),VP(t,e,n,r),new r0(t,n,e)}function FP(n,e){let t=n[Le],r=t.createComment(""),i=_n(e,n),o=t.parentNode(i);return Cu(t,o,r,t.nextSibling(i),!1),r}var VP=UP,LP=()=>!1;function BP(n,e,t){return LP(n,e,t)}function UP(n,e,t,r){if(n[ii])return;let i;t.type&8?i=gn(r):i=FP(e,t),n[ii]=i}var op=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},sp=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ug(e,t).matches!==null&&this.queries[t].setDirty()}},ap=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=KP(e):this.predicate=e}},cp=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},up=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,jP(t,o)),this.matchTNodeWithReadOption(e,t,iu(t,e,o,!1,!1))}else r===ci?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,iu(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===vn||i===Io||i===ci&&t.type&4)this.addMatch(t.index,-2);else{let o=iu(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function jP(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $P(n,e){return n.type&11?mo(n,e):n.type&4?Ku(n,e):null}function HP(n,e,t,r){return t===-1?$P(e,n):t===-2?qP(n,e,r):qs(n,n[te],t,e)}function qP(n,e,t){if(t===vn)return mo(e,n);if(t===ci)return Ku(e,n);if(t===Io)return i0(e,n)}function o0(n,e,t,r){let i=e[Un].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let d=s[u];if(d<0)c.push(null);else{let h=o[d];c.push(HP(e,h,s[u+1],t.metadata.read))}}i.matches=c}return i.matches}function lp(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=o0(n,e,i,t);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let d=o[c+1],h=e[-u];for(let g=Mt;g<h.length;g++){let y=h[g];y[ri]===y[ot]&&lp(y[te],y,d,r)}if(h[so]!==null){let g=h[so];for(let y=0;y<g.length;y++){let m=g[y];lp(m[te],m,d,r)}}}}}return r}function zP(n,e){return n[Un].queries[e].queryList}function GP(n,e,t){let r=new Lf((t&4)===4);return IN(n,e,r,r.destroy),(e[Un]??=new sp).queries.push(new op(r))-1}function WP(n,e,t){let r=Ge();return r.firstCreatePass&&(QP(r,new ap(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),GP(r,he(),e)}function KP(n){return n.split(",").map(e=>e.trim())}function QP(n,e,t){n.queries===null&&(n.queries=new cp),n.queries.track(new up(e,t))}function ug(n,e){return n.queries.getByIndex(e)}function YP(n,e){let t=n[te],r=ug(t,e);return r.crossesNgTemplate?lp(t,n,e,[]):o0(t,n,r,e)}var Tu=class{};var Su=class extends Tu{injector;componentFactoryResolver=new rp(this);instance=null;constructor(e){super();let t=new $s([...e.providers,{provide:Tu,useValue:this},{provide:ag,useValue:this.componentFactoryResolver}],e.parent||bp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ZP(n,e,t=null){return new Su({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var JP=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=_w(!1,t.type),i=r.length>0?ZP([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ge({token:n,providedIn:"environment",factory:()=>new n(pe(wr))})}return n})();function bt(n){return Ks(()=>{let e=s0(n),t=ye(ie({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===uC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JP).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||yn.Emulated,styles:n.styles||Ft,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ex("NgStandalone"),a0(t);let r=n.dependencies;return t.directiveDefs=WE(r,!1),t.pipeDefs=WE(r,!0),t.id=rO(t),t})}function XP(n){return js(n)||YM(n)}function eO(n){return n!==null}function Tr(n){return Ks(()=>({type:n.type,bootstrap:n.bootstrap||Ft,declarations:n.declarations||Ft,imports:n.imports||Ft,exports:n.exports||Ft,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tO(n,e){if(n==null)return ni;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=qu.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function nO(n){if(n==null)return ni;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ke(n){return Ks(()=>{let e=s0(n);return a0(e),e})}function Eo(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function s0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ni,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ft,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tO(n.inputs,e),outputs:nO(n.outputs),debugInfo:null}}function a0(n){n.features?.forEach(e=>e(n))}function WE(n,e){if(!n)return null;let t=e?ZM:XP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(eO)}function rO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iO(n){return Object.getPrototypeOf(n.prototype).constructor}function mt(n){let e=iO(n.type),t=!0,r=[n];for(;e;){let i;if(pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=gf(n.inputs),s.declaredInputs=gf(n.declaredInputs),s.outputs=gf(n.outputs);let c=i.hostBindings;c&&uO(n,c);let u=i.viewQuery,d=i.contentQueries;if(u&&aO(n,u),d&&cO(n,d),oO(n,i),AM(n.outputs,i.outputs),pn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===mt&&(t=!1)}}e=Object.getPrototypeOf(e)}sO(r)}function oO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function sO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=co(i.hostAttrs,t=co(t,i.hostAttrs))}}function gf(n){return n===ni?{}:n===Ft?[]:n}function aO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function cO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function uO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function c0(n){return dO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function lO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function dO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function lg(n,e,t){return n[e]=t}function hO(n,e){return n[e]}function Cr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function u0(n,e,t,r){let i=Cr(n,e,t);return Cr(n,e+1,r)||i}function fO(n,e,t,r,i,o,s,c,u){let d=e.consts,h=Qu(e,n,4,s||null,c||null);xp()&&cg(e,t,h,ao(d,u),eg),h.mergedAttrs=co(h.mergedAttrs,h.attrs),Vp(e,h);let g=h.tView=Qp(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function pO(n,e,t,r,i,o,s,c,u,d){let h=t+wt,g=e.firstCreatePass?fO(h,e,n,r,i,o,s,c,u):e.data[h];hi(g,!1);let y=gO(e,n,g,t);Bu()&&Gu(e,n,y,g),_o(y,n);let m=ZC(y,n,y,g);return n[h]=m,Zp(n,m),BP(m,g,n),Ou(g)&&zu(e,n,g),u!=null&&Jp(n,g,d),g}function Ee(n,e,t,r,i,o,s,c){let u=he(),d=Ge(),h=ao(d.consts,o);return pO(u,d,n,e,t,r,i,h,s,c),Ee}var gO=mO;function mO(n,e,t,r){return Uu(!0),e[Le].createComment("")}var l0=new G("");var yO=(()=>{class n{static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new dp})}return n})(),dp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function wo(n){return!!n&&typeof n.then=="function"}function dg(n){return!!n&&typeof n.subscribe=="function"}var _O=new G("");var d0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=de(_O,{optional:!0})??[];injector=de(Ct);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ww(this.injector,i);if(wo(o))t.push(o);else if(dg(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vO=new G("");function IO(){Bh(()=>{throw new W(600,!1)})}function EO(n){return n.isBoundToModule}var wO=10;var lo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=de(cx);afterRenderManager=de(wx);zonelessEnabled=de(Bp);rootEffectScheduler=de(yO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new cn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=de(ju).hasPendingTasks.pipe(ln(t=>!t));constructor(){de($u,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=de(wr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ct.NULL){Te(10);let o=t instanceof XC;if(!this._injector.get(d0).done){let m="";throw new W(405,m)}let c;o?c=t:c=this._injector.get(ag).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=EO(c)?void 0:this._injector.get(Tu),d=r||c.selector,h=c.create(i,[],d,u),g=h.location.nativeElement,y=h.injector.get(l0,null);return y?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),ou(this.components,h),y?.unregisterApplication(g)}),this._loadComponent(h),Te(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(yC.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new W(101,!1);let t=ae(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ae(t),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(uo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<wO;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)CO(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ku(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ou(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(vO,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ou(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ou(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function CO(n,e,t,r){if(!t&&!ku(n))return;WC(n,e,t&&!r?0:1)}function Yu(n,e,t,r){let i=he(),o=Vu();if(Cr(i,o,e)){let s=Ge(),c=Lu();DR(c,i,n,e,t,r)}return Yu}function h0(n,e,t,r){return Cr(n,Vu(),t)?e+ro(t)+r:en}function DO(n,e,t,r,i,o){let s=MN(),c=u0(n,s,t,i);return Vw(2),c?e+ro(t)+r+ro(i)+o:en}function eu(n,e){return n<<17|e<<2}function ui(n){return n>>17&32767}function bO(n){return(n&2)==2}function TO(n,e){return n&131071|e<<17}function hp(n){return n|2}function ho(n){return(n&131068)>>2}function mf(n,e){return n&-131069|e<<2}function SO(n){return(n&1)===1}function fp(n){return n|1}function AO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=ui(s),u=ho(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Qs(g,h)>0)&&(d=!0)}else h=t;if(i)if(u!==0){let y=ui(n[c+1]);n[r+1]=eu(y,c),y!==0&&(n[y+1]=mf(n[y+1],r)),n[c+1]=TO(n[c+1],r)}else n[r+1]=eu(c,0),c!==0&&(n[c+1]=mf(n[c+1],r)),c=r;else n[r+1]=eu(u,0),c===0?c=r:n[u+1]=mf(n[u+1],r),u=r;d&&(n[r+1]=hp(n[r+1])),KE(n,h,r,!0),KE(n,h,r,!1),MO(e,h,n,r,o),s=eu(c,u),o?e.classBindings=s:e.styleBindings=s}function MO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Qs(o,e)>=0&&(t[r+1]=fp(t[r+1]))}function KE(n,e,t,r){let i=n[t+1],o=e===null,s=r?ui(i):ho(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],d=n[s+1];NO(u,e)&&(c=!0,n[s+1]=r?fp(d):hp(d)),s=r?ui(d):ho(d)}c&&(n[t+1]=r?hp(i):fp(i))}function NO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qs(n,e)>=0:!1}function B(n,e,t){let r=he(),i=Vu();if(Cr(r,i,e)){let o=Ge(),s=Lu();Xp(o,s,r,n,e,r[Le],t,!1)}return B}function QE(n,e,t,r,i){tg(e,n,t,i?"class":"style",r)}function yi(n,e){return xO(n,e,null,!0),yi}function xO(n,e,t,r){let i=he(),o=Ge(),s=Vw(2);if(o.firstUpdatePass&&PO(o,n,s,r),e!==en&&Cr(i,s,e)){let c=o.data[fi()];LO(o,c,i,i[Le],n,i[s+1]=BO(e,t),r,s)}}function RO(n,e){return e>=n.expandoStartIndex}function PO(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[fi()],s=RO(n,t);UO(o,r)&&e===null&&!s&&(e=!1),e=OO(i,o,e,r),AO(i,o,e,t,s,r)}}function OO(n,e,t,r){let i=ON(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=yf(null,n,e,t,r),t=Ws(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=yf(i,n,e,t,r),o===null){let u=kO(n,e,r);u!==void 0&&Array.isArray(u)&&(u=yf(null,n,e,u[1],r),u=Ws(u,e.attrs,r),FO(n,e,r,u))}else o=VO(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function kO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ho(r)!==0)return n[ui(r)]}function FO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ui(i)]=r}function VO(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ws(r,s,t)}return Ws(r,e.attrs,t)}function yf(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=Ws(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Ws(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),KM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function LO(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,d=u[c+1],h=SO(d)?YE(u,e,t,i,ho(d),s):void 0;if(!Au(h)){Au(o)||bO(d)&&(o=YE(u,null,t,i,c,s));let g=Mw(fi(),t);zR(r,s,g,i,o)}}function YE(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],d=Array.isArray(u),h=d?u[1]:u,g=h===null,y=t[i+1];y===en&&(y=g?Ft:void 0);let m=g?sf(y,r):h===r?y:void 0;if(d&&!Au(m)&&(m=sf(u,r)),Au(m)&&(c=m,s))return c;let S=n[i+1];i=s?ui(S):ho(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=sf(u,r))}return c}function Au(n){return n!==void 0}function BO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Vt(br(n)))),n}function UO(n,e){return(n.flags&(e?8:16))!==0}function x(n,e,t,r){let i=he(),o=Ge(),s=wt+n,c=i[Le],u=o.firstCreatePass?t0(s,o,i,e,eg,xp(),t,r):o.data[s],d=jO(o,i,u,c,e,n);i[s]=d;let h=Ou(u);return hi(u,!0),OC(c,d,u),!BC(u)&&Bu()&&Gu(o,i,d,u),(EN()===0||h)&&_o(d,i),wN(),h&&(zu(o,i,u),zp(o,u,i)),r!==null&&Jp(i,u),x}function M(){let n=Nt();Rp()?kw():(n=n.parent,hi(n,!1));let e=n;bN(e)&&TN(),CN();let t=Ge();return t.firstCreatePass&&n0(t,e),e.classesWithoutHost!=null&&UN(e)&&QE(t,e,he(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&jN(e)&&QE(t,e,he(),e.stylesWithoutHost,!1),M}function Ut(n,e,t,r){return x(n,e,t,r),M(),Ut}var jO=(n,e,t,r,i,o)=>(Uu(!0),RC(r,i,VN()));function $O(n,e,t,r,i){let o=e.consts,s=ao(o,r),c=Qu(e,n,8,"ng-container",s);s!==null&&np(c,s,!0);let u=ao(o,i);return xp()&&cg(e,t,c,u,eg),c.mergedAttrs=co(c.mergedAttrs,c.attrs),e.queries!==null&&e.queries.elementStart(e,c),c}function hg(n,e,t){let r=he(),i=Ge(),o=n+wt,s=i.firstCreatePass?$O(o,i,r,e,t):i.data[o];hi(s,!0);let c=HO(i,r,s,n);return r[o]=c,Bu()&&Gu(i,r,c,s),_o(c,r),Ou(s)&&(zu(i,r,s),zp(i,s,r)),t!=null&&Jp(r,s),hg}function fg(){let n=Nt(),e=Ge();return Rp()?kw():(n=n.parent,hi(n,!1)),e.firstCreatePass&&(Vp(e,n),Tp(n)&&e.queries.elementEnd(n)),fg}var HO=(n,e,t,r)=>(Uu(!0),uR(e[Le],""));function Ue(){return he()}var Jr=void 0;function qO(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var zO=["en",[["a","p"],["AM","PM"],Jr],[["AM","PM"],Jr,Jr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jr,"{1} 'at' {0}",Jr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",qO],_f={};function xt(n){let e=GO(n),t=ZE(e);if(t)return t;let r=e.split("-")[0];if(t=ZE(r),t)return t;if(r==="en")return zO;throw new W(701,!1)}function ZE(n){return n in _f||(_f[n]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[n]),_f[n]}var Fe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Fe||{});function GO(n){return n.toLowerCase().replace(/_/g,"-")}var Mu="en-US";var WO=Mu;function KO(n){typeof n=="string"&&(WO=n.toLowerCase().replace(/_/g,"-"))}function JE(n,e,t){return function r(i){if(i===Function)return t;let o=po(n)?mn(n.index,e):e;sg(o,5);let s=e[Et],c=XE(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=XE(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function XE(n,e,t,r){let i=ae(null);try{return Te(6,e,t),t(r)!==!1}catch(o){return QO(n,o),!1}finally{Te(7,e,t),ae(i)}}function QO(n,e){let t=n[oo],r=t?t.get(jn,null):null;r&&r.handleError(e)}function ew(n,e,t,r,i,o){let s=e[t],c=e[te],d=c.data[t].outputs[r],h=s[d],g=c.firstCreatePass?Np(c):null,y=Mp(e),m=h.subscribe(o),S=y.length;y.push(o,m),g&&g.push(i,n.index,S,-(S+1))}function $(n,e,t,r){let i=he(),o=Ge(),s=Nt();return f0(o,i,i[Le],s,n,e,r),$}function YO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[fu],u=i[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function f0(n,e,t,r,i,o,s){let c=Ou(r),d=n.firstCreatePass?Np(n):null,h=Mp(e),g=!0;if(r.type&3||s){let y=_n(r,e),m=s?s(y):y,S=h.length,P=s?H=>s(gn(H[r.index])):r.index,R=null;if(!s&&c&&(R=YO(n,e,i,r.index)),R!==null){let H=R.__ngLastListenerFn__||R;H.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,g=!1}else{o=JE(r,e,o),Dx(e,m,i,o);let H=t.listen(m,i,o);h.push(o,H),d&&d.push(i,P,S,S+1)}}else o=JE(r,e,o);if(g){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let S=0;S<m.length;S+=2){let P=m[S],R=m[S+1];ew(r,e,P,R,i,o)}if(y&&y.length)for(let S of y)ew(r,e,S,i,i,o)}}function z(n=1){return FN(n)}function pg(n,e,t,r,i){let o=he(),s=h0(o,e,t,r);if(s!==en){let c=Ge(),u=Lu();Xp(c,u,o,n,s,o[Le],i,!1)}return pg}function p0(n,e,t){WP(n,e,t)}function g0(n){let e=he(),t=Ge(),r=Lw();Op(r+1);let i=ug(t,r);if(n.dirty&&mN(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=YP(e,r);n.reset(o,lx),n.notifyOnChanges()}return!0}return!1}function m0(){return zP(he(),Lw())}function Zu(n){let e=AN();return Sp(e,wt+n)}function F(n,e=""){let t=he(),r=Ge(),i=n+wt,o=r.firstCreatePass?Qu(r,i,1,e,null):r.data[i],s=ZO(r,t,o,e,n);t[i]=s,Bu()&&Gu(r,t,s,o),hi(o,!1)}var ZO=(n,e,t,r,i)=>(Uu(!0),aR(e[Le],r));function yt(n){return Ye("",n,""),yt}function Ye(n,e,t){let r=he(),i=h0(r,n,e,t);return i!==en&&y0(r,fi(),i),Ye}function gg(n,e,t,r,i){let o=he(),s=DO(o,n,e,t,r,i);return s!==en&&y0(o,fi(),s),gg}function y0(n,e,t){let r=Mw(e,n);cR(n[Le],r,t)}function tn(n,e,t){aC(e)&&(e=e());let r=he(),i=Vu();if(Cr(r,i,e)){let o=Ge(),s=Lu();Xp(o,s,r,n,e,r[Le],t,!1)}return tn}function In(n,e){let t=aC(n);return t&&n.set(e),t}function nn(n,e){let t=he(),r=Ge(),i=Nt();return f0(r,t,t[Le],i,n,e),nn}function JO(n,e,t){let r=Ge();if(r.firstCreatePass){let i=pn(n);pp(t,r.data,r.blueprint,i,!0),pp(e,r.data,r.blueprint,i,!1)}}function pp(n,e,t,r,i){if(n=pt(n),Array.isArray(n))for(let o=0;o<n.length;o++)pp(n[o],e,t,r,i);else{let o=Ge(),s=he(),c=Nt(),u=io(n)?n:pt(n.provide),d=Ew(n),h=c.providerIndexes&1048575,g=c.directiveStart,y=c.providerIndexes>>20;if(io(n)||!n.multi){let m=new ai(d,i,j),S=If(u,e,i?h:h+y,g);S===-1?(Rf(Iu(c,s),o,u),vf(o,n,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(m),s.push(m)):(t[S]=m,s[S]=m)}else{let m=If(u,e,h+y,g),S=If(u,e,h,h+y),P=m>=0&&t[m],R=S>=0&&t[S];if(i&&!R||!i&&!P){Rf(Iu(c,s),o,u);let H=tk(i?ek:XO,t.length,i,r,d);!i&&R&&(t[S].providerFactory=H),vf(o,n,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(H),s.push(H)}else{let H=_0(t[i?S:m],d,!i&&r);vf(o,n,m>-1?m:S,H)}!i&&r&&R&&t[S].componentProviders++}}}function vf(n,e,t,r){let i=io(e),o=nN(e);if(i||o){let u=(o?pt(e.useClass):e).prototype.ngOnDestroy;if(u){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,u]):d[h+1].push(r,u)}else d.push(t,u)}}}function _0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function If(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function XO(n,e,t,r,i){return gp(this.multi,[])}function ek(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=qs(r,r[te],this.providerFactory.index,i);s=u.slice(0,c),gp(o,s);for(let d=c;d<u.length;d++)s.push(u[d])}else s=[],gp(o,s);return s}function gp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function tk(n,e,t,r,i){let o=new ai(n,t,j);return o.multi=[],o.index=e,o.componentProviders=0,_0(o,i,r&&!t),o}function Rt(n,e=[]){return t=>{t.providersResolver=(r,i)=>JO(r,i?i(n):n,e)}}function v0(n,e,t){let r=Pp()+n,i=he();return i[r]===en?lg(i,r,t?e.call(t):e()):hO(i,r)}function I0(n,e){let t=n[e];return t===en?void 0:t}function nk(n,e,t,r,i,o){let s=e+t;return Cr(n,s,i)?lg(n,s+1,o?r.call(o,i):r(i)):I0(n,s+1)}function rk(n,e,t,r,i,o,s){let c=e+t;return u0(n,c,i,o)?lg(n,c+2,s?r.call(s,i,o):r(i,o)):I0(n,c+2)}function En(n,e){let t=Ge(),r,i=n+wt;t.firstCreatePass?(r=ik(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ti(r.type,!0)),s,c=It(j);try{let u=vu(!1),d=o();return vu(u),gN(t,he(),i,d),d}finally{It(c)}}function ik(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Zs(n,e,t){let r=n+wt,i=he(),o=Sp(i,r);return E0(i,r)?nk(i,Pp(),e,o.transform,t,o):o.transform(t)}function Co(n,e,t,r){let i=n+wt,o=he(),s=Sp(o,i);return E0(o,i)?rk(o,Pp(),e,s.transform,t,r,s):s.transform(t,r)}function E0(n,e){return n[te].data[e].pure}function Ju(n,e){return Ku(n,e)}var li=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},w0=new li("19.2.13");var ok=(()=>{class n{zone=de(Ne);changeDetectionScheduler=de(zs);applicationRef=de(lo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ne(ye(ie({},ak()),{scheduleInRootZone:t})),[{provide:Ne,useFactory:n},{provide:Us,multi:!0,useFactory:()=>{let r=de(ok,{optional:!0});return()=>r.initialize()}},{provide:Us,multi:!0,useFactory:()=>{let r=de(ck);return()=>{r.initialize()}}},e===!0?{provide:rC,useValue:!0}:[],{provide:iC,useValue:t??tC}]}function ak(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var ck=(()=>{class n{subscription=new et;initialized=!1;zone=de(Ne);pendingTasks=de(ju);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uk=(()=>{class n{appRef=de(lo);taskService=de(ju);ngZone=de(Ne);zonelessEnabled=de(Bp);tracing=de($u,{optional:!0});disableScheduling=de(rC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new et;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(de(iC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?AE:oC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,AE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lk(){return typeof $localize<"u"&&$localize.locale||Mu}var Js=new G("",{providedIn:"root",factory:()=>de(Js,oe.Optional|oe.SkipSelf)||lk()});var mp=new G(""),dk=new G("");function Fs(n){return!n.moduleRef}function hk(n){let e=Fs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ne);return t.run(()=>{Fs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(jn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Fs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(mp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(mp);s.add(o),n.moduleRef.onDestroy(()=>{ou(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return pk(r,t,()=>{let o=e.get(d0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Js,Mu);if(KO(s||Mu),!e.get(dk,!0))return Fs(n)?e.get(lo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Fs(n)){let u=e.get(lo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return fk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function fk(n,e){let t=n.injector.get(lo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new W(-403,!1);e.push(n)}function pk(n,e,t){try{let r=t();return wo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var su=null;function gk(n=[],e){return Ct.create({name:e,providers:[{provide:Ru,useValue:"platform"},{provide:mp,useValue:new Set([()=>su=null])},...n]})}function mk(n=[]){if(su)return su;let e=gk(n);return su=e,IO(),yk(e),e}function yk(n){let e=n.get(Hp,null);ww(n,()=>{e?.forEach(t=>t())})}var Xu=(()=>{class n{static __NG_ELEMENT_ID__=_k}return n})();function _k(n){return vk(Nt(),he(),(n&16)===16)}function vk(n,e,t){if(po(n)&&!t){let r=mn(n.index,e);return new Gs(r,r)}else if(n.type&175){let r=e[fn];return new Gs(r,e)}return null}var yp=class{constructor(){}supports(e){return c0(e)}create(e){return new _p(e)}},Ik=(n,e)=>e,_p=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Ik}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<tw(r,i,o)?t:r,c=tw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=c-i,h=u-i;if(d!=h){for(let y=0;y<d;y++){let m=y<o.length?o[y]:o[y]=0,S=m+y;h<=S&&S<d&&(o[y]=m+1)}let g=s.previousIndex;o[g]=h-d}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!c0(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,lO(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new vp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Ip=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Nu=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ip,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tw(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function nw(){return new mg([new yp])}var mg=(()=>{class n{factories;static \u0275prov=ge({token:n,providedIn:"root",factory:nw});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||nw()),deps:[[n,new qM,new Dt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new W(901,!1)}}return n})();function C0(n){Te(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=mk(r),o=[sk({}),{provide:zs,useExisting:uk},...t||[]],s=new Su({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return hk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Te(9)}}function yg(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function jt(n){return Hh(n)}function Do(n,e){return Lh(n,e?.equal)}var rw=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};var $t=new G("");var D0=null;function Kn(){return D0}function _g(n){D0??=n}var Xs=class{};var Tg=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Tg||{});var at=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(at||{}),Ce=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ce||{}),Tt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Tt||{}),St={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function M0(n){return xt(n)[Fe.LocaleId]}function N0(n,e,t){let r=xt(n),i=[r[Fe.DayPeriodsFormat],r[Fe.DayPeriodsStandalone]],o=Ht(i,e);return Ht(o,t)}function x0(n,e,t){let r=xt(n),i=[r[Fe.DaysFormat],r[Fe.DaysStandalone]],o=Ht(i,e);return Ht(o,t)}function R0(n,e,t){let r=xt(n),i=[r[Fe.MonthsFormat],r[Fe.MonthsStandalone]],o=Ht(i,e);return Ht(o,t)}function P0(n,e){let r=xt(n)[Fe.Eras];return Ht(r,e)}function ea(n,e){let t=xt(n);return Ht(t[Fe.DateFormat],e)}function ta(n,e){let t=xt(n);return Ht(t[Fe.TimeFormat],e)}function na(n,e){let r=xt(n)[Fe.DateTimeFormat];return Ht(r,e)}function wn(n,e){let t=xt(n),r=t[Fe.NumberSymbols][e];if(typeof r>"u"){if(e===St.CurrencyDecimal)return t[Fe.NumberSymbols][St.Decimal];if(e===St.CurrencyGroup)return t[Fe.NumberSymbols][St.Group]}return r}function O0(n,e){return xt(n)[Fe.NumberFormats][e]}function k0(n){if(!n[Fe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Fe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function F0(n){let e=xt(n);return k0(e),(e[Fe.ExtraData][2]||[]).map(r=>typeof r=="string"?vg(r):[vg(r[0]),vg(r[1])])}function V0(n,e,t){let r=xt(n);k0(r);let i=[r[Fe.ExtraData][0],r[Fe.ExtraData][1]],o=Ht(i,e)||[];return Ht(o,t)||[]}function Ht(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function vg(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Ek=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,el={},wk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function L0(n,e,t,r){let i=xk(n);e=Qn(t,e)||e;let s=[],c;for(;e;)if(c=wk.exec(e),c){s=s.concat(c.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=U0(r,u),i=Nk(i,r));let d="";return s.forEach(h=>{let g=Ak(h);d+=g?g(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function ol(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Qn(n,e){let t=M0(n);if(el[t]??={},el[t][e])return el[t][e];let r="";switch(e){case"shortDate":r=ea(n,Tt.Short);break;case"mediumDate":r=ea(n,Tt.Medium);break;case"longDate":r=ea(n,Tt.Long);break;case"fullDate":r=ea(n,Tt.Full);break;case"shortTime":r=ta(n,Tt.Short);break;case"mediumTime":r=ta(n,Tt.Medium);break;case"longTime":r=ta(n,Tt.Long);break;case"fullTime":r=ta(n,Tt.Full);break;case"short":let i=Qn(n,"shortTime"),o=Qn(n,"shortDate");r=tl(na(n,Tt.Short),[i,o]);break;case"medium":let s=Qn(n,"mediumTime"),c=Qn(n,"mediumDate");r=tl(na(n,Tt.Medium),[s,c]);break;case"long":let u=Qn(n,"longTime"),d=Qn(n,"longDate");r=tl(na(n,Tt.Long),[u,d]);break;case"full":let h=Qn(n,"fullTime"),g=Qn(n,"fullDate");r=tl(na(n,Tt.Full),[h,g]);break}return r&&(el[t][e]=r),r}function tl(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function rn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Ck(n,e){return rn(n,3).substring(0,e)}function je(n,e,t=0,r=!1,i=!1){return function(o,s){let c=Dk(n,o);if((t>0||c>-t)&&(c+=t),n===3)c===0&&t===-12&&(c=12);else if(n===6)return Ck(c,e);let u=wn(s,St.MinusSign);return rn(c,e,u,r,i)}}function Dk(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Se(n,e,t=at.Format,r=!1){return function(i,o){return bk(i,o,n,e,t,r)}}function bk(n,e,t,r,i,o){switch(t){case 2:return R0(e,i,r)[n.getMonth()];case 1:return x0(e,i,r)[n.getDay()];case 0:let s=n.getHours(),c=n.getMinutes();if(o){let d=F0(e),h=V0(e,i,r),g=d.findIndex(y=>{if(Array.isArray(y)){let[m,S]=y,P=s>=m.hours&&c>=m.minutes,R=s<S.hours||s===S.hours&&c<S.minutes;if(m.hours<S.hours){if(P&&R)return!0}else if(P||R)return!0}else if(y.hours===s&&y.minutes===c)return!0;return!1});if(g!==-1)return h[g]}return N0(e,i,r)[s<12?0:1];case 3:return P0(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function nl(n){return function(e,t,r){let i=-1*r,o=wn(t,St.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+rn(s,2,o)+rn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+rn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+rn(s,2,o)+":"+rn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+rn(s,2,o)+":"+rn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var Tk=0,il=4;function Sk(n){let e=ol(n,Tk,1).getDay();return ol(n,0,1+(e<=il?il:il+7)-e)}function B0(n){let e=n.getDay(),t=e===0?-3:il-e;return ol(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Ig(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=B0(t),s=Sk(o.getFullYear()),c=o.getTime()-s.getTime();i=1+Math.round(c/6048e5)}return rn(i,n,wn(r,St.MinusSign))}}function rl(n,e=!1){return function(t,r){let o=B0(t).getFullYear();return rn(o,n,wn(r,St.MinusSign),e)}}var Eg={};function Ak(n){if(Eg[n])return Eg[n];let e;switch(n){case"G":case"GG":case"GGG":e=Se(3,Ce.Abbreviated);break;case"GGGG":e=Se(3,Ce.Wide);break;case"GGGGG":e=Se(3,Ce.Narrow);break;case"y":e=je(0,1,0,!1,!0);break;case"yy":e=je(0,2,0,!0,!0);break;case"yyy":e=je(0,3,0,!1,!0);break;case"yyyy":e=je(0,4,0,!1,!0);break;case"Y":e=rl(1);break;case"YY":e=rl(2,!0);break;case"YYY":e=rl(3);break;case"YYYY":e=rl(4);break;case"M":case"L":e=je(1,1,1);break;case"MM":case"LL":e=je(1,2,1);break;case"MMM":e=Se(2,Ce.Abbreviated);break;case"MMMM":e=Se(2,Ce.Wide);break;case"MMMMM":e=Se(2,Ce.Narrow);break;case"LLL":e=Se(2,Ce.Abbreviated,at.Standalone);break;case"LLLL":e=Se(2,Ce.Wide,at.Standalone);break;case"LLLLL":e=Se(2,Ce.Narrow,at.Standalone);break;case"w":e=Ig(1);break;case"ww":e=Ig(2);break;case"W":e=Ig(1,!0);break;case"d":e=je(2,1);break;case"dd":e=je(2,2);break;case"c":case"cc":e=je(7,1);break;case"ccc":e=Se(1,Ce.Abbreviated,at.Standalone);break;case"cccc":e=Se(1,Ce.Wide,at.Standalone);break;case"ccccc":e=Se(1,Ce.Narrow,at.Standalone);break;case"cccccc":e=Se(1,Ce.Short,at.Standalone);break;case"E":case"EE":case"EEE":e=Se(1,Ce.Abbreviated);break;case"EEEE":e=Se(1,Ce.Wide);break;case"EEEEE":e=Se(1,Ce.Narrow);break;case"EEEEEE":e=Se(1,Ce.Short);break;case"a":case"aa":case"aaa":e=Se(0,Ce.Abbreviated);break;case"aaaa":e=Se(0,Ce.Wide);break;case"aaaaa":e=Se(0,Ce.Narrow);break;case"b":case"bb":case"bbb":e=Se(0,Ce.Abbreviated,at.Standalone,!0);break;case"bbbb":e=Se(0,Ce.Wide,at.Standalone,!0);break;case"bbbbb":e=Se(0,Ce.Narrow,at.Standalone,!0);break;case"B":case"BB":case"BBB":e=Se(0,Ce.Abbreviated,at.Format,!0);break;case"BBBB":e=Se(0,Ce.Wide,at.Format,!0);break;case"BBBBB":e=Se(0,Ce.Narrow,at.Format,!0);break;case"h":e=je(3,1,-12);break;case"hh":e=je(3,2,-12);break;case"H":e=je(3,1);break;case"HH":e=je(3,2);break;case"m":e=je(4,1);break;case"mm":e=je(4,2);break;case"s":e=je(5,1);break;case"ss":e=je(5,2);break;case"S":e=je(6,1);break;case"SS":e=je(6,2);break;case"SSS":e=je(6,3);break;case"Z":case"ZZ":case"ZZZ":e=nl(0);break;case"ZZZZZ":e=nl(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=nl(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=nl(2);break;default:return null}return Eg[n]=e,e}function U0(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Mk(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Nk(n,e,t){let i=n.getTimezoneOffset(),o=U0(e,i);return Mk(n,-1*(o-i))}function xk(n){if(b0(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(c=>+c);return ol(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ek))return Rk(r)}let e=new Date(n);if(!b0(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function Rk(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,c=Number(n[5]||0)-r,u=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,c,u,d),e}function b0(n){return n instanceof Date&&!isNaN(n.valueOf())}var Pk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,T0=22,sl=".",ra="0",Ok=";",kk=",",wg="#";function Fk(n,e,t,r,i,o,s=!1){let c="",u=!1;if(!isFinite(n))c=wn(t,St.Infinity);else{let d=Bk(n);s&&(d=Lk(d));let h=e.minInt,g=e.minFrac,y=e.maxFrac;if(o){let J=o.match(Pk);if(J===null)throw new Error(`${o} is not a valid digit info`);let se=J[1],ve=J[3],Qe=J[5];se!=null&&(h=Cg(se)),ve!=null&&(g=Cg(ve)),Qe!=null?y=Cg(Qe):ve!=null&&g>y&&(y=g)}Uk(d,g,y);let m=d.digits,S=d.integerLen,P=d.exponent,R=[];for(u=m.every(J=>!J);S<h;S++)m.unshift(0);for(;S<0;S++)m.unshift(0);S>0?R=m.splice(S,m.length):(R=m,m=[0]);let H=[];for(m.length>=e.lgSize&&H.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)H.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&H.unshift(m.join("")),c=H.join(wn(t,r)),R.length&&(c+=wn(t,i)+R.join("")),P&&(c+=wn(t,St.Exponential)+"+"+P)}return n<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function j0(n,e,t){let r=O0(e,Tg.Decimal),i=Vk(r,wn(e,St.MinusSign));return Fk(n,i,e,St.Group,St.Decimal,t)}function Vk(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Ok),i=r[0],o=r[1],s=i.indexOf(sl)!==-1?i.split(sl):[i.substring(0,i.lastIndexOf(ra)+1),i.substring(i.lastIndexOf(ra)+1)],c=s[0],u=s[1]||"";t.posPre=c.substring(0,c.indexOf(wg));for(let h=0;h<u.length;h++){let g=u.charAt(h);g===ra?t.minFrac=t.maxFrac=h+1:g===wg?t.maxFrac=h+1:t.posSuf+=g}let d=c.split(kk);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let h=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf(wg);t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Lk(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function Bk(n){let e=Math.abs(n)+"",t=0,r,i,o,s,c;for((i=e.indexOf(sl))>-1&&(e=e.replace(sl,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===ra;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===ra;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>T0&&(r=r.splice(0,T0-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function Uk(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,c=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(c>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,d=e+n.integerLen,h=r.reduceRight(function(g,y,m,S){return y=y+g,S[m]=y<10?y:y-10,u&&(S[m]===0&&m>=d?S.pop():u=!1),y>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}function Cg(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var al=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Cn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new al(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),S0(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);S0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(j(Io),j(ci),j(mg))};static \u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function S0(n,e){n.context.$implicit=e.item}var _t=(()=>{class n{_viewContainer;_context=new cl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){A0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){A0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(j(Io),j(ci))};static \u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),cl=class{$implicit=null;ngIf=null};function A0(n,e){if(n&&!n.createEmbeddedView)throw new W(2020,!1)}function Sg(n,e){return new W(2100,!1)}var Dg=class{createSubscription(e,t){return jt(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){jt(()=>e.unsubscribe())}},bg=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},jk=new bg,$k=new Dg,ia=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(wo(t))return jk;if(dg(t))return $k;throw Sg(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(j(Xu,16))};static \u0275pipe=Eo({name:"async",type:n,pure:!1})}return n})();var Hk="mediumDate",$0=new G(""),H0=new G(""),Ag=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??Hk,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return L0(t,s,o||this.locale,c)}catch(s){throw Sg(n,s.message)}}static \u0275fac=function(r){return new(r||n)(j(Js,16),j($0,24),j(H0,24))};static \u0275pipe=Eo({name:"date",type:n,pure:!0})}return n})();var Mg=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!qk(t))return null;i||=this._locale;try{let o=zk(t);return j0(o,i,r)}catch(o){throw Sg(n,o.message)}}static \u0275fac=function(r){return new(r||n)(j(Js,16))};static \u0275pipe=Eo({name:"number",type:n,pure:!0})}return n})();function qk(n){return!(n==null||n===""||n!==n)}function zk(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var ct=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Dr({})}return n})();function Ng(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xg="browser",q0="server";function ul(n){return n===q0}var oa=class{};var hl=new G(""),kg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(pe(hl),pe(Ne))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),sa=class{_doc;constructor(e){this._doc=e}manager},ll="ng-app-id";function z0(n){for(let e of n)e.remove()}function G0(n,e){let t=e.createElement("style");return t.textContent=n,t}function Gk(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ll}="${e}"],link[${ll}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ll),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Pg(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Fg=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=ul(o),Gk(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,G0);r?.forEach(i=>this.addUsage(i,this.external,Pg))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(z0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])z0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,G0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Pg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(ll,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(pe($t),pe($p),pe(qp,8),pe(gi))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),Rg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vg=/%COMP%/g;var K0="%COMP%",Wk=`_nghost-${K0}`,Kk=`_ngcontent-${K0}`,Qk=!0,Yk=new G("",{providedIn:"root",factory:()=>Qk});function Zk(n){return Kk.replace(Vg,n)}function Jk(n){return Wk.replace(Vg,n)}function Q0(n,e){return e.map(t=>t.replace(Vg,n))}var Lg=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u,d=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=d,this.tracingService=h,this.platformIsServer=ul(c),this.defaultRenderer=new aa(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===yn.ShadowDom&&(r=ye(ie({},r),{encapsulation:yn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof dl?i.applyToHost(t):i instanceof ca&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case yn.Emulated:o=new dl(u,d,r,this.appId,h,s,c,g,y);break;case yn.ShadowDom:return new Og(u,d,t,r,s,c,this.nonce,g,y);default:o=new ca(u,d,r,h,s,c,g,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(pe(kg),pe(Fg),pe($p),pe(Yk),pe($t),pe(gi),pe(Ne),pe(qp),pe($u,8))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),aa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Rg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(W0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(W0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Rg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Rg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hn.DashCase|Hn.Important)?e.style.setProperty(t,r,i&Hn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Kn().getGlobalEventTarget(this.doc,e),!e))throw new W(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function W0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Og=class extends aa{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,d){super(e,o,s,u,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Q0(i.id,h);for(let y of h){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=y,this.shadowRoot.appendChild(m)}let g=i.getExternalStyles?.();if(g)for(let y of g){let m=Pg(y,o);c&&m.setAttribute("nonce",c),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ca=class extends aa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,d){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?Q0(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},dl=class extends ca{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,d){let h=i+"-"+r.id;super(e,t,r,o,s,c,u,d,h),this.contentAttr=Zk(h),this.hostAttr=Jk(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var fl=class n extends Xs{supportsDOMEvents=!0;static makeCurrent(){_g(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Xk();return t==null?null:e1(t)}resetBaseElement(){ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ng(document.cookie,e)}},ua=null;function Xk(){return ua=ua||document.head.querySelector("base"),ua?ua.getAttribute("href"):null}function e1(n){return new URL(n,document.baseURI).pathname}var t1=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),Z0=(()=>{class n extends sa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(pe($t))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),Y0=["alt","control","meta","shift"],n1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},J0=(()=>{class n extends sa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Y0.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=n1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Y0.forEach(s=>{if(s!==i){let c=r1[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(pe($t))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function Bg(n,e){return C0(ie({rootComponent:n},i1(e)))}function i1(n){return{appProviders:[...u1,...n?.providers??[]],platformProviders:c1}}function o1(){fl.makeCurrent()}function s1(){return new jn}function a1(){return pC(document),document}var c1=[{provide:gi,useValue:xg},{provide:Hp,useValue:o1,multi:!0},{provide:$t,useFactory:a1}];var u1=[{provide:Ru,useValue:"root"},{provide:jn,useFactory:s1},{provide:hl,useClass:Z0,multi:!0,deps:[$t]},{provide:hl,useClass:J0,multi:!0,deps:[$t]},Lg,Fg,kg,{provide:uo,useExisting:Lg},{provide:oa,useClass:t1},[]];var Ug=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=pe(l1),i},providedIn:"root"})}return n})(),l1=(()=>{class n extends Ug{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Wn.NONE:return r;case Wn.HTML:return mi(r,"HTML")?br(r):Wp(this._doc,String(r)).toString();case Wn.STYLE:return mi(r,"Style")?br(r):r;case Wn.SCRIPT:if(mi(r,"Script"))return br(r);throw new W(5200,!1);case Wn.URL:return mi(r,"URL")?br(r):Gp(String(r));case Wn.RESOURCE_URL:if(mi(r,"ResourceURL"))return br(r);throw new W(5201,!1);default:throw new W(5202,!1)}}bypassSecurityTrustHtml(t){return IC(t)}bypassSecurityTrustStyle(t){return EC(t)}bypassSecurityTrustScript(t){return wC(t)}bypassSecurityTrustUrl(t){return CC(t)}bypassSecurityTrustResourceUrl(t){return DC(t)}static \u0275fac=function(r){return new(r||n)(pe($t))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cD=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(j(vo),j(vn))};static \u0275dir=ke({type:n})}return n})(),bl=(()=>{class n extends cD{static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=ke({type:n,features:[mt]})}return n})(),Ar=new G("");var h1={provide:Ar,useExisting:gt(()=>qt),multi:!0};function f1(){let n=Kn()?Kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var p1=new G(""),qt=(()=>{class n extends cD{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!f1())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(j(vo),j(vn),j(p1,8))};static \u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Rt([h1]),mt]})}return n})();function qg(n){return n==null||zg(n)===0}function zg(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var No=new G(""),Tl=new G(""),g1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,So=class{static min(e){return m1(e)}static max(e){return y1(e)}static required(e){return uD(e)}static requiredTrue(e){return _1(e)}static email(e){return v1(e)}static minLength(e){return lD(e)}static maxLength(e){return I1(e)}static pattern(e){return E1(e)}static nullValidator(e){return gl()}static compose(e){return mD(e)}static composeAsync(e){return yD(e)}};function m1(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function y1(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function uD(n){return qg(n.value)?{required:!0}:null}function _1(n){return n.value===!0?null:{required:!0}}function v1(n){return qg(n.value)||g1.test(n.value)?null:{email:!0}}function lD(n){return e=>{let t=e.value?.length??zg(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function I1(n){return e=>{let t=e.value?.length??zg(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function E1(n){if(!n)return gl;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qg(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function gl(n){return null}function dD(n){return n!=null}function hD(n){return wo(n)?ks(n):n}function fD(n){let e={};return n.forEach(t=>{e=t!=null?ie(ie({},e),t):e}),Object.keys(e).length===0?null:e}function pD(n,e){return e.map(t=>t(n))}function w1(n){return!n.validate}function gD(n){return n.map(e=>w1(e)?e:t=>e.validate(t))}function mD(n){if(!n)return null;let e=n.filter(dD);return e.length==0?null:function(t){return fD(pD(t,e))}}function Gg(n){return n!=null?mD(gD(n)):null}function yD(n){if(!n)return null;let e=n.filter(dD);return e.length==0?null:function(t){let r=pD(t,e).map(hD);return rf(r).pipe(ln(fD))}}function Wg(n){return n!=null?yD(gD(n)):null}function X0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _D(n){return n._rawValidators}function vD(n){return n._rawAsyncValidators}function jg(n){return n?Array.isArray(n)?n:[n]:[]}function ml(n,e){return Array.isArray(n)?n.includes(e):n===e}function eD(n,e){let t=jg(e);return jg(n).forEach(i=>{ml(t,i)||t.push(i)}),t}function tD(n,e){return jg(e).filter(t=>!ml(n,t))}var yl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Gg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Wg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Yn=class extends yl{name;get formDirective(){return null}get path(){return null}},vi=class extends yl{_parent=null;name=null;valueAccessor=null},_l=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},C1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},t9=ye(ie({},C1),{"[class.ng-submitted]":"isSubmitted"}),Dn=(()=>{class n extends _l{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(j(vi,2))};static \u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&yi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[mt]})}return n})(),Sl=(()=>{class n extends _l{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(j(Yn,10))};static \u0275dir=ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&yi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[mt]})}return n})();var la="VALID",pl="INVALID",bo="PENDING",da="DISABLED",Sr=class{},vl=class extends Sr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},fa=class extends Sr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},pa=class extends Sr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},To=class extends Sr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Il=class extends Sr{source;constructor(e){super(),this.source=e}},El=class extends Sr{source;constructor(e){super(),this.source=e}};function Kg(n){return(Al(n)?n.validators:n)||null}function D1(n){return Array.isArray(n)?Gg(n):n||null}function Qg(n,e){return(Al(e)?e.asyncValidators:n)||null}function b1(n){return Array.isArray(n)?Wg(n):n||null}function Al(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ID(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new W(1e3,"");if(!r[t])throw new W(1001,"")}function ED(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new W(1002,"")})}var Ao=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return jt(this.statusReactive)}set status(e){jt(()=>this.statusReactive.set(e))}_status=Do(()=>this.statusReactive());statusReactive=yo(void 0);get valid(){return this.status===la}get invalid(){return this.status===pl}get pending(){return this.status==bo}get disabled(){return this.status===da}get enabled(){return this.status!==da}errors;get pristine(){return jt(this.pristineReactive)}set pristine(e){jt(()=>this.pristineReactive.set(e))}_pristine=Do(()=>this.pristineReactive());pristineReactive=yo(!0);get dirty(){return!this.pristine}get touched(){return jt(this.touchedReactive)}set touched(e){jt(()=>this.touchedReactive.set(e))}_touched=Do(()=>this.touchedReactive());touchedReactive=yo(!1);get untouched(){return!this.touched}_events=new cn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tD(e,this._rawAsyncValidators))}hasValidator(e){return ml(this._rawValidators,e)}hasAsyncValidator(e){return ml(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(ie({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pa(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new pa(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(ie({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new fa(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new fa(!0,r))}markAsPending(e={}){this.status=bo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new To(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(ie({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=da,this.errors=null,this._forEachChild(i=>{i.disable(ye(ie({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vl(this.value,r)),this._events.next(new To(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=la,this._forEachChild(r=>{r.enable(ye(ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===la||this.status===bo)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vl(this.value,t)),this._events.next(new To(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(ie({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?da:la}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=bo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=hD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new To(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new be,this.statusChanges=new be}_calculateStatus(){return this._allControlsDisabled()?da:this.errors?pl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bo)?bo:this._anyControlsHaveStatus(pl)?pl:la}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new fa(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new pa(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Al(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=D1(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=b1(this._rawAsyncValidators)}},Mo=class extends Ao{constructor(e,t,r){super(Kg(t),Qg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ED(this,!0,e),Object.keys(e).forEach(r=>{ID(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var $g=class extends Mo{};var ma=new G("",{providedIn:"root",factory:()=>Ml}),Ml="always";function wD(n,e){return[...e.path,n]}function wl(n,e,t=Ml){Yg(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),S1(n,e),M1(n,e),A1(n,e),T1(n,e)}function nD(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Dl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Cl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function T1(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Yg(n,e){let t=_D(n);e.validator!==null?n.setValidators(X0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=vD(n);e.asyncValidator!==null?n.setAsyncValidators(X0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Cl(e._rawValidators,i),Cl(e._rawAsyncValidators,i)}function Dl(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=_D(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=vD(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Cl(e._rawValidators,r),Cl(e._rawAsyncValidators,r),t}function S1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&CD(n,e)})}function A1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&CD(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function CD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function M1(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function DD(n,e){n==null,Yg(n,e)}function N1(n,e){return Dl(n,e)}function bD(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function x1(n){return Object.getPrototypeOf(n.constructor)===bl}function TD(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function SD(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===qt?t=o:x1(o)?r=o:i=o}),i||r||t||null}function R1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var P1={provide:Yn,useExisting:gt(()=>Zg)},ha=Promise.resolve(),Zg=(()=>{class n extends Yn{callSetDisabledState;get submitted(){return jt(this.submittedReactive)}_submitted=Do(()=>this.submittedReactive());submittedReactive=yo(!1);_directives=new Set;form;ngSubmit=new be;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Mo({},Gg(t),Wg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ha.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wl(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ha.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ha.then(()=>{let r=this._findContainer(t.path),i=new Mo({});DD(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ha.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ha.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),TD(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Il(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new El(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(j(No,10),j(Tl,10),j(ma,8))};static \u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&$("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rt([P1]),mt]})}return n})();function rD(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function iD(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ga=class extends Ao{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Kg(t),Qg(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Al(t)&&(t.nonNullable||t.initialValueIsDefault)&&(iD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){iD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var O1=n=>n instanceof ga;var k1={provide:vi,useExisting:gt(()=>Zn)},oD=Promise.resolve(),Zn=(()=>{class n extends vi{_changeDetectorRef;callSetDisabledState;control=new ga;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new be;constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SD(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){oD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&yg(r);oD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?wD(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(j(Yn,9),j(No,10),j(Tl,10),j(Ar,10),j(Xu,8),j(ma,8))};static \u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rt([k1]),mt,Bt]})}return n})();var Nl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var F1={provide:Ar,useExisting:gt(()=>Jg),multi:!0},Jg=(()=>{class n extends bl{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Rt([F1]),mt]})}return n})(),AD=new G("");var V1={provide:Yn,useExisting:gt(()=>Xg)},Xg=(()=>{class n extends Yn{callSetDisabledState;get submitted(){return jt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Do(()=>this._submittedReactive());_submittedReactive=yo(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new be;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Dl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return wl(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){nD(t.control||null,t,!1),R1(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),TD(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Il(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new El(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(nD(r||null,t),O1(i)&&(wl(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);DD(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&N1(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yg(this.form,this),this._oldForm&&Dl(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(j(No,10),j(Tl,10),j(ma,8))};static \u0275dir=ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&$("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rt([V1]),mt,Bt]})}return n})();var L1={provide:vi,useExisting:gt(()=>em)},em=(()=>{class n extends vi{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new be;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SD(this,o)}ngOnChanges(t){this._added||this._setUpControl(),bD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return wD(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(j(Yn,13),j(No,10),j(Tl,10),j(Ar,10),j(AD,8))};static \u0275dir=ke({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Rt([L1]),mt,Bt]})}return n})();var B1={provide:Ar,useExisting:gt(()=>xo),multi:!0};function MD(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function U1(n){return n.split(":")[0]}var xo=(()=>{class n extends bl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=MD(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=U1(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rt([B1]),mt]})}return n})(),xl=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(MD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(j(vn),j(vo),j(xo,9))};static \u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),j1={provide:Ar,useExisting:gt(()=>ND),multi:!0};function sD(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $1(n){return n.split(":")[0]}var ND=(()=>{class n extends bl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],d=this._getOptionValue(u.value);i.push(d)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let d=this._getOptionValue(u.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=$1(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rt([j1]),mt]})}return n})(),Rl=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(sD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sD(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(j(vn),j(vo),j(ND,9))};static \u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function H1(n){return typeof n=="number"?n:parseInt(n,10)}var xD=(()=>{class n{_validator=gl;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,features:[Bt]})}return n})();var q1={provide:No,useExisting:gt(()=>tm),multi:!0};var tm=(()=>{class n extends xD{required;inputName="required";normalizeInput=yg;createValidator=t=>uD;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Yu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Rt([q1]),mt]})}return n})();var z1={provide:No,useExisting:gt(()=>nm),multi:!0},nm=(()=>{class n extends xD{minlength;inputName="minlength";normalizeInput=t=>H1(t);createValidator=t=>lD(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Yu("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Rt([z1]),mt]})}return n})();var RD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Dr({})}return n})(),Hg=class extends Ao{constructor(e,t,r){super(Kg(t),Qg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ED(this,!1,e),e.forEach((r,i)=>{ID(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function aD(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var PD=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return aD(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Mo(i,o)}record(t,r=null){let i=this._reduceControls(t);return new $g(i,r)}control(t,r,i){let o={};return this.useNonNullable?(aD(r)?o=r:(o.validators=r,o.asyncValidators=i),new ga(t,ye(ie({},o),{nonNullable:!0}))):new ga(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Hg(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof ga)return t;if(t instanceof Ao)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ma,useValue:t.callSetDisabledState??Ml}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Dr({imports:[RD]})}return n})(),OD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:AD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ma,useValue:t.callSetDisabledState??Ml}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Dr({imports:[RD]})}return n})();function G1(n,e){if(n&1&&(x(0,"option",5),F(1),M()),n&2){let t=e.$implicit,r=z();B("value",t),k(),Ye(" ",t===r.ADD_NEW_OPTION_VALUE?r.addNewOptionText:t," ")}}function W1(n,e){if(n&1){let t=Ue();x(0,"li",15)(1,"span"),F(2),M(),x(3,"button",16),$("click",function(){let i=ne(t).$implicit,o=z(3);return re(o.deleteUserCustomCategory(i))}),F(4,"\xD7"),M()()}if(n&2){let t=e.$implicit,r=z(3);k(2),yt(t),k(),pg("title","\u522A\u9664 ",t,""),B("disabled",r.isDisabled)}}function K1(n,e){if(n&1&&(x(0,"div",12)(1,"p",13),F(2,"\u7BA1\u7406\u81EA\u5B9A\u7FA9\u985E\u5225:"),M(),x(3,"ul"),Ee(4,W1,5,4,"li",14),M()()),n&2){let t=z(2);k(4),B("ngForOf",t.deletableUserCustomCategories)}}function Q1(n,e){if(n&1){let t=Ue();x(0,"div",6)(1,"div",7)(2,"input",8),nn("ngModelChange",function(i){ne(t);let o=z();return In(o.customCategoryValue,i)||(o.customCategoryValue=i),re(i)}),$("keyup.enter",function(){ne(t);let i=z();return re(i.confirmCustomCategory())}),M(),x(3,"button",9),$("click",function(){ne(t);let i=z();return re(i.confirmCustomCategory())}),F(4,"\u78BA\u8A8D"),M(),x(5,"button",10),$("click",function(){ne(t);let i=z();return re(i.cancelCustomCategory())}),F(6,"\u53D6\u6D88"),M()(),Ee(7,K1,5,1,"div",11),M()}if(n&2){let t=z();k(2),tn("ngModel",t.customCategoryValue),B("disabled",t.isDisabled),k(),B("disabled",t.isDisabled),k(2),B("disabled",t.isDisabled),k(2),B("ngIf",t.deletableUserCustomCategories.length>0)}}var Pl=class n{predefinedCategories=[];initialCategory=null;placeholder="\u9078\u64C7\u6216\u65B0\u589E\u985E\u5225";addNewOptionText="\uFF0B \u65B0\u589E\u81EA\u5B9A\u7FA9\u985E\u5225...";localStorageKey="appUserCustomCategories";categorySelected=new be;displayCategories=[];selectedInternalCategory=null;isCustomInputVisible=!1;customCategoryValue="";userCustomCategories=[];ADD_NEW_OPTION_VALUE="__ADD_NEW_CATEGORY__";onChange=()=>{};onTouched=()=>{};isDisabled=!1;constructor(){}writeValue(e){if(e&&e!==this.ADD_NEW_OPTION_VALUE&&!this.predefinedCategories.includes(e)&&!this.userCustomCategories.includes(e)&&!this.displayCategories.includes(e)){let t=this.displayCategories.indexOf(this.ADD_NEW_OPTION_VALUE);t>-1?this.displayCategories.splice(t,0,e):this.displayCategories.push(e)}this.selectedInternalCategory=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnInit(){this.loadUserCustomCategoriesFromLocalStorage(),this.buildDisplayOptions(),this.initialCategory&&this.selectedInternalCategory===null?this.writeValue(this.initialCategory):this.selectedInternalCategory===null&&(this.selectedInternalCategory=null)}ngOnChanges(e){let t=!1,r=!1;e.predefinedCategories&&(t=!0),e.localStorageKey&&(this.loadUserCustomCategoriesFromLocalStorage(),t=!0),e.initialCategory&&(this.selectedInternalCategory===null||this.selectedInternalCategory===e.initialCategory.previousValue)&&(r=!0),t&&this.buildDisplayOptions(),(t||r)&&(this.selectedInternalCategory===null&&e.initialCategory?this.writeValue(this.initialCategory):this.selectedInternalCategory!==null&&this.writeValue(this.selectedInternalCategory)),this.selectedInternalCategory&&this.selectedInternalCategory!==this.ADD_NEW_OPTION_VALUE&&!this.displayCategories.includes(this.selectedInternalCategory)&&!this.predefinedCategories.includes(this.selectedInternalCategory)&&!this.userCustomCategories.includes(this.selectedInternalCategory)&&(this.writeValue(null),this.onChange(null))}loadUserCustomCategoriesFromLocalStorage(){try{let e=localStorage.getItem(this.localStorageKey);this.userCustomCategories=e?JSON.parse(e):[]}catch(e){console.error(`Error loading categories from localStorage (key: ${this.localStorageKey})`,e),this.userCustomCategories=[]}}saveUserCustomCategoriesToLocalStorage(){try{localStorage.setItem(this.localStorageKey,JSON.stringify(this.userCustomCategories))}catch(e){console.error(`Error saving categories to localStorage (key: ${this.localStorageKey})`,e)}}buildDisplayOptions(){let e=new Set([...this.predefinedCategories,...this.userCustomCategories]);this.displayCategories=Array.from(e).filter(t=>t!==this.ADD_NEW_OPTION_VALUE),this.displayCategories.push(this.ADD_NEW_OPTION_VALUE),this.selectedInternalCategory&&!this.displayCategories.includes(this.selectedInternalCategory)&&(this.selectedInternalCategory,this.ADD_NEW_OPTION_VALUE)}onSelectionChange(e){let t;typeof e=="string"?t=e:t=e.target.value,t==="null"&&(t=null),this.selectedInternalCategory=t,t===this.ADD_NEW_OPTION_VALUE?(this.isCustomInputVisible=!0,this.customCategoryValue="",this.onTouched()):(this.isCustomInputVisible=!1,this.categorySelected.emit(t),this.onChange(t),this.onTouched())}confirmCustomCategory(){let e=this.customCategoryValue.trim();e&&e!==this.ADD_NEW_OPTION_VALUE?(!this.predefinedCategories.includes(e)&&!this.userCustomCategories.includes(e)&&(this.userCustomCategories.push(e),this.saveUserCustomCategoriesToLocalStorage()),this.buildDisplayOptions(),this.selectedInternalCategory=e,this.categorySelected.emit(e),this.onChange(e),this.onTouched(),this.isCustomInputVisible=!1,this.customCategoryValue=""):e||(this.isCustomInputVisible=!1)}cancelCustomCategory(){this.isCustomInputVisible=!1,this.customCategoryValue="",this.selectedInternalCategory===this.ADD_NEW_OPTION_VALUE&&(this.selectedInternalCategory=null,this.onChange(null)),this.onTouched()}get deletableUserCustomCategories(){return this.userCustomCategories.filter(e=>!this.predefinedCategories.includes(e))}deleteUserCustomCategory(e){let t=this.selectedInternalCategory===e;this.userCustomCategories=this.userCustomCategories.filter(r=>r!==e),this.saveUserCustomCategoriesToLocalStorage(),this.buildDisplayOptions(),t&&(this.selectedInternalCategory=null,this.onChange(null)),this.onTouched()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=bt({type:n,selectors:[["app-category-selector"]],inputs:{predefinedCategories:"predefinedCategories",initialCategory:"initialCategory",placeholder:"placeholder",addNewOptionText:"addNewOptionText",localStorageKey:"localStorageKey"},outputs:{categorySelected:"categorySelected"},features:[Rt([{provide:Ar,useExisting:gt(()=>n),multi:!0}]),Bt],decls:6,vars:6,consts:[[1,"category-selector-container"],["aria-label","\u985E\u5225\u9078\u64C7\u5668",1,"category-select",3,"ngModelChange","blur","ngModel","disabled"],["disabled","","selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","custom-management-section",4,"ngIf"],[3,"value"],[1,"custom-management-section"],[1,"custom-input-area"],["type","text","placeholder","\u8F38\u5165\u65B0\u985E\u5225\u540D\u7A31","aria-label","\u81EA\u5B9A\u7FA9\u985E\u5225\u540D\u7A31",1,"custom-category-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],["type","button",1,"custom-category-button","confirm",3,"click","disabled"],["type","button",1,"custom-category-button","cancel",3,"click","disabled"],["class","deletable-categories-area",4,"ngIf"],[1,"deletable-categories-area"],[1,"deletable-title"],["class","deletable-item",4,"ngFor","ngForOf"],[1,"deletable-item"],["type","button",1,"delete-custom-button",3,"click","disabled","title"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"select",1),$("ngModelChange",function(o){return r.onSelectionChange(o)})("blur",function(){return r.onTouched()}),x(2,"option",2),F(3),M(),Ee(4,G1,2,2,"option",3),M(),Ee(5,Q1,8,5,"div",4),M()),t&2&&(k(),B("ngModel",r.selectedInternalCategory)("disabled",r.isDisabled),k(),B("ngValue",null),k(),yt(r.placeholder),k(),B("ngForOf",r.displayCategories),k(),B("ngIf",r.isCustomInputVisible))},dependencies:[ct,Cn,_t,Mr,xl,Rl,qt,xo,Dn,Zn],styles:[".category-selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-family:sans-serif}.category-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:4px;background-color:#fff;font-size:1rem;width:100%;box-sizing:border-box}select[_ngcontent-%COMP%]   option[disabled][_ngcontent-%COMP%]{color:#999}.custom-management-section[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:10px;border-radius:4px;background-color:#f9f9f9;display:flex;flex-direction:column;gap:15px}.custom-input-area[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.custom-category-input[_ngcontent-%COMP%]{flex-grow:1;padding:8px 12px;border:1px solid #ccc;border-radius:4px;font-size:1rem;box-sizing:border-box}.custom-category-button[_ngcontent-%COMP%]{padding:8px 15px;border:none;border-radius:4px;cursor:pointer;font-size:.9rem;transition:background-color .2s ease;flex-shrink:0}.custom-category-button.confirm[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custom-category-button.confirm[_ngcontent-%COMP%]:hover{background-color:#45a049}.custom-category-button.cancel[_ngcontent-%COMP%]{background-color:#aaa;color:#fff}.custom-category-button.cancel[_ngcontent-%COMP%]:hover{background-color:#888}.deletable-categories-area[_ngcontent-%COMP%]{margin-top:10px}.deletable-title[_ngcontent-%COMP%]{font-size:.9em;color:#555;margin-bottom:5px;font-weight:700}.deletable-categories-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:150px;overflow-y:auto;border:1px solid #eee;border-radius:3px}.deletable-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;font-size:.95em;border-bottom:1px solid #f0f0f0}.deletable-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.deletable-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333}.delete-custom-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f44336;font-size:1.2em;line-height:1;padding:2px 5px;cursor:pointer;border-radius:50%}.delete-custom-button[_ngcontent-%COMP%]:hover{background-color:#ffebee;color:#c62828}"]})};var Y1=()=>["\u82F1\u6587","\u7A0B\u5F0F"];function Z1(n,e){n&1&&(x(0,"div",11),F(1," \u984C\u76EE\u70BA\u5FC5\u586B\u9805\u76EE "),M())}function J1(n,e){n&1&&(x(0,"div",11),F(1," \u7B54\u6848\u70BA\u5FC5\u586B\u9805\u76EE "),M())}function X1(n,e){n&1&&(x(0,"div",11),F(1," \u985E\u5225\u70BA\u5FC5\u586B\u9805\u76EE "),M())}var Ol=class n{constructor(e){this.fb=e;this.cardForm=this.fb.group({question:["",So.required],answer:["",So.required],category:["",So.required]})}cardToEdit=null;formSubmitted=new be;cancel=new be;cardForm;isEditing=!1;ngOnInit(){this.updateForm()}ngOnChanges(e){e.cardToEdit&&this.updateForm()}updateForm(){this.cardToEdit?(this.isEditing=!0,this.cardForm.patchValue({question:this.cardToEdit.question,answer:this.cardToEdit.answer,category:this.cardToEdit.category})):(this.isEditing=!1,this.cardForm.reset())}onSubmit(){if(this.cardForm.valid){let e=this.cardForm.value;if(this.isEditing&&this.cardToEdit){let t=ye(ie({},this.cardToEdit),{question:e.question,answer:e.answer,category:e.category});this.formSubmitted.emit(t)}else this.formSubmitted.emit(e)}}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)(j(PD))};static \u0275cmp=bt({type:n,selectors:[["app-flashcard-form"]],inputs:{cardToEdit:"cardToEdit"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},features:[Bt],decls:21,vars:8,consts:[[3,"ngSubmit","formGroup"],["for","question"],["id","question","formControlName","question","rows","3"],["class","error",4,"ngIf"],["for","answer"],["id","answer","formControlName","answer","rows","3"],["for","category"],["id","category-selector","formControlName","category","localStorageKey","myAppFormCategories","placeholder","\u9078\u64C7\u5361\u7247\u985E\u5225",3,"predefinedCategories"],[1,"form-actions"],["type","submit",3,"disabled"],["type","button",3,"click"],[1,"error"]],template:function(t,r){if(t&1&&(x(0,"form",0),$("ngSubmit",function(){return r.onSubmit()}),x(1,"div")(2,"label",1),F(3,"\u984C\u76EE:"),M(),Ut(4,"textarea",2),Ee(5,Z1,2,0,"div",3),M(),x(6,"div")(7,"label",4),F(8,"\u7B54\u6848:"),M(),Ut(9,"textarea",5),Ee(10,J1,2,0,"div",3),M(),x(11,"div")(12,"label",6),F(13,"\u985E\u5225:"),M(),Ut(14,"app-category-selector",7),Ee(15,X1,2,0,"div",3),M(),x(16,"div",8)(17,"button",9),F(18),M(),x(19,"button",10),$("click",function(){return r.onCancel()}),F(20,"\u53D6\u6D88"),M()()()),t&2){let i,o,s;B("formGroup",r.cardForm),k(5),B("ngIf",((i=r.cardForm.get("question"))==null?null:i.invalid)&&((i=r.cardForm.get("question"))==null?null:i.touched)),k(5),B("ngIf",((o=r.cardForm.get("answer"))==null?null:o.invalid)&&((o=r.cardForm.get("answer"))==null?null:o.touched)),k(4),B("predefinedCategories",v0(7,Y1)),k(),B("ngIf",((s=r.cardForm.get("category"))==null?null:s.invalid)&&((s=r.cardForm.get("category"))==null?null:s.touched)),k(2),B("disabled",r.cardForm.invalid),k(),Ye(" ",r.isEditing?"\u66F4\u65B0\u5361\u7247":"\u65B0\u589E\u5361\u7247"," ")}},dependencies:[ct,_t,OD,Nl,qt,Dn,Sl,Xg,em,Pl],styles:["form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:700}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#6c757d}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})};function eF(n,e){if(n&1){let t=Ue();x(0,"tr")(1,"td",5),F(2),M(),x(3,"td",6),F(4),M(),x(5,"td",7),F(6),M(),x(7,"td",8),F(8),En(9,"date"),M(),x(10,"td",9),F(11),M(),x(12,"td",10),F(13),M(),x(14,"td",11)(15,"button",12),$("click",function(){let i=ne(t).$implicit,o=z(2);return re(o.onEdit(i))}),F(16,"\u7DE8\u8F2F"),M(),x(17,"button",12),$("click",function(){let i=ne(t).$implicit,o=z(2);return re(o.onDelete(i.id))}),F(18,"\u522A\u9664"),M()()()}if(n&2){let t=e.$implicit;k(2),yt(t.question),k(2),yt(t.answer),k(2),yt(t.category||"\u672A\u5206\u985E"),k(2),Ye("",t.lastAnsweredTime?Co(9,6,t.lastAnsweredTime,"yyyy/MM/dd HH:mm"):"\u672A\u56DE\u7B54"," "),k(3),yt(t.answerCount),k(2),yt(t.score)}}function tF(n,e){if(n&1&&(x(0,"div")(1,"table",3)(2,"thead")(3,"tr")(4,"th"),F(5,"\u984C\u76EE"),M(),x(6,"th"),F(7,"\u7B54\u6848"),M(),x(8,"th"),F(9,"\u985E\u5225"),M(),x(10,"th"),F(11,"\u4E0A\u6B21\u56DE\u7B54"),M(),x(12,"th"),F(13,"\u6B21\u6578"),M(),x(14,"th"),F(15,"\u5206\u6578"),M(),x(16,"th"),F(17,"\u64CD\u4F5C"),M()()(),x(18,"tbody"),Ee(19,eF,19,9,"tr",4),M()()()),n&2){let t=z();k(19),B("ngForOf",t.filterFlashcards)}}function nF(n,e){n&1&&(x(0,"p"),F(1,"\u76EE\u524D\u6C92\u6709\u55AE\u5B57\u5361\u3002"),M())}var kl=class n{flashcards=[];filterFlashcards=[];searchTerm="";editCard=new be;deleteCard=new be;constructor(){this.applyFilter()}ngOnChanges(e){e.flashcards&&this.applyFilter()}onEdit(e){this.editCard.emit(e)}onDelete(e){confirm("\u78BA\u5B9A\u8981\u522A\u9664\u9019\u5F35\u5361\u7247\u55CE?")&&this.deleteCard.emit(e)}onSearchTermChange(e){let t=e.target;this.searchTerm=t.value,this.applyFilter()}applyFilter(){if(!this.flashcards){this.filterFlashcards=[];return}let e=this.searchTerm.toLowerCase().trim();e?this.filterFlashcards=this.flashcards.filter(t=>t.answer.toLowerCase().includes(e)||t.category.toLowerCase().includes(e)):this.filterFlashcards=[...this.flashcards]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=bt({type:n,selectors:[["app-flashcard-list"]],inputs:{flashcards:"flashcards"},outputs:{editCard:"editCard",deleteCard:"deleteCard"},features:[Bt],decls:4,vars:3,consts:[["noCards",""],["type","text","placeholder","\u641C\u5C0B\u5361\u7247...",1,"search-input",2,"padding","0.5em 1em","margin-left","1rem",3,"input","value"],[4,"ngIf","ngIfElse"],[1,"rwd-table"],[4,"ngFor","ngForOf"],["data-label","\u984C\u76EE"],["data-label","\u7B54\u6848"],["data-label","\u985E\u5225"],["data-label","\u4E0A\u6B21\u56DE\u7B54"],["data-label","\u6B21\u6578"],["data-label","\u5206\u6578"],["data-label","\u64CD\u4F5C"],[3,"click"]],template:function(t,r){if(t&1){let i=Ue();x(0,"input",1),$("input",function(s){return ne(i),re(r.onSearchTermChange(s))}),M(),Ee(1,tF,20,1,"div",2)(2,nF,2,0,"ng-template",null,0,Ju)}if(t&2){let i=Zu(3);B("value",r.searchTerm),k(),B("ngIf",r.flashcards&&r.flashcards.length>0)("ngIfElse",i)}},dependencies:[ct,Cn,_t,Ag],styles:['@charset "UTF-8";.rwd-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;text-align:left;vertical-align:middle}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700;white-space:nowrap}.rwd-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;margin-right:5px;margin-bottom:5px;border:1px solid #ccc;color:#f0f8ff;background-color:#4a4a4a;cursor:pointer;border-radius:4px}.rwd-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;background-color:#e9e9e9}.rwd-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (max-width: 768px){.rwd-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.rwd-table[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #ccc;border-radius:5px;overflow:hidden}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;border-bottom:1px dotted #eee;padding-left:calc(40% + 15px);position:relative;text-align:right;min-height:1.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:none}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:10px;width:40%;font-weight:700;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.rwd-table[_ngcontent-%COMP%]   td[data-label=\\64cd\\4f5c][_ngcontent-%COMP%]{text-align:center;padding-left:10px}.rwd-table[_ngcontent-%COMP%]   td[data-label=\\64cd\\4f5c][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:auto}}']})};var Po=class n{synth;voices=[];selectedVoiceURI=null;volume=1;constructor(){this.synth=window.speechSynthesis,this.loadVoices(),this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>this.loadVoices())}loadVoices(){this.voices=this.synth.getVoices();let e=localStorage.getItem("tts_voiceURI");if(e&&this.voices.find(r=>r.voiceURI===e))this.selectedVoiceURI=e;else if(this.voices.length>0){let r=this.voices.find(i=>i.lang.startsWith("en")||i.lang.startsWith("zh"))||this.voices[0];this.selectedVoiceURI=r.voiceURI}let t=localStorage.getItem("tts_volume");t&&(this.volume=parseFloat(t))}getVoices(){return this.voices}setVoice(e){this.voices.find(t=>t.voiceURI===e)&&(this.selectedVoiceURI=e,localStorage.setItem("tts_voiceURI",e))}getSelectedVoiceURI(){return this.selectedVoiceURI}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),localStorage.setItem("tts_volume",this.volume.toString())}getVolume(){return this.volume}speak(e){if(this.synth.speaking){console.error("SpeechSynthesis.speaking"),this.synth.cancel(),setTimeout(()=>this.doSpeak(e),100);return}this.doSpeak(e)}doSpeak(e){let t=new SpeechSynthesisUtterance(e);if(t.onend=()=>{},t.onerror=r=>{console.error("SpeechSynthesisUtterance.onerror",r)},this.selectedVoiceURI){let r=this.voices.find(i=>i.voiceURI===this.selectedVoiceURI);r&&(t.voice=r)}t.volume=this.volume,this.synth.speak(t)}cancel(){this.synth.cancel()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};function rF(n,e){n&1&&(x(0,"option",11),F(1,"\u6B63\u5728\u8F09\u5165\u8A9E\u97F3..."),M())}function iF(n,e){if(n&1&&(x(0,"option",12),F(1),M()),n&2){let t=e.$implicit;B("value",t.voiceURI),k(),gg(" ",t.name," (",t.lang,") ")}}var Fl=class n{constructor(e){this.ttsService=e}closeModal=new be;voices=[];selectedVoiceURI=null;volume=1;ngOnInit(){this.voices=this.ttsService.getVoices(),this.selectedVoiceURI=this.ttsService.getSelectedVoiceURI(),this.volume=this.ttsService.getVolume(),this.voices.length===0&&typeof window<"u"&&window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{if(this.voices=this.ttsService.getVoices(),!this.selectedVoiceURI&&this.voices.length>0){let e=this.voices.find(t=>t.lang.startsWith("en")||t.lang.startsWith("zh"))||this.voices[0];e&&(this.selectedVoiceURI=e.voiceURI,this.ttsService.getSelectedVoiceURI()===null&&this.ttsService.setVoice(this.selectedVoiceURI))}})}testVoice(){this.ttsService.speak("\u4F60\u597D\uFF0C\u9019\u662F\u4E00\u500B\u8A9E\u97F3\u6E2C\u8A66\u3002")}onClose(){this.closeModal.emit()}static \u0275fac=function(t){return new(t||n)(j(Po))};static \u0275cmp=bt({type:n,selectors:[["app-tts-settings-modal"]],outputs:{closeModal:"closeModal"},decls:20,vars:8,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"form-group"],["for","voice-select"],["id","voice-select",3,"ngModelChange","ngModel"],["disabled","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["for","volume-slider"],["type","range","id","volume-slider","min","0","max","1","step","0.05",3,"ngModelChange","ngModel"],[1,"modal-actions"],[3,"click"],["disabled",""],[3,"value"]],template:function(t,r){t&1&&(x(0,"div",0),$("click",function(){return r.onClose()}),x(1,"div",1),$("click",function(o){return o.stopPropagation()}),x(2,"h3"),F(3,"\u8A9E\u97F3\u8A2D\u5B9A"),M(),x(4,"div",2)(5,"label",3),F(6,"\u9078\u64C7\u8072\u97F3 (\u570B\u7C4D/\u8A9E\u8A00):"),M(),x(7,"select",4),nn("ngModelChange",function(o){return In(r.selectedVoiceURI,o)||(r.selectedVoiceURI=o),o}),$("ngModelChange",function(){return r.selectedVoiceURI&&r.ttsService.setVoice(r.selectedVoiceURI)}),Ee(8,rF,2,0,"option",5)(9,iF,2,3,"option",6),M()(),x(10,"div",2)(11,"label",7),F(12),En(13,"number"),M(),x(14,"input",8),nn("ngModelChange",function(o){return In(r.volume,o)||(r.volume=o),o}),$("ngModelChange",function(o){return r.ttsService.setVolume(o)}),M()(),x(15,"div",9)(16,"button",10),$("click",function(){return r.testVoice()}),F(17,"\u6E2C\u8A66\u8A9E\u97F3"),M(),x(18,"button",10),$("click",function(){return r.onClose()}),F(19,"\u95DC\u9589"),M()()()()),t&2&&(k(7),tn("ngModel",r.selectedVoiceURI),k(),B("ngIf",r.voices.length===0),k(),B("ngForOf",r.voices),k(3),Ye("\u97F3\u91CF: ",Co(13,5,r.volume*100,"1.0-0"),"%"),k(2),tn("ngModel",r.volume))},dependencies:[ct,Cn,_t,Mg,Mr,xl,Rl,qt,Jg,xo,Dn,Zn],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0000001a;min-width:300px;max-width:500px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box}.modal-actions[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})};var Vl=class n{constructor(e){this.sanitizer=e}transform(e,t){if(e==null||t===null||t===void 0)return this.sanitizer.bypassSecurityTrustHtml(e||"");let r="",i=e.length,o=t.length,s=Math.max(i,o);for(let c=0;c<i;c++){let u=e[c],d=t[c];u!==d?r+=`<span style="color: red;">${this.escapeHtml(u)}</span>`:r+=this.escapeHtml(u)}return this.sanitizer.bypassSecurityTrustHtml(r)}escapeHtml(e){return e?e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"').replace(/'/g,"'"):""}static \u0275fac=function(t){return new(t||n)(j(Ug,16))};static \u0275pipe=Eo({name:"diffHighlight",type:n,pure:!0})};var Nr=class n{localStorageKey="flashcards";flashcardsSubject=new mr(this.loadFlashcards());flashcards$=this.flashcardsSubject.asObservable();constructor(){this.updateCategoryCache()}loadFlashcards(){let e=localStorage.getItem(this.localStorageKey);return e?JSON.parse(e).map(t=>ye(ie({},t),{lastAnsweredTime:t.lastAnsweredTime?new Date(t.lastAnsweredTime):null})):[]}saveFlashcards(e){localStorage.setItem(this.localStorageKey,JSON.stringify(e)),this.flashcardsSubject.next(this.parseDates(e))}generateId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}parseDates(e){return e.map(t=>ye(ie({},t),{lastAnsweredTime:t.lastAnsweredTime?new Date(t.lastAnsweredTime):null}))}getFlashcards(){return this.flashcardsSubject.value}getFlashcardById(e){return this.getFlashcards().find(t=>t.id===e)}addFlashcard(e){let t=ye(ie({},e),{id:this.generateId(),category:e.category,lastAnsweredTime:null,answerCount:0,score:0}),r=this.getFlashcards();this.saveFlashcards([...r,t])}updateFlashcard(e){let t=this.getFlashcards();t=t.map(r=>r.id===e.id?e:r),this.saveFlashcards(t)}deleteFlashcard(e){let t=this.getFlashcards();t=t.filter(r=>r.id!==e),this.saveFlashcards(t)}replaceAllFlashcards(e){let t=e.map(r=>{let i=null;return r.lastAnsweredTime&&(r.lastAnsweredTime.toDate?i=r.lastAnsweredTime.toDate():typeof r.lastAnsweredTime=="string"||typeof r.lastAnsweredTime=="number"?i=new Date(r.lastAnsweredTime):i=r.lastAnsweredTime),ye(ie({},r),{lastAnsweredTime:i})});this.saveFlashcards(t)}cachedCategories=[];updateCategoryCache(){this.getAllCategories().subscribe(e=>{this.cachedCategories=e})}getNextCardToReview(){let e=this.cachedCategories,t=this.getFlashcards().filter(o=>e.includes(o.category));if(t.length===0)return;let r=-1;for(let o=t.length-1;o>=0;o--)if(t[o].answerCount===0&&t[o].score===0){r=o;break}let i=null;return r>-1&&(i=t.splice(r,1)[0]),t.sort((o,s)=>{let c=this.calculateTime(o.lastAnsweredTime?.getTime()),u=this.calculateTime(s.lastAnsweredTime?.getTime()),d=o.answerCount===0,h=s.answerCount===0;return d&&!h?-1:!d&&h?1:d&&h?u.days-c.days:o.score!==s.score?o.score-s.score:u.days-c.days}),i&&t.unshift(i),t[0]}calculateTime(e,t=!1){if(!e)return{days:0,hours:0,minutes:0};let r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime(),o=t?i:Date.now(),s=Math.abs(o-e);var c=Math.floor(s/(24*60*60*1e3)),u=Math.floor(s%(24*60*60*1e3)/(60*60*1e3)),d=Math.floor(s%(60*60*1e3)/(60*1e3));return{days:c,hours:u,minutes:d}}answerCard(e,t){let r=this.getFlashcardById(e);r&&(r.lastAnsweredTime=new Date,r.answerCount++,t?r.score+=1:r.score=Math.max(0,r.score-2),this.updateFlashcard(r))}selectedCategoriesKey="selectedFlashcardCategories";selectedCategoriesSubject=new mr(this.loadSelectedCategories());allFlashcards$=this.flashcardsSubject.asObservable();selectedCategories$=this.selectedCategoriesSubject.asObservable();loadSelectedCategories(){let e=localStorage.getItem(this.selectedCategoriesKey);return e?JSON.parse(e):[]}setSelectedCategories(e){localStorage.setItem(this.selectedCategoriesKey,JSON.stringify(e)),this.selectedCategoriesSubject.next(e)}getAllCategories(){return this.allFlashcards$.pipe(ln(e=>{let t=new Set;return e.forEach(r=>t.add(r.category)),Array.from(t).sort()}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};function oF(n,e){if(n&1){let t=Ue();x(0,"label",23)(1,"input",24),$("ngModelChange",function(){ne(t);let i=z(3);return re(i.onCategorySelectionChange())}),M(),F(2),M()}if(n&2){let t=e.$implicit,r=z(3);k(),B("checked",r.selectedCategories.includes(t)),k(),Ye(" ",t," ")}}function sF(n,e){n&1&&(x(0,"p",25),F(1," \u76EE\u524D\u6C92\u6709\u4EFB\u4F55\u5361\u7247\u6216\u985E\u5225\u3002\u8ACB\u5148\u65B0\u589E\u4E00\u4E9B\u5361\u7247\u3002 "),M())}function aF(n,e){if(n&1&&(hg(0),Ee(1,oF,3,2,"label",21)(2,sF,2,0,"p",22),fg()),n&2){let t=e.ngIf;k(),B("ngForOf",t),k(),B("ngIf",t.length===0)}}function cF(n,e){if(n&1&&(x(0,"small",26),F(1),M()),n&2){let t=z(2);k(),Ye("\u985E\u5225: ",t.currentCard.category,"")}}function uF(n,e){n&1&&(x(0,"span"),F(1,"\u986F\u793A"),M())}function lF(n,e){n&1&&(x(0,"span"),F(1,"\u96B1\u85CF"),M())}function dF(n,e){if(n&1&&(x(0,"div",16)(1,"h3"),F(2,"\u7B54\u6848:"),M(),x(3,"p",27),En(4,"diffHighlight"),F(5),M()()),n&2){let t=z(2);k(3),B("innerHTML",Co(4,2,t.currentCard.answer,t.answerInput),NC),k(2),yt(t.currentCard.answer)}}function hF(n,e){if(n&1){let t=Ue();x(0,"div",28)(1,"button",29),$("click",function(){ne(t);let i=z(2);return re(i.answer(!0))}),F(2,"\u6211\u6703\u4E86 \u{1F44D}"),M(),x(3,"button",30),$("click",function(){ne(t);let i=z(2);return re(i.answer(!1))}),F(4,"\u6211\u4E0D\u6703 \u{1F44E}"),M()()}if(n&2){let t=z(2);k(),B("disabled",t.currentCard.answer!=t.answerInput)}}function fF(n,e){if(n&1){let t=Ue();x(0,"div",3)(1,"h2"),F(2,"\u8907\u7FD2\u55AE\u5B57\u5361"),M(),x(3,"div",4)(4,"h4"),F(5,"\u7BE9\u9078\u985E\u5225:"),M(),x(6,"div",5)(7,"label",6)(8,"input",7),En(9,"async"),$("change",function(i){ne(t);let o=z();return re(o.toggleSelectAllCategories(i))}),M(),F(10," \u5168\u9078/\u5168\u4E0D\u9078 "),M(),Ee(11,aF,3,2,"ng-container",8),En(12,"async"),M()(),Ut(13,"hr"),x(14,"div",9)(15,"div",10)(16,"h3"),F(17,"\u984C\u76EE:"),M(),Ee(18,cF,2,1,"small",11),x(19,"p"),F(20),M()(),x(21,"div",12)(22,"button",13),$("click",function(){ne(t);let i=z();return re(i.speakAnswer(i.answerInput))}),F(23,"\u{1F50A}"),M(),x(24,"input",14),nn("ngModelChange",function(i){ne(t);let o=z();return In(o.answerInput,i)||(o.answerInput=i),re(i)}),M()(),Ut(25,"hr"),x(26,"button",15),$("click",function(){ne(t);let i=z();return re(i.showAnswer=!i.showAnswer)}),Ee(27,uF,2,0,"span",8)(28,lF,2,0,"span",8),F(29,"\u7B54\u6848 "),M(),x(30,"div",16)(31,"button",17),$("click",function(){ne(t);let i=z();return re(i.speakAnswer(i.currentCard.answer))}),F(32,"\u{1F50A} \u5FF5\u7B54\u6848"),M(),x(33,"button",18),$("click",function(){ne(t);let i=z();return re(i.openTtsSettings())}),F(34,"\u2699\uFE0F \u8A9E\u97F3\u8A2D\u5B9A"),M()(),Ee(35,dF,6,5,"div",19),M(),Ee(36,hF,5,1,"div",20),M()}if(n&2){let t,r=z();k(8),B("checked",r.areAllCategoriesSelected())("disabled",((t=Zs(9,10,r.allCategories$))==null?null:t.length)===0),k(3),B("ngIf",Zs(12,12,r.allCategories$)),k(7),B("ngIf",r.currentCard.category),k(2),yt(r.currentCard.question),k(4),tn("ngModel",r.answerInput),k(3),B("ngIf",!r.showAnswer),k(),B("ngIf",r.showAnswer),k(7),B("ngIf",r.showAnswer),k(),B("ngIf",r.showAnswer)}}function pF(n,e){n&1&&(x(0,"p"),F(1,"\u592A\u68D2\u4E86\uFF01\u76EE\u524D\u6C92\u6709\u9700\u8981\u8907\u7FD2\u7684\u5361\u7247\uFF0C\u6216\u8005\u4F60\u9084\u6C92\u6709\u65B0\u589E\u4EFB\u4F55\u5361\u7247\u3002"),M())}function gF(n,e){if(n&1){let t=Ue();x(0,"app-tts-settings-modal",31),$("closeModal",function(){ne(t);let i=z();return re(i.closeTtsSettings())}),M()}}var Ll=class n{constructor(e,t){this.flashcardService=e;this.ttsService=t;this.allCategories$=this.flashcardService.getAllCategories()}currentCard=void 0;showAnswer=!1;isTtsSettingsModalOpen=!1;allCategories$=nf([]);selectedCategories=[];answerInput="";ngOnInit(){this.flashcardService.selectedCategories$.subscribe(e=>{this.selectedCategories=[...e||[]]}),this.drawNextCard()}drawNextCard(){this.currentCard=this.flashcardService.getNextCardToReview(),this.showAnswer=!1}speakAnswer(e){this.currentCard&&e&&this.ttsService.speak(e)}answer(e){this.currentCard&&(this.flashcardService.answerCard(this.currentCard.id,e),this.drawNextCard(),this.speakAnswer(this.currentCard.answer),this.answerInput="")}openTtsSettings(){this.isTtsSettingsModalOpen=!0}closeTtsSettings(){this.isTtsSettingsModalOpen=!1}onCategorySelectionChange(){this.flashcardService.setSelectedCategories(this.selectedCategories),this.drawNextCard()}toggleSelectAllCategories(e){e.target.checked?this.allCategories$.subscribe(r=>{this.selectedCategories=[...r],this.onCategorySelectionChange()}).unsubscribe():(this.selectedCategories=[],this.onCategorySelectionChange())}areAllCategoriesSelected(){let e=0;return this.allCategories$.subscribe(t=>e=t.length).unsubscribe(),e>0&&this.selectedCategories.length===e}static \u0275fac=function(t){return new(t||n)(j(Nr),j(Po))};static \u0275cmp=bt({type:n,selectors:[["app-flashcard-review"]],decls:4,vars:3,consts:[["noCardsToReview",""],["class","review-container",4,"ngIf","ngIfElse"],[3,"closeModal",4,"ngIf"],[1,"review-container"],[1,"category-filter"],[1,"category-options"],[1,"category-option","select-all-label"],["type","checkbox",3,"change","checked","disabled"],[4,"ngIf"],[1,"card"],[1,"card-question"],["class","card-category-badge",4,"ngIf"],[2,"display","flex","align-items","center"],["title","\u5FF5\u51FA\u7B54\u6848",2,"height","3rem",3,"click"],[2,"padding","1rem","margin","1rem","width","-webkit-fill-available",3,"ngModelChange","ngModel"],[3,"click"],[1,"card-answer"],["title","\u5FF5\u51FA\u7B54\u6848",3,"click"],["title","\u8A9E\u97F3\u8A2D\u5B9A",3,"click"],["class","card-answer",4,"ngIf"],["class","answer-actions",4,"ngIf"],["class","category-option",4,"ngFor","ngForOf"],["class","no-categories-message",4,"ngIf"],[1,"category-option"],["type","checkbox",3,"ngModelChange","checked"],[1,"no-categories-message"],[1,"card-category-badge"],[3,"innerHTML"],[1,"answer-actions"],[1,"know-btn",3,"click","disabled"],[1,"dont-know-btn",3,"click"],[3,"closeModal"]],template:function(t,r){if(t&1&&Ee(0,fF,37,14,"div",1)(1,pF,2,0,"ng-template",null,0,Ju)(3,gF,1,0,"app-tts-settings-modal",2),t&2){let i=Zu(2);B("ngIf",r.currentCard)("ngIfElse",i),k(3),B("ngIf",r.isTtsSettingsModalOpen)}},dependencies:[ct,Cn,_t,ia,Mr,qt,Dn,Zn,Fl,Vl],styles:[".review-container[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:8px;padding:20px;margin:20px auto;max-width:500px;background-color:#fff;box-shadow:0 2px 4px #0000001a}.card-question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .card-answer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#555}.card-question[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .card-answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;min-height:40px}.card-answer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.answer-actions[_ngcontent-%COMP%]{margin-top:20px}.answer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1em;margin:0 10px}.know-btn[_ngcontent-%COMP%]{background-color:#28a745}.know-btn[_ngcontent-%COMP%]:hover{background-color:#218838}.dont-know-btn[_ngcontent-%COMP%]{background-color:#dc3545}.dont-know-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.next-card-btn[_ngcontent-%COMP%]{margin-top:1rem;background-color:#ffc107;color:#212529}.next-card-btn[_ngcontent-%COMP%]:hover{background-color:#e0a800}.category-filter[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;background-color:#f9f9f9;border-radius:8px;border:1px solid #eee}.category-filter[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;color:#333}.category-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.category-option[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:5px 10px;background-color:#fff;border:1px solid #ddd;border-radius:20px;cursor:pointer;transition:background-color .2s,color .2s;font-size:.9em}.category-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:5px;cursor:pointer}.category-option[_ngcontent-%COMP%]:has(input:checked){background-color:#007bff;color:#fff;border-color:#007bff}.select-all-label[_ngcontent-%COMP%]{font-weight:700}.no-categories-message[_ngcontent-%COMP%]{width:100%;text-align:center;color:#777;font-style:italic}.card-category-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e9ecef;color:#495057;padding:.25em .5em;font-size:.75em;border-radius:.25rem;margin-top:8px}hr[_ngcontent-%COMP%]{border:0;height:1px;background-color:#eee;margin:20px 0}"]})};var LD=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},mF=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},BD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,h=o>>2,g=(o&3)<<4|c>>4,y=(c&15)<<2|d>>6,m=d&63;u||(m=64,s||(y=64)),r.push(t[h],t[g],t[y],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new im;let y=o<<2|c>>4;if(r.push(y),d!==64){let m=c<<4&240|d>>2;if(r.push(m),g!==64){let S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},im=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},yF=function(n){let e=LD(n);return BD.encodeByteArray(e,!0)},_a=function(n){return yF(n).replace(/\./g,"")},sm=function(n){try{return BD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _F(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vF=()=>_F().__FIREBASE_DEFAULTS__,IF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},EF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&sm(n[1]);return e&&JSON.parse(e)},Ul=()=>{try{return vF()||IF()||EF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},am=n=>{var e,t;return(t=(e=Ul())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},UD=n=>{let e=am(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cm=()=>{var n;return(n=Ul())===null||n===void 0?void 0:n.config},um=n=>{var e;return(e=Ul())===null||e===void 0?void 0:e[`_${n}`]};var Bl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function jD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_a(JSON.stringify(t)),_a(JSON.stringify(s)),""].join(".")}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function wF(){var n;let e=(n=Ul())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qD(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GD(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function WD(){return!wF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lm(){try{return typeof indexedDB=="object"}catch{return!1}}function KD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var CF="FirebaseError",Pt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=CF,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jn.prototype.create)}},Jn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?DF(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Pt(i,c,r)}};function DF(n,e){return n.replace(bF,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var bF=/\{\$([^}]+)}/g;function QD(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ii(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(VD(o)&&VD(s)){if(!Ii(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function VD(n){return n!==null&&typeof n=="object"}function va(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oo(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ko(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function YD(n,e){let t=new om(n,e);return t.subscribe.bind(t)}var om=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TF(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=rm),i.error===void 0&&(i.error=rm),i.complete===void 0&&(i.complete=rm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TF(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rm(){}var sz=4*60*60*1e3;function Be(n){return n&&n._delegate?n._delegate:n}var zt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ei="[DEFAULT]";var dm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Bl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AF(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SF(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SF(n){return n===Ei?void 0:n}function AF(n){return n.instantiationMode==="EAGER"}var jl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new dm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var MF=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),NF={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},xF=ce.INFO,RF={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},PF=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=RF[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xr=class{constructor(e){this.name=e,this._logLevel=xF,this._logHandler=PF,this._userLogHandler=null,MF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var OF=(n,e)=>e.some(t=>n instanceof t),ZD,JD;function kF(){return ZD||(ZD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FF(){return JD||(JD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var XD=new WeakMap,fm=new WeakMap,eb=new WeakMap,hm=new WeakMap,gm=new WeakMap;function VF(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(bn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&XD.set(t,n)}).catch(()=>{}),gm.set(e,n),e}function LF(n){if(fm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});fm.set(n,e)}var pm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tb(n){pm=n(pm)}function BF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call($l(this),e,...t);return eb.set(r,e.sort?e.sort():[e]),bn(r)}:FF().includes(n)?function(...e){return n.apply($l(this),e),bn(XD.get(this))}:function(...e){return bn(n.apply($l(this),e))}}function UF(n){return typeof n=="function"?BF(n):(n instanceof IDBTransaction&&LF(n),OF(n,kF())?new Proxy(n,pm):n)}function bn(n){if(n instanceof IDBRequest)return VF(n);if(hm.has(n))return hm.get(n);let e=UF(n);return e!==n&&(hm.set(n,e),gm.set(e,n)),e}var $l=n=>gm.get(n);function rb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=bn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(bn(s.result),u.oldVersion,u.newVersion,bn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var jF=["get","getKey","getAll","getAllKeys","count"],$F=["put","add","delete","clear"],mm=new Map;function nb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mm.get(e))return mm.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=$F.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jF.includes(t)))return;let o=function(s,...c){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return mm.set(e,o),o}tb(n=>ye(ie({},n),{get:(e,t,r)=>nb(e,t)||n.get(e,t,r),has:(e,t)=>!!nb(e,t)||n.has(e,t)}));var _m=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HF(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function HF(n){let e=n.getComponent();return e?.type==="VERSION"}var vm="@firebase/app",ib="0.10.13";var Xn=new xr("@firebase/app"),qF="@firebase/app-compat",zF="@firebase/analytics-compat",GF="@firebase/analytics",WF="@firebase/app-check-compat",KF="@firebase/app-check",QF="@firebase/auth",YF="@firebase/auth-compat",ZF="@firebase/database",JF="@firebase/data-connect",XF="@firebase/database-compat",eV="@firebase/functions",tV="@firebase/functions-compat",nV="@firebase/installations",rV="@firebase/installations-compat",iV="@firebase/messaging",oV="@firebase/messaging-compat",sV="@firebase/performance",aV="@firebase/performance-compat",cV="@firebase/remote-config",uV="@firebase/remote-config-compat",lV="@firebase/storage",dV="@firebase/storage-compat",hV="@firebase/firestore",fV="@firebase/vertexai-preview",pV="@firebase/firestore-compat",gV="firebase",mV="10.14.1";var Im="[DEFAULT]",yV={[vm]:"fire-core",[qF]:"fire-core-compat",[GF]:"fire-analytics",[zF]:"fire-analytics-compat",[KF]:"fire-app-check",[WF]:"fire-app-check-compat",[QF]:"fire-auth",[YF]:"fire-auth-compat",[ZF]:"fire-rtdb",[JF]:"fire-data-connect",[XF]:"fire-rtdb-compat",[eV]:"fire-fn",[tV]:"fire-fn-compat",[nV]:"fire-iid",[rV]:"fire-iid-compat",[iV]:"fire-fcm",[oV]:"fire-fcm-compat",[sV]:"fire-perf",[aV]:"fire-perf-compat",[cV]:"fire-rc",[uV]:"fire-rc-compat",[lV]:"fire-gcs",[dV]:"fire-gcs-compat",[hV]:"fire-fst",[pV]:"fire-fst-compat",[fV]:"fire-vertex","fire-js":"fire-js",[gV]:"fire-js-all"};var Ia=new Map,_V=new Map,Em=new Map;function ob(n,e){try{n.container.addComponent(e)}catch(t){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pr(n){let e=n.name;if(Em.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,n);for(let t of Ia.values())ob(t,n);for(let t of _V.values())ob(t,n);return!0}function wa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function on(n){return n.settings!==void 0}var vV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Jn("app","Firebase",vV);var wm=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}};var Or=mV;function bm(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Im,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(t||(t=cm()),!t)throw Rr.create("no-options");let o=Ia.get(i);if(o){if(Ii(t,o.options)&&Ii(r,o.config))return o;throw Rr.create("duplicate-app",{appName:i})}let s=new jl(i);for(let u of Em.values())s.addComponent(u);let c=new wm(t,r,s);return Ia.set(i,c),c}function Fo(n=Im){let e=Ia.get(n);if(!e&&n===Im&&cm())return bm();if(!e)throw Rr.create("no-app",{appName:n});return e}function Hl(){return Array.from(Ia.values())}function We(n,e,t){var r;let i=(r=yV[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(c.join(" "));return}Pr(new zt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var IV="firebase-heartbeat-database",EV=1,Ea="firebase-heartbeat-store",ym=null;function ub(){return ym||(ym=rb(IV,EV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ea)}catch(t){console.warn(t)}}}}).catch(n=>{throw Rr.create("idb-open",{originalErrorMessage:n.message})})),ym}function wV(n){return v(this,null,function*(){try{let t=(yield ub()).transaction(Ea),r=yield t.objectStore(Ea).get(lb(n));return yield t.done,r}catch(e){if(e instanceof Pt)Xn.warn(e.message);else{let t=Rr.create("idb-get",{originalErrorMessage:e?.message});Xn.warn(t.message)}}})}function sb(n,e){return v(this,null,function*(){try{let r=(yield ub()).transaction(Ea,"readwrite");yield r.objectStore(Ea).put(e,lb(n)),yield r.done}catch(t){if(t instanceof Pt)Xn.warn(t.message);else{let r=Rr.create("idb-set",{originalErrorMessage:t?.message});Xn.warn(r.message)}}})}function lb(n){return`${n.name}!${n.options.appId}`}var CV=1024,DV=30*24*60*60*1e3,Cm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Dm(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ab();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let c=new Date(s.date).valueOf();return Date.now()-c<=DV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ab(),{heartbeatsToSend:r,unsentEntries:i}=bV(this._heartbeatsCache.heartbeats),o=_a(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Xn.warn(t),""}})}};function ab(){return new Date().toISOString().substring(0,10)}function bV(n,e=CV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),cb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Dm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return lm()?KD().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield wV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cb(n){return _a(JSON.stringify({version:2,heartbeats:n})).length}function TV(n){Pr(new zt("platform-logger",e=>new _m(e),"PRIVATE")),Pr(new zt("heartbeat",e=>new Cm(e),"PRIVATE")),We(vm,ib,n),We(vm,ib,"esm2017"),We("fire-js","")}TV("");var SV="firebase",AV="10.14.1";We(SV,AV,"app");var Ci=new li("ANGULARFIRE2_VERSION");function zl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ca=(n,e)=>{let t=e?[e]:Hl(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Lo=class{constructor(){return Ca(MV)}},MV="app-check";function Vo(){}var ql=class{zone;delegate;constructor(e,t=ef){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Tm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vo,{},Vo,Vo)),t.pipe(of({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ql(Zone.current)),this.insideAngular=t.run(()=>new ql(Zone.current,Xh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(pe(Ne))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gl(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function NV(n){return Gl().ngZone.runOutsideAngular(()=>n())}function wi(n){return Gl().ngZone.run(()=>n())}function xV(n){return RV(Gl())(n)}function RV(n){return function(t){return t=t.lift(new Tm(n.ngZone)),t.pipe(vr(n.outsideAngular),_r(n.insideAngular))}}var PV=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),wi(()=>n.apply(void 0,r))},vt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=wi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vo,{},Vo,Vo))),r[o]=PV(r[o],t));let i=NV(()=>n.apply(this,r));if(!e)if(i instanceof Oe){let o=Gl();return i.pipe(vr(o.outsideAngular),_r(o.insideAngular))}else return wi(()=>i);return i instanceof Oe?i.pipe(xV):i instanceof Promise?wi(()=>new Promise((o,s)=>i.then(c=>wi(()=>o(c)),c=>wi(()=>s(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:wi(()=>i)};var er=class{constructor(e){return e}},Di=class{constructor(){return Hl()}};function OV(n){return n&&n.length===1?n[0]:new er(Fo())}var Sm=new G("angularfire2._apps"),kV={provide:er,useFactory:OV,deps:[[new Dt,Sm]]},FV={provide:Di,deps:[[new Dt,Sm]]};function VV(n){return(e,t)=>{let r=t.get(gi);We("angularfire",Ci.full,"core"),We("angularfire",Ci.full,"app"),We("angular",w0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function db(n,...e){return di([kV,FV,{provide:Sm,useFactory:VV(n),multi:!0,deps:[Ne,Ct,Bo,...e]}])}var hb=vt(bm,!0);function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Nb=Mb,xb=new Jn("auth","Firebase",Mb());var Jl=new xr("@firebase/auth");function LV(n,...e){Jl.logLevel<=ce.WARN&&Jl.warn(`Auth (${Or}): ${n}`,...e)}function Kl(n,...e){Jl.logLevel<=ce.ERROR&&Jl.error(`Auth (${Or}): ${n}`,...e)}function Sn(n,...e){throw Ym(n,...e)}function bi(n,...e){return Ym(n,...e)}function Rb(n,e,t){let r=Object.assign(Object.assign({},Nb()),{[e]:t});return new Jn("auth","Firebase",r).create(e,{appName:n.name})}function rr(n){return Rb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ym(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xb.create(n,...e)}function K(n,e,...t){if(!n)throw Ym(e,...t)}function tr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Kl(e),new Error(e)}function Fr(n,e){n||tr(e)}function xm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function BV(){return fb()==="http:"||fb()==="https:"}function fb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function UV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BV()||qD()||"connection"in navigator)?navigator.onLine:!0}function jV(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ti=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fr(t>e,"Short delay should be less than long delay!"),this.isMobile=$D()||zD()}get(){return UV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zm(n,e){Fr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xl=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HV=new Ti(3e4,6e4);function Vr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Lr(o,s,c,u){return v(this,arguments,function*(n,e,t,r,i={}){return Pb(n,i,()=>v(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=va(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:y},d);return HD()||(m.referrerPolicy="no-referrer"),Xl.fetch()(Ob(n,n.config.apiHost,t,g),m)}))})}function Pb(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},$V),e);try{let i=new Rm(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Wl(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Wl(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Wl(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Rb(n,h,d);Sn(n,h)}}catch(i){if(i instanceof Pt)throw i;Sn(n,"network-request-failed",{message:String(i)})}})}function xa(o,s,c,u){return v(this,arguments,function*(n,e,t,r,i={}){let d=yield Lr(n,e,t,r,i);return"mfaPendingCredential"in d&&Sn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Ob(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Zm(n.config,i):`${n.config.apiScheme}://${i}`}function qV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Rm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(bi(this.auth,"network-request-failed")),HV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Wl(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=bi(n,e,r);return i.customData._tokenResponse=t,i}function pb(n){return n!==void 0&&n.enterprise!==void 0}var Pm=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function zV(n,e){return v(this,null,function*(){return Lr(n,"GET","/v2/recaptchaConfig",Vr(n,e))})}function GV(n,e){return v(this,null,function*(){return Lr(n,"POST","/v1/accounts:delete",e)})}function kb(n,e){return v(this,null,function*(){return Lr(n,"POST","/v1/accounts:lookup",e)})}function Da(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jm(n,e=!1){return v(this,null,function*(){let t=Be(n),r=yield t.getIdToken(e),i=Xm(r);K(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Da(Am(i.auth_time)),issuedAtTime:Da(Am(i.iat)),expirationTime:Da(Am(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Am(n){return Number(n)*1e3}function Xm(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kl("JWT malformed, contained fewer than 3 sections"),null;try{let i=sm(t);return i?JSON.parse(i):(Kl("Failed to decode base64 JWT payload"),null)}catch(i){return Kl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gb(n){let e=Xm(n);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ta(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Pt&&WV(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function WV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Om=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Sa=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ed(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ta(n,kb(t,{idToken:r}));K(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Fb(o.providerUserInfo):[],c=KV(n.providerData,s),u=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!c?.length,h=u?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sa(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function ey(n){return v(this,null,function*(){let e=Be(n);yield ed(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function KV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Fb(n){return n.map(e=>{var{providerId:t}=e,r=tf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function QV(n,e){return v(this,null,function*(){let t=yield Pb(n,{},()=>v(null,null,function*(){let r=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=Ob(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Xl.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function YV(n,e){return v(this,null,function*(){return Lr(n,"POST","/v2/accounts:revokeToken",Vr(n,e))})}var ba=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){K(e.length!==0,"internal-error");let t=gb(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield QV(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return tr("not implemented")}};function kr(n,e){K(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Uo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Om(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ta(this,this.stsTokenManager.getToken(this.auth,e));return K(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Jm(this,e)}reload(){return ey(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ed(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(on(this.auth.app))return Promise.reject(rr(this.auth));let e=yield this.getIdToken();return yield Ta(this,GV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,J=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:se,emailVerified:ve,isAnonymous:Qe,providerData:Ie,stsTokenManager:C}=t;K(se&&C,e,"internal-error");let _=ba.fromJSON(this.name,C);K(typeof se=="string",e,"internal-error"),kr(g,e.name),kr(y,e.name),K(typeof ve=="boolean",e,"internal-error"),K(typeof Qe=="boolean",e,"internal-error"),kr(m,e.name),kr(S,e.name),kr(P,e.name),kr(R,e.name),kr(H,e.name),kr(J,e.name);let E=new n({uid:se,auth:e,email:y,emailVerified:ve,displayName:g,isAnonymous:Qe,photoURL:S,phoneNumber:m,tenantId:P,stsTokenManager:_,createdAt:H,lastLoginAt:J});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(w=>Object.assign({},w))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new ba;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ed(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Fb(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new ba;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,d),u})}};var mb=new Map;function nr(n){Fr(n instanceof Function,"Expected a class definition");let e=mb.get(n);return e?(Fr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mb.set(n,e),e)}var ZV=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),km=ZV;function Ql(n,e,t){return`firebase:${n}:${e}:${t}`}var td=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ql(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ql("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(nr(km),e,r);let i=(yield Promise.all(t.map(d=>v(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||nr(km),s=Ql(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let h=yield d._get(s);if(h){let g=Uo._fromJSON(e,h);d!==o&&(c=g),o=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(d=>v(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function yb(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ub(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($b(e))return"Blackberry";if(Hb(e))return"Webos";if(Lb(e))return"Safari";if((e.includes("chrome/")||Bb(e))&&!e.includes("edge/"))return"Chrome";if(jb(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Vb(n=Ze()){return/firefox\//i.test(n)}function Lb(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bb(n=Ze()){return/crios\//i.test(n)}function Ub(n=Ze()){return/iemobile/i.test(n)}function jb(n=Ze()){return/android/i.test(n)}function $b(n=Ze()){return/blackberry/i.test(n)}function Hb(n=Ze()){return/webos/i.test(n)}function ty(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JV(n=Ze()){var e;return ty(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XV(){return GD()&&document.documentMode===10}function qb(n=Ze()){return ty(n)||jb(n)||Hb(n)||$b(n)||/windows phone/i.test(n)||Ub(n)}function zb(n,e=[]){let t;switch(n){case"Browser":t=yb(Ze());break;case"Worker":t=`${yb(Ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Or}/${r}`}var Fm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function eL(t){return v(this,arguments,function*(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",Vr(n,e))})}var tL=6,Vm=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:tL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Lm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nd(this),this.idTokenSubscription=new nd(this),this.beforeStateQueue=new Fm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield td.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield kb(this,{idToken:e}),r=yield Uo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(on(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield ed(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jV()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(on(this.app))return Promise.reject(rr(this));let t=e?Be(e):null;return t&&K(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return on(this.app)?Promise.reject(rr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return on(this.app)?Promise.reject(rr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield eL(this),t=new Vm(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield YV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&nr(e)||this._popupRedirectResolver;K(t,this,"argument-error"),this.redirectPersistenceManager=yield td.create(this,[nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&LV(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ai(n){return Be(n)}var nd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=YD(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ud={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nL(n){ud=n}function Gb(n){return ud.loadJS(n)}function rL(){return ud.recaptchaEnterpriseScript}function iL(){return ud.gapiScript}function Wb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var oL="recaptcha-enterprise",sL="NO_RECAPTCHA",Bm=class{constructor(e){this.type=oL,this.auth=Ai(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>v(null,null,function*(){zV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new Pm(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;pb(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(sL)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(c=>{if(!t&&pb(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=rL();u.length!==0&&(u+=c),Gb(u).then(()=>{i(c,o,s)}).catch(d=>{s(d)})}}).catch(c=>{s(c)})})})}};function _b(n,e,t,r=!1){return v(this,null,function*(){let i=new Bm(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function Um(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield _b(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield _b(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function ny(n,e){let t=wa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ii(o,e??{}))return i;Sn(i,"already-initialized")}return t.initialize({options:e})}function aL(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(nr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ry(n,e,t){let r=Ai(n);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=Kb(e),{host:s,port:c}=cL(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||uL()}function Kb(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cL(n){let e=Kb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:vb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:vb(s)}}}function vb(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function uL(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Aa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,t){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}};function lL(n,e){return v(this,null,function*(){return Lr(n,"POST","/v1/accounts:signUp",e)})}function dL(n,e){return v(this,null,function*(){return xa(n,"POST","/v1/accounts:signInWithPassword",Vr(n,e))})}function hL(n,e){return v(this,null,function*(){return xa(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,e))})}function fL(n,e){return v(this,null,function*(){return xa(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,e))})}var Ma=class n extends Aa{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,t,"signInWithPassword",dL);case"emailLink":return hL(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,r,"signUpPassword",lL);case"emailLink":return fL(e,{idToken:t,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Mm(n,e){return v(this,null,function*(){return xa(n,"POST","/v1/accounts:signInWithIdp",Vr(n,e))})}function pL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gL(n){let e=Oo(ko(n)).link,t=e?Oo(ko(e)).deep_link_id:null,r=Oo(ko(n)).deep_link_id;return(r?Oo(ko(r)).link:null)||r||t||e||n}var rd=class n{constructor(e){var t,r,i,o,s,c;let u=Oo(ko(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,g=pL((i=u.mode)!==null&&i!==void 0?i:null);K(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=gL(e);try{return new n(t)}catch{return null}}};var Qb=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ma._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=rd.parseLink(r);return K(i,"argument-error"),Ma._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),id=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var jm=class extends id{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function mL(n,e){return v(this,null,function*(){return xa(n,"POST","/v1/accounts:signUp",Vr(n,e))})}var jo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Uo._fromIdTokenResponse(e,r,i),s=Ib(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Ib(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Ib(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var $m=class n extends Pt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Yb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$m._fromErrorAndOperation(n,o,e,r):o})}function yL(n,e,t=!1){return v(this,null,function*(){let r=yield Ta(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return jo._forOperation(n,"link",r)})}function _L(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(on(r.app))return Promise.reject(rr(r));let i="reauthenticate";try{let o=yield Ta(n,Yb(r,i,e,n),t);K(o.idToken,r,"internal-error");let s=Xm(o.idToken);K(s,r,"internal-error");let{sub:c}=s;return K(n.uid===c,r,"user-mismatch"),jo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sn(r,"user-mismatch"),o}})}function Zb(n,e,t=!1){return v(this,null,function*(){if(on(n.app))return Promise.reject(rr(n));let r="signIn",i=yield Yb(n,r,e),o=yield jo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function iy(n,e){return v(this,null,function*(){return Zb(Ai(n),e)})}function Jb(n){return v(this,null,function*(){let e=Ai(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function oy(n,e,t){return v(this,null,function*(){if(on(n.app))return Promise.reject(rr(n));let r=Ai(n),s=yield Um(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Jb(n),u}),c=yield jo._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function sy(n,e,t){return on(n.app)?Promise.reject(rr(n)):iy(Be(n),Qb.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Jb(n),r}))}function ay(n,e,t,r){return Be(n).onIdTokenChanged(e,t,r)}function cy(n,e,t){return Be(n).beforeAuthStateChanged(e,t)}function uy(n,e,t,r){return Be(n).onAuthStateChanged(e,t,r)}function ly(n){return Be(n).signOut()}var od="__sak";var sd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(od,"1"),this.storage.removeItem(od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var vL=1e3,IL=10,EL=(()=>{class n extends sd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);XV()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,IL):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield fr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield fr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield fr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Xb=EL;var wL=(()=>{class n extends sd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),dy=wL;function CL(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var DL=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>v(this,null,function*(){return h(r.origin,s)})),d=yield CL(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function eT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Hm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let d=eT("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let y=g;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Tn(){return window}function bL(n){Tn().location.href=n}function tT(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}function TL(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function SL(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function AL(){return tT()?self:null}var nT="firebaseLocalStorageDb",ML=1,ad="firebaseLocalStorage",rT="fbase_key",Si=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ld(n,e){return n.transaction([ad],e?"readwrite":"readonly").objectStore(ad)}function NL(){let n=indexedDB.deleteDatabase(nT);return new Si(n).toPromise()}function qm(){let n=indexedDB.open(nT,ML);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ad,{keyPath:rT})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(ad)?e(r):(r.close(),yield NL(),e(yield qm()))}))})}function Eb(n,e,t){return v(this,null,function*(){let r=ld(n,!0).put({[rT]:e,value:t});return new Si(r).toPromise()})}function xL(n,e){return v(this,null,function*(){let t=ld(n,!1).get(e),r=yield new Si(t).toPromise();return r===void 0?null:r.value})}function wb(n,e){let t=ld(n,!0).delete(e);return new Si(t).toPromise()}var RL=800,PL=3,OL=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield qm(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>PL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return tT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=DL._getInstance(AL()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield TL(),!this.activeServiceWorker)return;this.sender=new Hm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||SL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield qm();return yield Eb(t,od,"1"),yield wb(t,od),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>Eb(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>xL(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>wb(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=ld(o,!1).getAll();return new Si(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),RL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),iT=OL;var Xz=Wb("rcb"),e6=new Ti(3e4,6e4);function kL(n,e){return e?nr(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Na=class extends Aa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function FL(n){return Zb(n.auth,new Na(n),n.bypassAuthState)}function VL(n){let{auth:e,user:t}=n;return K(t,e,"internal-error"),_L(t,new Na(n),n.bypassAuthState)}function LL(n){return v(this,null,function*(){let{auth:e,user:t}=n;return K(t,e,"internal-error"),yL(t,new Na(n),n.bypassAuthState)})}var zm=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FL;case"linkViaPopup":case"linkViaRedirect":return LL;case"reauthViaPopup":case"reauthViaRedirect":return VL;default:Sn(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var t6=new Ti(2e3,1e4);var BL="pendingRedirect",Yl=new Map,Gm=class n extends zm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Yl.get(this.auth._key());if(!e){try{let r=(yield UL(this.resolver,this.auth))?yield fr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yl.set(this.auth._key(),e)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return fr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,fr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function UL(n,e){return v(this,null,function*(){let t=HL(e),r=$L(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function jL(n,e){Yl.set(n._key(),e)}function $L(n){return nr(n._redirectPersistence)}function HL(n){return Ql(BL,n.config.apiKey,n.name)}function qL(n,e,t=!1){return v(this,null,function*(){if(on(n.app))return Promise.reject(rr(n));let r=Ai(n),i=kL(r,e),s=yield new Gm(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var zL=10*60*1e3,Wm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!oT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(bi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cb(e))}saveEventToCache(e){this.cachedEventUids.add(Cb(e)),this.lastProcessedEventTime=Date.now()}};function Cb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function GL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oT(n);default:return!1}}function WL(t){return v(this,arguments,function*(n,e={}){return Lr(n,"GET","/v1/projects",e)})}var KL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QL=/^https?/;function YL(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield WL(n);for(let t of e)try{if(ZL(t))return}catch{}Sn(n,"unauthorized-domain")})}function ZL(n){let e=xm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!QL.test(t))return!1;if(KL.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var JL=new Ti(3e4,6e4);function Db(){let n=Tn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XL(n){return new Promise((e,t)=>{var r,i,o;function s(){Db(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Db(),t(bi(n,"network-request-failed"))},timeout:JL.get()})}if(!((i=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Tn().gapi)===null||o===void 0)&&o.load)s();else{let c=Wb("iframefcb");return Tn()[c]=()=>{gapi.load?s():t(bi(n,"network-request-failed"))},Gb(`${iL()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Zl=null,e})}var Zl=null;function e2(n){return Zl=Zl||XL(n),Zl}var t2=new Ti(5e3,15e3),n2="__/auth/iframe",r2="emulator/auth/iframe",i2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s2(n){let e=n.config;K(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Zm(e,r2):`https://${n.config.authDomain}/${n2}`,r={apiKey:e.apiKey,appName:n.name,v:Or},i=o2.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${va(r).slice(1)}`}function a2(n){return v(this,null,function*(){let e=yield e2(n),t=Tn().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:s2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i2,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=bi(n,"network-request-failed"),c=Tn().setTimeout(()=>{o(s)},t2.get());function u(){Tn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var c2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u2=500,l2=600,d2="_blank",h2="http://localhost",cd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function f2(n,e,t,r=u2,i=l2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},c2),{width:r.toString(),height:i.toString(),top:o,left:s}),d=Ze().toLowerCase();t&&(c=Bb(d)?d2:t),Vb(d)&&(e=e||h2,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,S])=>`${y}${m}=${S},`,"");if(JV(d)&&c!=="_self")return p2(e||"",c),new cd(null);let g=window.open(e||"",c,h);K(g,n,"popup-blocked");try{g.focus()}catch{}return new cd(g)}function p2(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var g2="__/auth/handler",m2="emulator/auth/handler",y2=encodeURIComponent("fac");function bb(n,e,t,r,i,o){return v(this,null,function*(){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Or,eventId:i};if(e instanceof id){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",QD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof jm){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield n._getAppCheckToken(),d=u?`#${y2}=${encodeURIComponent(u)}`:"";return`${_2(n)}?${va(c).slice(1)}${d}`})}function _2({config:n}){return n.emulator?Zm(n,m2):`https://${n.authDomain}/${g2}`}var Nm="webStorageSupport",Km=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dy,this._completeRedirectFn=qL,this._overrideRedirectResult=jL}_openPopup(e,t,r,i){return v(this,null,function*(){var o;Fr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield bb(e,t,r,xm(),i);return f2(e,s,eT())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield bb(e,t,r,xm(),i);return bL(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Fr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield a2(e),r=new Wm(e);return t.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nm,{type:Nm},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Nm];s!==void 0&&t(!!s),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qb()||Lb()||ty()}},sT=Km;var Tb="@firebase/auth",Sb="1.7.9";var Qm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function v2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I2(n){Pr(new zt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(n)},d=new Lm(r,i,o,u);return aL(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new zt("auth-internal",e=>{let t=Ai(e.getProvider("auth").getImmediate());return(r=>new Qm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),We(Tb,Sb,v2(n)),We(Tb,Sb,"esm2017")}var E2=5*60,w2=um("authIdTokenMaxAge")||E2,Ab=null,C2=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>w2)return;let i=t?.token;Ab!==i&&(Ab=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function hy(n=Fo()){let e=wa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ny(n,{popupRedirectResolver:sT,persistence:[iT,Xb,dy]}),r=um("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=C2(o.toString());cy(t,s,()=>s(t.currentUser)),ay(t,c=>s(c))}}let i=am("auth");return i&&ry(t,`http://${i}`),t}function D2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}nL({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=bi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",D2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I2("Browser");var aT="auth",Mi=class{constructor(e){return e}},Ra=class{constructor(){return Ca(aT)}};var fy=new G("angularfire2.auth-instances");function fB(n,e){let t=zl(aT,n,e);return t&&new Mi(t)}function pB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Mi(r)}}var gB={provide:Ra,deps:[[new Dt,fy]]},mB={provide:Mi,useFactory:fB,deps:[[new Dt,fy],er]};function cT(n,...e){return We("angularfire",Ci.full,"auth"),di([mB,gB,{provide:fy,useFactory:pB(n),multi:!0,deps:[Ne,Ct,Bo,Di,[new Dt,Lo],...e]}])}var uT=vt(oy,!0);var lT=vt(hy,!0);var dT=vt(uy,!0);var hT=vt(sy,!0);var fT=vt(ly,!0);var pT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gT={};var Br,py;(function(){var n;function e(C,_){function E(){}E.prototype=_.prototype,C.D=_.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(w,D,T){for(var I=Array(arguments.length-2),kn=2;kn<arguments.length;kn++)I[kn-2]=arguments[kn];return _.prototype[D].apply(w,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,E){E||(E=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(D=0;16>D;++D)w[D]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=C.g[0],E=C.g[1],D=C.g[2];var T=C.g[3],I=_+(T^E&(D^T))+w[0]+3614090360&4294967295;_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[1]+3905402710&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[2]+606105819&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[3]+3250441966&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(T^E&(D^T))+w[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[5]+1200080426&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[6]+2821735955&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[7]+4249261313&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(T^E&(D^T))+w[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[9]+2336552879&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[10]+4294925233&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[11]+2304563134&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(T^E&(D^T))+w[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=T+(D^_&(E^D))+w[13]+4254626195&4294967295,T=_+(I<<12&4294967295|I>>>20),I=D+(E^T&(_^E))+w[14]+2792965006&4294967295,D=T+(I<<17&4294967295|I>>>15),I=E+(_^D&(T^_))+w[15]+1236535329&4294967295,E=D+(I<<22&4294967295|I>>>10),I=_+(D^T&(E^D))+w[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[6]+3225465664&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[11]+643717713&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[0]+3921069994&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(D^T&(E^D))+w[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[10]+38016083&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[15]+3634488961&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[4]+3889429448&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(D^T&(E^D))+w[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[14]+3275163606&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[3]+4107603335&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[8]+1163531501&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(D^T&(E^D))+w[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=T+(E^D&(_^E))+w[2]+4243563512&4294967295,T=_+(I<<9&4294967295|I>>>23),I=D+(_^E&(T^_))+w[7]+1735328473&4294967295,D=T+(I<<14&4294967295|I>>>18),I=E+(T^_&(D^T))+w[12]+2368359562&4294967295,E=D+(I<<20&4294967295|I>>>12),I=_+(E^D^T)+w[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[8]+2272392833&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[11]+1839030562&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[14]+4259657740&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(E^D^T)+w[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[4]+1272893353&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[7]+4139469664&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[10]+3200236656&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(E^D^T)+w[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[0]+3936430074&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[3]+3572445317&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[6]+76029189&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(E^D^T)+w[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=T+(_^E^D)+w[12]+3873151461&4294967295,T=_+(I<<11&4294967295|I>>>21),I=D+(T^_^E)+w[15]+530742520&4294967295,D=T+(I<<16&4294967295|I>>>16),I=E+(D^T^_)+w[2]+3299628645&4294967295,E=D+(I<<23&4294967295|I>>>9),I=_+(D^(E|~T))+w[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[7]+1126891415&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[14]+2878612391&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[5]+4237533241&4294967295,E=D+(I<<21&4294967295|I>>>11),I=_+(D^(E|~T))+w[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[3]+2399980690&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[10]+4293915773&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[1]+2240044497&4294967295,E=D+(I<<21&4294967295|I>>>11),I=_+(D^(E|~T))+w[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[15]+4264355552&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[6]+2734768916&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[13]+1309151649&4294967295,E=D+(I<<21&4294967295|I>>>11),I=_+(D^(E|~T))+w[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=T+(E^(_|~D))+w[11]+3174756917&4294967295,T=_+(I<<10&4294967295|I>>>22),I=D+(_^(T|~E))+w[2]+718787259&4294967295,D=T+(I<<15&4294967295|I>>>17),I=E+(T^(D|~_))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+T&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var E=_-this.blockSize,w=this.B,D=this.h,T=0;T<_;){if(D==0)for(;T<=E;)i(this,C,T),T+=this.blockSize;if(typeof C=="string"){for(;T<_;)if(w[D++]=C.charCodeAt(T++),D==this.blockSize){i(this,w),D=0;break}}else for(;T<_;)if(w[D++]=C[T++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var E=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=E&255,E/=256;for(this.u(C),C=Array(16),_=E=0;4>_;++_)for(var w=0;32>w;w+=8)C[E++]=this.g[_]>>>w&255;return C};function o(C,_){var E=c;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=_(C)}function s(C,_){this.h=_;for(var E=[],w=!0,D=C.length-1;0<=D;D--){var T=C[D]|0;w&&T==_||(E[D]=T,w=!1)}this.g=E}var c={};function u(C){return-128<=C&&128>C?o(C,function(_){return new s([_|0],0>_?-1:0)}):new s([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return g;if(0>C)return R(d(-C));for(var _=[],E=1,w=0;C>=E;w++)_[w]=C/E|0,E*=4294967296;return new s(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(_,8)),w=g,D=0;D<C.length;D+=8){var T=Math.min(8,C.length-D),I=parseInt(C.substring(D,D+T),_);8>T?(T=d(Math.pow(_,T)),w=w.j(T).add(d(I))):(w=w.j(E),w=w.add(d(I)))}return w}var g=u(0),y=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var C=0,_=1,E=0;E<this.g.length;E++){var w=this.i(E);C+=(0<=w?w:4294967296+w)*_,_*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(P(this))return"-"+R(this).toString(C);for(var _=d(Math.pow(C,6)),E=this,w="";;){var D=ve(E,_).g;E=H(E,D.j(_));var T=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=D,S(E))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=H(this,C),P(C)?-1:S(C)?0:1};function R(C){for(var _=C.g.length,E=[],w=0;w<_;w++)E[w]=~C.g[w];return new s(E,~C.h).add(y)}n.abs=function(){return P(this)?R(this):this},n.add=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0,D=0;D<=_;D++){var T=w+(this.i(D)&65535)+(C.i(D)&65535),I=(T>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);w=I>>>16,T&=65535,I&=65535,E[D]=I<<16|T}return new s(E,E[E.length-1]&-2147483648?-1:0)};function H(C,_){return C.add(R(_))}n.j=function(C){if(S(this)||S(C))return g;if(P(this))return P(C)?R(this).j(R(C)):R(R(this).j(C));if(P(C))return R(this.j(R(C)));if(0>this.l(m)&&0>C.l(m))return d(this.m()*C.m());for(var _=this.g.length+C.g.length,E=[],w=0;w<2*_;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<C.g.length;D++){var T=this.i(w)>>>16,I=this.i(w)&65535,kn=C.i(D)>>>16,hs=C.i(D)&65535;E[2*w+2*D]+=I*hs,J(E,2*w+2*D),E[2*w+2*D+1]+=T*hs,J(E,2*w+2*D+1),E[2*w+2*D+1]+=I*kn,J(E,2*w+2*D+1),E[2*w+2*D+2]+=T*kn,J(E,2*w+2*D+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new s(E,0)};function J(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function se(C,_){this.g=C,this.h=_}function ve(C,_){if(S(_))throw Error("division by zero");if(S(C))return new se(g,g);if(P(C))return _=ve(R(C),_),new se(R(_.g),R(_.h));if(P(_))return _=ve(C,R(_)),new se(R(_.g),_.h);if(30<C.g.length){if(P(C)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=_;0>=w.l(C);)E=Qe(E),w=Qe(w);var D=Ie(E,1),T=Ie(w,1);for(w=Ie(w,2),E=Ie(E,2);!S(w);){var I=T.add(w);0>=I.l(C)&&(D=D.add(E),T=I),w=Ie(w,1),E=Ie(E,1)}return _=H(C,D.j(_)),new se(D,_)}for(D=g;0<=C.l(_);){for(E=Math.max(1,Math.floor(C.m()/_.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=d(E),I=T.j(_);P(I)||0<I.l(C);)E-=w,T=d(E),I=T.j(_);S(T)&&(T=y),D=D.add(T),C=H(C,I)}return new se(D,C)}n.A=function(C){return ve(this,C).h},n.and=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)&C.i(w);return new s(E,this.h&C.h)},n.or=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)|C.i(w);return new s(E,this.h|C.h)},n.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)^C.i(w);return new s(E,this.h^C.h)};function Qe(C){for(var _=C.g.length+1,E=[],w=0;w<_;w++)E[w]=C.i(w)<<1|C.i(w-1)>>>31;return new s(E,C.h)}function Ie(C,_){var E=_>>5;_%=32;for(var w=C.g.length-E,D=[],T=0;T<w;T++)D[T]=0<_?C.i(T+E)>>>_|C.i(T+E+1)<<32-_:C.i(T+E);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,py=gT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Br=gT.Integer=s}).apply(typeof pT<"u"?pT:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var gy,yB,$o,my,Pa,hd,yy,_y,vy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,f){return a==Array.prototype||a==Object.prototype||(a[l]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var l=0;l<a.length;++l){var f=a[l];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var f=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var b=a[p];if(!(b in f))break e;f=f[b]}a=a[a.length-1],p=f[a],l=l(p),l!=p&&l!=null&&e(f,a,{configurable:!0,writable:!0,value:l})}}function o(a,l){a instanceof String&&(a+="");var f=0,p=!1,b={next:function(){if(!p&&f<a.length){var A=f++;return{value:l(A,a[A]),done:!1}}return p=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(l,f){return f})}});var s=s||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function h(a,l,f){return a.call.apply(a.bind,arguments)}function g(a,l,f){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,p),a.apply(l,b)}}return function(){return a.apply(l,arguments)}}function y(a,l,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,y.apply(null,arguments)}function m(a,l){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function S(a,l){function f(){}f.prototype=l.prototype,a.aa=l.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(p,b,A){for(var V=Array(arguments.length-2),De=2;De<arguments.length;De++)V[De-2]=arguments[De];return l.prototype[b].apply(p,V)}}function P(a){let l=a.length;if(0<l){let f=Array(l);for(let p=0;p<l;p++)f[p]=a[p];return f}return[]}function R(a,l){for(let f=1;f<arguments.length;f++){let p=arguments[f];if(u(p)){let b=a.length||0,A=p.length||0;a.length=b+A;for(let V=0;V<A;V++)a[b+V]=p[V]}else a.push(p)}}class H{constructor(l,f){this.i=l,this.j=f,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function J(a){return/^[\s\xa0]*$/.test(a)}function se(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ve(a){return ve[" "](a),a}ve[" "]=function(){};var Qe=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Ie(a,l,f){for(let p in a)l.call(f,a[p],p,a)}function C(a,l){for(let f in a)l.call(void 0,a[f],f,a)}function _(a){let l={};for(let f in a)l[f]=a[f];return l}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let f,p;for(let b=1;b<arguments.length;b++){p=arguments[b];for(f in p)a[f]=p[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(p,f)&&(a[f]=p[f])}}function D(a){var l=1;a=a.split(":");let f=[];for(;0<l&&a.length;)f.push(a.shift()),l--;return a.length&&f.push(a.join(":")),f}function T(a){c.setTimeout(()=>{throw a},0)}function I(){var a=th;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class kn{constructor(){this.h=this.g=null}add(l,f){let p=hs.get();p.set(l,f),this.h?this.h.next=p:this.g=p,this.h=p}}var hs=new H(()=>new dA,a=>a.reset());class dA{constructor(){this.next=this.g=this.h=null}set(l,f){this.h=l,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let fs,ps=!1,th=new kn,Rv=()=>{let a=c.Promise.resolve(void 0);fs=()=>{a.then(hA)}};var hA=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){T(f)}var l=hs;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}ps=!1};function ur(){this.s=this.s,this.C=this.C}ur.prototype.s=!1,ur.prototype.ma=function(){this.s||(this.s=!0,this.N())},ur.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var fA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,l),c.removeEventListener("test",f,l)}catch{}return a}();function gs(a,l){if(tt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Qe){e:{try{ve(l.nodeName);var b=!0;break e}catch{}b=!1}b||(l=null)}}else f=="mouseover"?l=a.fromElement:f=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:pA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&gs.aa.h.call(this)}}S(gs,tt);var pA={2:"touch",3:"pen",4:"mouse"};gs.prototype.h=function(){gs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ms="closure_listenable_"+(1e6*Math.random()|0),gA=0;function mA(a,l,f,p,b){this.listener=a,this.proxy=null,this.src=l,this.type=f,this.capture=!!p,this.ha=b,this.key=++gA,this.da=this.fa=!1}function oc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function sc(a){this.src=a,this.g={},this.h=0}sc.prototype.add=function(a,l,f,p,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var V=rh(a,l,p,b);return-1<V?(l=a[V],f||(l.fa=!1)):(l=new mA(l,this.src,A,!!p,b),l.fa=f,a.push(l)),l};function nh(a,l){var f=l.type;if(f in a.g){var p=a.g[f],b=Array.prototype.indexOf.call(p,l,void 0),A;(A=0<=b)&&Array.prototype.splice.call(p,b,1),A&&(oc(l),a.g[f].length==0&&(delete a.g[f],a.h--))}}function rh(a,l,f,p){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==l&&A.capture==!!f&&A.ha==p)return b}return-1}var ih="closure_lm_"+(1e6*Math.random()|0),oh={};function Pv(a,l,f,p,b){if(p&&p.once)return kv(a,l,f,p,b);if(Array.isArray(l)){for(var A=0;A<l.length;A++)Pv(a,l[A],f,p,b);return null}return f=uh(f),a&&a[ms]?a.K(l,f,d(p)?!!p.capture:!!p,b):Ov(a,l,f,!1,p,b)}function Ov(a,l,f,p,b,A){if(!l)throw Error("Invalid event type");var V=d(b)?!!b.capture:!!b,De=ah(a);if(De||(a[ih]=De=new sc(a)),f=De.add(l,f,p,V,A),f.proxy)return f;if(p=yA(),f.proxy=p,p.src=a,p.listener=f,a.addEventListener)fA||(b=V),b===void 0&&(b=!1),a.addEventListener(l.toString(),p,b);else if(a.attachEvent)a.attachEvent(Vv(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function yA(){function a(f){return l.call(a.src,a.listener,f)}let l=_A;return a}function kv(a,l,f,p,b){if(Array.isArray(l)){for(var A=0;A<l.length;A++)kv(a,l[A],f,p,b);return null}return f=uh(f),a&&a[ms]?a.L(l,f,d(p)?!!p.capture:!!p,b):Ov(a,l,f,!0,p,b)}function Fv(a,l,f,p,b){if(Array.isArray(l))for(var A=0;A<l.length;A++)Fv(a,l[A],f,p,b);else p=d(p)?!!p.capture:!!p,f=uh(f),a&&a[ms]?(a=a.i,l=String(l).toString(),l in a.g&&(A=a.g[l],f=rh(A,f,p,b),-1<f&&(oc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[l],a.h--)))):a&&(a=ah(a))&&(l=a.g[l.toString()],a=-1,l&&(a=rh(l,f,p,b)),(f=-1<a?l[a]:null)&&sh(f))}function sh(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[ms])nh(l.i,a);else{var f=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(f,p,a.capture):l.detachEvent?l.detachEvent(Vv(f),p):l.addListener&&l.removeListener&&l.removeListener(p),(f=ah(l))?(nh(f,a),f.h==0&&(f.src=null,l[ih]=null)):oc(a)}}}function Vv(a){return a in oh?oh[a]:oh[a]="on"+a}function _A(a,l){if(a.da)a=!0;else{l=new gs(l,this);var f=a.listener,p=a.ha||a.src;a.fa&&sh(a),a=f.call(p,l)}return a}function ah(a){return a=a[ih],a instanceof sc?a:null}var ch="__closure_events_fn_"+(1e9*Math.random()>>>0);function uh(a){return typeof a=="function"?a:(a[ch]||(a[ch]=function(l){return a.handleEvent(l)}),a[ch])}function nt(){ur.call(this),this.i=new sc(this),this.M=this,this.F=null}S(nt,ur),nt.prototype[ms]=!0,nt.prototype.removeEventListener=function(a,l,f,p){Fv(this,a,l,f,p)};function ht(a,l){var f,p=a.F;if(p)for(f=[];p;p=p.F)f.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new tt(l,a);else if(l instanceof tt)l.target=l.target||a;else{var b=l;l=new tt(p,a),w(l,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var V=l.g=f[A];b=ac(V,p,!0,l)&&b}if(V=l.g=a,b=ac(V,p,!0,l)&&b,b=ac(V,p,!1,l)&&b,f)for(A=0;A<f.length;A++)V=l.g=f[A],b=ac(V,p,!1,l)&&b}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var f=a.g[l],p=0;p<f.length;p++)oc(f[p]);delete a.g[l],a.h--}}this.F=null},nt.prototype.K=function(a,l,f,p){return this.i.add(String(a),l,!1,f,p)},nt.prototype.L=function(a,l,f,p){return this.i.add(String(a),l,!0,f,p)};function ac(a,l,f,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var b=!0,A=0;A<l.length;++A){var V=l[A];if(V&&!V.da&&V.capture==f){var De=V.listener,Xe=V.ha||V.src;V.fa&&nh(a.i,V),b=De.call(Xe,p)!==!1&&b}}return b&&!p.defaultPrevented}function Lv(a,l,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function Bv(a){a.g=Lv(()=>{a.g=null,a.i&&(a.i=!1,Bv(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class vA extends ur{constructor(l,f){super(),this.m=l,this.l=f,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Bv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(a){ur.call(this),this.h=a,this.g={}}S(ys,ur);var Uv=[];function jv(a){Ie(a.g,function(l,f){this.g.hasOwnProperty(f)&&sh(l)},a),a.g={}}ys.prototype.N=function(){ys.aa.N.call(this),jv(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lh=c.JSON.stringify,IA=c.JSON.parse,EA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function dh(){}dh.prototype.h=null;function $v(a){return a.h||(a.h=a.i())}function Hv(){}var _s={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hh(){tt.call(this,"d")}S(hh,tt);function fh(){tt.call(this,"c")}S(fh,tt);var qr={},qv=null;function cc(){return qv=qv||new nt}qr.La="serverreachability";function zv(a){tt.call(this,qr.La,a)}S(zv,tt);function vs(a){let l=cc();ht(l,new zv(l))}qr.STAT_EVENT="statevent";function Gv(a,l){tt.call(this,qr.STAT_EVENT,a),this.stat=l}S(Gv,tt);function ft(a){let l=cc();ht(l,new Gv(l,a))}qr.Ma="timingevent";function Wv(a,l){tt.call(this,qr.Ma,a),this.size=l}S(Wv,tt);function Is(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function wA(a,l,f,p,b,A){a.info(function(){if(a.g)if(A)for(var V="",De=A.split("&"),Xe=0;Xe<De.length;Xe++){var me=De[Xe].split("=");if(1<me.length){var rt=me[0];me=me[1];var it=rt.split("_");V=2<=it.length&&it[1]=="type"?V+(rt+"="+me+"&"):V+(rt+"=redacted&")}}else V=null;else V=A;return"XMLHTTP REQ ("+p+") [attempt "+b+"]: "+l+`
`+f+`
`+V})}function CA(a,l,f,p,b,A,V){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+b+"]: "+l+`
`+f+`
`+A+" "+V})}function $i(a,l,f,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+bA(a,f)+(p?" "+p:"")})}function DA(a,l){a.info(function(){return"TIMEOUT: "+l})}Es.prototype.info=function(){};function bA(a,l){if(!a.g)return l;if(!l)return null;try{var f=JSON.parse(l);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var p=f[a];if(!(2>p.length)){var b=p[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var V=1;V<b.length;V++)b[V]=""}}}}return lh(f)}catch{return l}}var uc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ph;function lc(){}S(lc,dh),lc.prototype.g=function(){return new XMLHttpRequest},lc.prototype.i=function(){return{}},ph=new lc;function lr(a,l,f,p){this.j=a,this.i=l,this.l=f,this.R=p||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qv}function Qv(){this.i=null,this.g="",this.h=!1}var Yv={},gh={};function mh(a,l,f){a.L=1,a.v=pc(Fn(l)),a.m=f,a.P=!0,Zv(a,null)}function Zv(a,l){a.F=Date.now(),dc(a),a.A=Fn(a.v);var f=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),dI(f.i,"t",p),a.C=0,f=a.j.J,a.h=new Qv,a.g=MI(a.j,f?l:null,!a.m),0<a.O&&(a.M=new vA(y(a.Y,a,a.g),a.O)),l=a.U,f=a.g,p=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Uv[0]=b.toString()),b=Uv);for(var A=0;A<b.length;A++){var V=Pv(f,b[A],p||l.handleEvent,!1,l.h||l);if(!V)break;l.g[V.key]=V}l=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),vs(),wA(a.i,a.u,a.A,a.l,a.R,a.m)}lr.prototype.ca=function(a){a=a.target;let l=this.M;l&&Vn(a)==3?l.j():this.Y(a)},lr.prototype.Y=function(a){try{if(a==this.g)e:{let it=Vn(this.g);var l=this.g.Ba();let zi=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||_I(this.g)))){this.J||it!=4||l==7||(l==8||0>=zi?vs(3):vs(2)),yh(this);var f=this.g.Z();this.X=f;t:if(Jv(this)){var p=_I(this.g);a="";var b=p.length,A=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),ws(this);var V="";break t}this.h.i=new c.TextDecoder}for(l=0;l<b;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(A&&l==b-1)});p.length=0,this.h.g+=a,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,CA(this.i,this.u,this.A,this.l,this.R,it,f),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Xe=this.g;if((De=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(De)){var me=De;break t}}me=null}if(f=me)$i(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_h(this,f);else{this.o=!1,this.s=3,ft(12),zr(this),ws(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<V.length;)if(Kt=TA(this,V),Kt==gh){it==4&&(this.s=4,ft(14),f=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Yv){this.s=4,ft(15),$i(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else $i(this.i,this.l,Kt,null),_h(this,Kt);if(Jv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||V.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)$i(this.i,this.l,V,"[Invalid Chunked Response]"),zr(this),ws(this);else if(0<V.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Dh(rt),rt.M=!0,ft(11))}}else $i(this.i,this.l,V,null),_h(this,V);it==4&&zr(this),this.o&&!this.J&&(it==4?bI(this.j,this):(this.o=!1,dc(this)))}else HA(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),zr(this),ws(this)}}}catch{}finally{}};function Jv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function TA(a,l){var f=a.C,p=l.indexOf(`
`,f);return p==-1?gh:(f=Number(l.substring(f,p)),isNaN(f)?Yv:(p+=1,p+f>l.length?gh:(l=l.slice(p,p+f),a.C=p+f,l)))}lr.prototype.cancel=function(){this.J=!0,zr(this)};function dc(a){a.S=Date.now()+a.I,Xv(a,a.I)}function Xv(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Is(y(a.ba,a),l)}function yh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}lr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(DA(this.i,this.A),this.L!=2&&(vs(),ft(17)),zr(this),this.s=2,ws(this)):Xv(this,this.S-a)};function ws(a){a.j.G==0||a.J||bI(a.j,a)}function zr(a){yh(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,jv(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function _h(a,l){try{var f=a.j;if(f.G!=0&&(f.g==a||vh(f.h,a))){if(!a.K&&vh(f.h,a)&&f.G==3){try{var p=f.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var b=p;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)vc(f),yc(f);else break e;Ch(f),ft(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Is(y(f.Za,f),6e3));if(1>=nI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Wr(f,11)}else if((a.K||f.g==a)&&vc(f),!J(l))for(b=f.Da.g.parse(l),l=0;l<b.length;l++){let me=b[l];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let rt=me[3];rt!=null&&(f.la=rt,f.j.info("VER="+f.la));let it=me[4];it!=null&&(f.Aa=it,f.j.info("SVER="+f.Aa));let zi=me[5];zi!=null&&typeof zi=="number"&&0<zi&&(p=1.5*zi,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;let Kt=a.g;if(Kt){let Ec=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ec){var A=p.h;A.g||Ec.indexOf("spdy")==-1&&Ec.indexOf("quic")==-1&&Ec.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Ih(A,A.h),A.h=null))}if(p.D){let bh=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;bh&&(p.ya=bh,Ae(p.I,p.D,bh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var V=a;if(p.qa=AI(p,p.J?p.ia:null,p.W),V.K){rI(p.h,V);var De=V,Xe=p.L;Xe&&(De.I=Xe),De.B&&(yh(De),dc(De)),p.g=V}else CI(p);0<f.i.length&&_c(f)}else me[0]!="stop"&&me[0]!="close"||Wr(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Wr(f,7):wh(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}vs(4)}catch{}}var SA=class{constructor(a,l){this.g=a,this.map=l}};function eI(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tI(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function nI(a){return a.h?1:a.g?a.g.size:0}function vh(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Ih(a,l){a.g?a.g.add(l):a.h=l}function rI(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}eI.prototype.cancel=function(){if(this.i=iI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function iI(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let f of a.g.values())l=l.concat(f.D);return l}return P(a.i)}function AA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],f=a.length,p=0;p<f;p++)l.push(a[p]);return l}l=[],f=0;for(p in a)l[f++]=a[p];return l}function MA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var f=0;f<a;f++)l.push(f);return l}l=[],f=0;for(let p in a)l[f++]=p;return l}}}function oI(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var f=MA(a),p=AA(a),b=p.length,A=0;A<b;A++)l.call(void 0,p[A],f&&f[A],a)}var sI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NA(a,l){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var p=a[f].indexOf("="),b=null;if(0<=p){var A=a[f].substring(0,p);b=a[f].substring(p+1)}else A=a[f];l(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Gr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gr){this.h=a.h,hc(this,a.j),this.o=a.o,this.g=a.g,fc(this,a.s),this.l=a.l;var l=a.i,f=new bs;f.i=l.i,l.g&&(f.g=new Map(l.g),f.h=l.h),aI(this,f),this.m=a.m}else a&&(l=String(a).match(sI))?(this.h=!1,hc(this,l[1]||"",!0),this.o=Cs(l[2]||""),this.g=Cs(l[3]||"",!0),fc(this,l[4]),this.l=Cs(l[5]||"",!0),aI(this,l[6]||"",!0),this.m=Cs(l[7]||"")):(this.h=!1,this.i=new bs(null,this.h))}Gr.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Ds(l,cI,!0),":");var f=this.g;return(f||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ds(l,cI,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ds(f,f.charAt(0)=="/"?PA:RA,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ds(f,kA)),a.join("")};function Fn(a){return new Gr(a)}function hc(a,l,f){a.j=f?Cs(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function fc(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function aI(a,l,f){l instanceof bs?(a.i=l,FA(a.i,a.h)):(f||(l=Ds(l,OA)),a.i=new bs(l,a.h))}function Ae(a,l,f){a.i.set(l,f)}function pc(a){return Ae(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Cs(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ds(a,l,f){return typeof a=="string"?(a=encodeURI(a).replace(l,xA),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function xA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cI=/[#\/\?@]/g,RA=/[#\?:]/g,PA=/[#\?]/g,OA=/[#\?@]/g,kA=/#/g;function bs(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function dr(a){a.g||(a.g=new Map,a.h=0,a.i&&NA(a.i,function(l,f){a.add(decodeURIComponent(l.replace(/\+/g," ")),f)}))}n=bs.prototype,n.add=function(a,l){dr(this),this.i=null,a=Hi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(l),this.h+=1,this};function uI(a,l){dr(a),l=Hi(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function lI(a,l){return dr(a),l=Hi(a,l),a.g.has(l)}n.forEach=function(a,l){dr(this),this.g.forEach(function(f,p){f.forEach(function(b){a.call(l,b,p,this)},this)},this)},n.na=function(){dr(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),f=[];for(let p=0;p<l.length;p++){let b=a[p];for(let A=0;A<b.length;A++)f.push(l[p])}return f},n.V=function(a){dr(this);let l=[];if(typeof a=="string")lI(this,a)&&(l=l.concat(this.g.get(Hi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)l=l.concat(a[f])}return l},n.set=function(a,l){return dr(this),this.i=null,a=Hi(this,a),lI(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function dI(a,l,f){uI(a,l),0<f.length&&(a.i=null,a.g.set(Hi(a,l),P(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var f=0;f<l.length;f++){var p=l[f];let A=encodeURIComponent(String(p)),V=this.V(p);for(p=0;p<V.length;p++){var b=A;V[p]!==""&&(b+="="+encodeURIComponent(String(V[p]))),a.push(b)}}return this.i=a.join("&")};function Hi(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function FA(a,l){l&&!a.j&&(dr(a),a.i=null,a.g.forEach(function(f,p){var b=p.toLowerCase();p!=b&&(uI(this,p),dI(this,b,f))},a)),a.j=l}function VA(a,l){let f=new Es;if(c.Image){let p=new Image;p.onload=m(hr,f,"TestLoadImage: loaded",!0,l,p),p.onerror=m(hr,f,"TestLoadImage: error",!1,l,p),p.onabort=m(hr,f,"TestLoadImage: abort",!1,l,p),p.ontimeout=m(hr,f,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function LA(a,l){let f=new Es,p=new AbortController,b=setTimeout(()=>{p.abort(),hr(f,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(A=>{clearTimeout(b),A.ok?hr(f,"TestPingServer: ok",!0,l):hr(f,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(b),hr(f,"TestPingServer: error",!1,l)})}function hr(a,l,f,p,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),p(f)}catch{}}function BA(){this.g=new EA}function UA(a,l,f){let p=f||"";try{oI(a,function(b,A){let V=b;d(b)&&(V=lh(b)),l.push(p+A+"="+encodeURIComponent(V))})}catch(b){throw l.push(p+"type="+encodeURIComponent("_badmap")),b}}function Ts(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Ts,dh),Ts.prototype.g=function(){return new gc(this.l,this.j)},Ts.prototype.i=function(a){return function(){return a}}({});function gc(a,l){nt.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(gc,nt),n=gc.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,As(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hI(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function hI(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Ss(this):As(this),this.readyState==3&&hI(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Ss(this))},n.Qa=function(a){this.g&&(this.response=a,Ss(this))},n.ga=function(){this.g&&Ss(this)};function Ss(a){a.readyState=4,a.l=null,a.j=null,a.v=null,As(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var f=l.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=l.next();return a.join(`\r
`)};function As(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fI(a){let l="";return Ie(a,function(f,p){l+=p,l+=":",l+=f,l+=`\r
`}),l}function Eh(a,l,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=fI(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ae(a,l,f))}function Pe(a){nt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,nt);var jA=/^https?$/i,$A=["POST","PUT"];n=Pe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ph.g(),this.v=this.o?$v(this.o):$v(ph),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(A){pI(this,A);return}if(a=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var b in p)f.set(b,p[b]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let A of p.keys())f.set(A,p.get(A));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call($A,l,void 0))||p||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,V]of f)this.g.setRequestHeader(A,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yI(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){pI(this,A)}};function pI(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,gI(a),mc(a)}function gI(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ht(this,"complete"),ht(this,"abort"),mc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mc(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mI(this):this.bb())},n.bb=function(){mI(this)};function mI(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Vn(a)!=4||a.Z()!=2)){if(a.u&&Vn(a)==4)Lv(a.Ea,0,a);else if(ht(a,"readystatechange"),Vn(a)==4){a.h=!1;try{let V=a.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var f;if(!(f=l)){var p;if(p=V===0){var b=String(a.D).match(sI)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),p=!jA.test(b?b.toLowerCase():"")}f=p}if(f)ht(a,"complete"),ht(a,"success");else{a.m=6;try{var A=2<Vn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",gI(a)}}finally{mc(a)}}}}function mc(a,l){if(a.g){yI(a);let f=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||ht(a,"ready");try{f.onreadystatechange=p}catch{}}}function yI(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Vn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),IA(l)}};function _I(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function HA(a){let l={};a=(a.g&&2<=Vn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(J(a[p]))continue;var f=D(a[p]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=l[b]||[];l[b]=A,A.push(f)}C(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(a,l,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||l}function vI(a){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,a),this.cb=Ms("retryDelaySeedMs",1e4,a),this.Wa=Ms("forwardChannelMaxRetries",2,a),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new eI(a&&a.concurrentRequestLimit),this.Da=new BA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vI.prototype,n.la=8,n.G=1,n.connect=function(a,l,f,p){ft(0),this.W=a,this.H=l||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=AI(this,null,this.W),_c(this)};function wh(a){if(II(a),a.G==3){var l=a.U++,f=Fn(a.I);if(Ae(f,"SID",a.K),Ae(f,"RID",l),Ae(f,"TYPE","terminate"),Ns(a,f),l=new lr(a,a.j,l),l.L=2,l.v=pc(Fn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=l.v,f=!0),f||(l.g=MI(l.j,null),l.g.ea(l.v)),l.F=Date.now(),dc(l)}SI(a)}function yc(a){a.g&&(Dh(a),a.g.cancel(),a.g=null)}function II(a){yc(a),a.u&&(c.clearTimeout(a.u),a.u=null),vc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function _c(a){if(!tI(a.h)&&!a.s){a.s=!0;var l=a.Ga;fs||Rv(),ps||(fs(),ps=!0),th.add(l,a),a.B=0}}function qA(a,l){return nI(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Is(y(a.Ga,a,l),TI(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new lr(this,this.j,a),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var l=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=f;break e}if(l===4096||f===this.i.length-1){l=f+1;break e}}l=1e3}else l=1e3;l=wI(this,b,l),f=Fn(this.I),Ae(f,"RID",a),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Ns(this,f),A&&(this.O?l="headers="+encodeURIComponent(String(fI(A)))+"&"+l:this.m&&Eh(f,this.m,A)),Ih(this.h,b),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",l),Ae(f,"SID","null"),b.T=!0,mh(b,f,null)):mh(b,f,l),this.G=2}}else this.G==3&&(a?EI(this,a):this.i.length==0||tI(this.h)||EI(this))};function EI(a,l){var f;l?f=l.l:f=a.U++;let p=Fn(a.I);Ae(p,"SID",a.K),Ae(p,"RID",f),Ae(p,"AID",a.T),Ns(a,p),a.m&&a.o&&Eh(p,a.m,a.o),f=new lr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),l&&(a.i=l.D.concat(a.i)),l=wI(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ih(a.h,f),mh(f,p,l)}function Ns(a,l){a.H&&Ie(a.H,function(f,p){Ae(l,p,f)}),a.l&&oI({},function(f,p){Ae(l,p,f)})}function wI(a,l,f){f=Math.min(a.i.length,f);var p=a.l?y(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){let V=["count="+f];A==-1?0<f?(A=b[0].g,V.push("ofs="+A)):A=0:V.push("ofs="+A);let De=!0;for(let Xe=0;Xe<f;Xe++){let me=b[Xe].g,rt=b[Xe].map;if(me-=A,0>me)A=Math.max(0,b[Xe].g-100),De=!1;else try{UA(rt,V,"req"+me+"_")}catch{p&&p(rt)}}if(De){p=V.join("&");break e}}}return a=a.i.splice(0,f),l.D=a,p}function CI(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;fs||Rv(),ps||(fs(),ps=!0),th.add(l,a),a.v=0}}function Ch(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Is(y(a.Fa,a),TI(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,DI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Is(y(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),yc(this),DI(this))};function Dh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function DI(a){a.g=new lr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Fn(a.qa);Ae(l,"RID","rpc"),Ae(l,"SID",a.K),Ae(l,"AID",a.T),Ae(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ae(l,"TO",a.ja),Ae(l,"TYPE","xmlhttp"),Ns(a,l),a.m&&a.o&&Eh(l,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=pc(Fn(l)),f.m=null,f.P=!0,Zv(f,a)}n.Za=function(){this.C!=null&&(this.C=null,yc(this),Ch(this),ft(19))};function vc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function bI(a,l){var f=null;if(a.g==l){vc(a),Dh(a),a.g=null;var p=2}else if(vh(a.h,l))f=l.D,rI(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){f=l.m?l.m.length:0,l=Date.now()-l.F;var b=a.B;p=cc(),ht(p,new Wv(p,f)),_c(a)}else CI(a);else if(b=l.s,b==3||b==0&&0<l.X||!(p==1&&qA(a,l)||p==2&&Ch(a)))switch(f&&0<f.length&&(l=a.h,l.i=l.i.concat(f)),b){case 1:Wr(a,5);break;case 4:Wr(a,10);break;case 3:Wr(a,6);break;default:Wr(a,2)}}}function TI(a,l){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*l}function Wr(a,l){if(a.j.info("Error code "+l),l==2){var f=y(a.fb,a),p=a.Xa;let b=!p;p=new Gr(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||hc(p,"https"),pc(p),b?VA(p.toString(),f):LA(p.toString(),f)}else ft(2);a.G=0,a.l&&a.l.sa(l),SI(a),II(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function SI(a){if(a.G=0,a.ka=[],a.l){let l=iI(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function AI(a,l,f){var p=f instanceof Gr?Fn(f):new Gr(f);if(p.g!="")l&&(p.g=l+"."+p.g),fc(p,p.s);else{var b=c.location;p=b.protocol,l=l?l+"."+b.hostname:b.hostname,b=+b.port;var A=new Gr(null);p&&hc(A,p),l&&(A.g=l),b&&fc(A,b),f&&(A.l=f),p=A}return f=a.D,l=a.ya,f&&l&&Ae(p,f,l),Ae(p,"VER",a.la),Ns(a,p),p}function MI(a,l,f){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Pe(new Ts({eb:f})):new Pe(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function NI(){}n=NI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ic(){}Ic.prototype.g=function(a,l){return new At(a,l)};function At(a,l){nt.call(this),this.g=new vI(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!J(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!J(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new qi(this)}S(At,nt),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){wh(this.g)},At.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=lh(a),a=f);l.i.push(new SA(l.Ya++,a)),l.G==3&&_c(l)},At.prototype.N=function(){this.g.l=null,delete this.j,wh(this.g),delete this.g,At.aa.N.call(this)};function xI(a){hh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let f in l){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(xI,hh);function RI(){fh.call(this),this.status=1}S(RI,fh);function qi(a){this.g=a}S(qi,NI),qi.prototype.ua=function(){ht(this.g,"a")},qi.prototype.ta=function(a){ht(this.g,new xI(a))},qi.prototype.sa=function(a){ht(this.g,new RI)},qi.prototype.ra=function(){ht(this.g,"b")},Ic.prototype.createWebChannel=Ic.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,vy=ir.createWebChannelTransport=function(){return new Ic},_y=ir.getStatEventTarget=function(){return cc()},yy=ir.Event=qr,hd=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uc.NO_ERROR=0,uc.TIMEOUT=8,uc.HTTP_ERROR=6,Pa=ir.ErrorCode=uc,Kv.COMPLETE="complete",my=ir.EventType=Kv,Hv.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",nt.prototype.listen=nt.prototype.K,$o=ir.WebChannel=Hv,yB=ir.FetchXmlHttpFactory=Ts,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,gy=ir.XhrIo=Pe}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});var mT="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var ls="10.14.0";var Ri=new xr("@firebase/firestore");function Oa(){return Ri.logLevel}function U(n,...e){if(Ri.logLevel<=ce.DEBUG){let t=e.map(uv);Ri.debug(`Firestore (${ls}): ${n}`,...t)}}function sr(n,...e){if(Ri.logLevel<=ce.ERROR){let t=e.map(uv);Ri.error(`Firestore (${ls}): ${n}`,...t)}}function Yo(n,...e){if(Ri.logLevel<=ce.WARN){let t=e.map(uv);Ri.warn(`Firestore (${ls}): ${n}`,...t)}}function uv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${ls}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function we(n,e){n||Q()}function Y(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Pt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},by=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},Ty=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Sy=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Mn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new yd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Je(e)}},Ay=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},My=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ay(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ny=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){we(this.o===void 0);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(we(typeof t.token=="string"),this.R=t.token,new Ny(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _B(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var _d=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_B(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function _e(n,e){return n<e?-1:n>e?1:0}function Zo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ke=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ke(0,0))}static max(){return new n(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Re=class n extends vd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kt=class n extends vd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};var Ry=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ry.UNKNOWN_ID=-1;function IB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ke(t+1,0):new Ke(t,r));return new Pi(i,q.empty(),e)}function EB(n){return new Pi(n.readTime,n.key,-1)}var Pi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),q.empty(),-1)}static max(){return new n(X.max(),q.empty(),-1)}};function wB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}var CB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Py=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ec(n){return v(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==CB)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let d=u;t(e[d]).next(h=>{s[d]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function DB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tc(n){return n.name==="IndexedDbTransactionError"}var YT=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Gd(n){return n==null}function Ua(n){return n===0&&1/n==-1/0}function bB(n){return typeof n=="number"&&Number.isInteger(n)&&!Ua(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var TB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z6=[...TB,"documentOverlays"],SB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AB=SB,MB=[...AB,"indexConfiguration","indexState","indexEntries"];var J6=[...MB,"globals"];function yT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ve=class n{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Go(this.root,e,this.comparator,!1)}getReverseIterator(){return new Go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Go(this.root,e,this.comparator,!0)}},Go=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lt=class n{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Id(this.data.getIterator())}getIteratorFrom(e){return new Id(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Id=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gt=class n{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new lt(kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ed=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ed("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var NB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(we(!!n),typeof n=="string"){let e=0,t=NB.exec(n);if(we(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(n.seconds),nanos:xe(n.nanos)}}function xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jr(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}function lv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function dv(n){let e=n.mapValue.fields.__previous_value__;return lv(e)?dv(e):e}function ja(n){let e=ar(n.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var Oy=class{constructor(e,t,r,i,o,s,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},wd=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lv(n)?4:XT(n)?9007199254740991:JT(n)?10:11:Q()}function Pn(n,e){if(n===e)return!0;let t=Oi(n);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ja(n).isEqual(ja(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),c=ar(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return jr(i.bytesValue).isEqual(jr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return xe(i.geoPointValue.latitude)===xe(o.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return xe(i.integerValue)===xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=xe(i.doubleValue),c=xe(o.doubleValue);return s===c?Ua(s)===Ua(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Zo(n.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(yT(s)!==yT(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Pn(s[u],c[u])))return!1;return!0}(n,e);default:return Q()}}function $a(n,e){return(n.values||[]).find(t=>Pn(t,e))!==void 0}function Jo(n,e){if(n===e)return 0;let t=Oi(n),r=Oi(e);if(t!==r)return _e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=xe(o.integerValue||o.doubleValue),u=xe(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return _T(n.timestampValue,e.timestampValue);case 4:return _T(ja(n),ja(e));case 5:return _e(n.stringValue,e.stringValue);case 6:return function(o,s){let c=jr(o),u=jr(s);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let d=0;d<c.length&&d<u.length;d++){let h=_e(c[d],u[d]);if(h!==0)return h}return _e(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=_e(xe(o.latitude),xe(s.latitude));return c!==0?c:_e(xe(o.longitude),xe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,d,h;let g=o.fields||{},y=s.fields||{},m=(c=g.value)===null||c===void 0?void 0:c.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,P=_e(((d=m?.values)===null||d===void 0?void 0:d.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:vT(m,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===fd.mapValue&&s===fd.mapValue)return 0;if(o===fd.mapValue)return 1;if(s===fd.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),d=s.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){let y=_e(u[g],h[g]);if(y!==0)return y;let m=Jo(c[u[g]],d[h[g]]);if(m!==0)return m}return _e(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function _T(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);let t=ar(n),r=ar(e),i=_e(t.seconds,r.seconds);return i!==0?i:_e(t.nanos,r.nanos)}function vT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Jo(t[i],r[i]);if(o)return o}return _e(t.length,r.length)}function Xo(n){return ky(n)}function ky(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ar(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return jr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ky(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ky(t.fields[s])}`;return i+"}"}(n.mapValue):Q()}function IT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fy(n){return!!n&&"integerValue"in n}function hv(n){return!!n&&"arrayValue"in n}function ET(n){return!!n&&"nullValue"in n}function wT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gd(n){return!!n&&"mapValue"in n}function JT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Fa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Bi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fa(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fa(t)}setAll(e){let t=kt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Fa(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Fa(this.value))}};function eS(n){let e=[];return Bi(n.fields,(t,r)=>{let i=new kt([t]);if(gd(r)){let o=eS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var sn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var es=class{constructor(e,t){this.position=e,this.inclusive=t}};function CT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Jo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function DT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pn(n.position[t],e.position[t]))return!1;return!0}var ts=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function xB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Cd=class{},qe=class n extends Cd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ly(e,t,r):t==="array-contains"?new jy(e,r):t==="in"?new $y(e,r):t==="not-in"?new Hy(e,r):t==="array-contains-any"?new qy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new By(e,r):new Uy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jo(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},an=class n extends Cd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return tS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function tS(n){return n.op==="and"}function nS(n){return RB(n)&&tS(n)}function RB(n){for(let e of n.filters)if(e instanceof an)return!1;return!0}function Vy(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(nS(n))return n.filters.map(e=>Vy(e)).join(",");{let e=n.filters.map(t=>Vy(t)).join(",");return`${n.op}(${e})`}}function rS(n,e){return n instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&Pn(r.value,i.value)}(n,e):n instanceof an?function(r,i){return i instanceof an&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&rS(s,i.filters[c]),!0):!1}(n,e):void Q()}function iS(n){return n instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`}(n):n instanceof an?function(t){return t.op.toString()+" {"+t.getFilters().map(iS).join(" ,")+"}"}(n):"Filter"}var Ly=class extends qe{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},By=class extends qe{constructor(e,t){super(e,"in",t),this.keys=oS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Uy=class extends qe{constructor(e,t){super(e,"not-in",t),this.keys=oS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function oS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var jy=class extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return hv(t)&&$a(t.arrayValue,this.value)}},$y=class extends qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$a(this.value.arrayValue,t)}},Hy=class extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if($a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!$a(this.value.arrayValue,t)}},qy=class extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!hv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$a(this.value.arrayValue,r))}};var zy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function bT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new zy(n,e,t,r,i,o,s)}function fv(n){let e=Y(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Vy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xo(r)).join(",")),e.ue=t}return e.ue}function pv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DT(n.startAt,e.startAt)&&DT(n.endAt,e.endAt)}function Gy(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ki=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function PB(n,e,t,r,i,o,s,c){return new ki(n,e,t,r,i,o,s,c)}function sS(n){return new ki(n)}function TT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aS(n){return n.collectionGroup!==null}function Va(n){let e=Y(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new lt(kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ts(o,r))}),t.has(kt.keyField().canonicalString())||e.ce.push(new ts(kt.keyField(),r))}return e.ce}function xn(n){let e=Y(n);return e.le||(e.le=OB(e,Va(n))),e.le}function OB(n,e){if(n.limitType==="F")return bT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ts(i.field,o)});let t=n.endAt?new es(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new es(n.startAt.position,n.startAt.inclusive):null;return bT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Wy(n,e){let t=n.filters.concat([e]);return new ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ky(n,e,t){return new ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wd(n,e){return pv(xn(n),xn(e))&&n.limitType===e.limitType}function cS(n){return`${fv(xn(n))}|lt:${n.limitType}`}function Ho(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>iS(i)).join(", ")}]`),Gd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xo(i)).join(",")),`Target(${r})`}(xn(n))}; limitType=${n.limitType})`}function Kd(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Va(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let d=CT(s,c,u);return s.inclusive?d<=0:d<0}(r.startAt,Va(r),i)||r.endAt&&!function(s,c,u){let d=CT(s,c,u);return s.inclusive?d>=0:d>0}(r.endAt,Va(r),i))}(n,e)}function kB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uS(n){return(e,t)=>{let r=!1;for(let i of Va(n)){let o=FB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function FB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,c){let u=s.data.field(o),d=c.data.field(o);return u!==null&&d!==null?Jo(u,d):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var $r=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ZT(this.inner)}size(){return this.innerSize}};var VB=new Ve(q.comparator);function cr(){return VB}var lS=new Ve(q.comparator);function ka(...n){let e=lS;for(let t of n)e=e.insert(t.key,t);return e}function dS(n){let e=lS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ni(){return La()}function hS(){return La()}function La(){return new $r(n=>n.toString(),(n,e)=>n.isEqual(e))}var LB=new Ve(q.comparator),BB=new lt(q.comparator);function ue(...n){let e=BB;for(let t of n)e=e.add(t);return e}var UB=new lt(_e);function jB(){return UB}function gv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function fS(n){return{integerValue:""+n}}function $B(n,e){return bB(e)?fS(e):gv(n,e)}var ns=class{constructor(){this._=void 0}};function HB(n,e,t){return n instanceof rs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lv(o)&&(o=dv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Fi?gS(n,e):n instanceof Vi?mS(n,e):function(i,o){let s=pS(i,o),c=ST(s)+ST(i.Pe);return Fy(s)&&Fy(i.Pe)?fS(c):gv(i.serializer,c)}(n,e)}function qB(n,e,t){return n instanceof Fi?gS(n,e):n instanceof Vi?mS(n,e):t}function pS(n,e){return n instanceof is?function(r){return Fy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var rs=class extends ns{},Fi=class extends ns{constructor(e){super(),this.elements=e}};function gS(n,e){let t=yS(e);for(let r of n.elements)t.some(i=>Pn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Vi=class extends ns{constructor(e){super(),this.elements=e}};function mS(n,e){let t=yS(e);for(let r of n.elements)t=t.filter(i=>!Pn(i,r));return{arrayValue:{values:t}}}var is=class extends ns{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function ST(n){return xe(n.integerValue||n.doubleValue)}function yS(n){return hv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fi&&i instanceof Fi||r instanceof Vi&&i instanceof Vi?Zo(r.elements,i.elements,Pn):r instanceof is&&i instanceof is?Pn(r.Pe,i.Pe):r instanceof rs&&i instanceof rs}(n.transform,e.transform)}var Qy=class{constructor(e,t){this.version=e,this.transformResults=t}},or=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function md(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var os=class{};function _S(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ha(n.key,or.none()):new Li(n.key,n.data,or.none());{let t=n.data,r=Ot.empty(),i=new lt(kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new On(n.key,r,new Gt(i.toArray()),or.none())}}function GB(n,e,t){n instanceof Li?function(i,o,s){let c=i.value.clone(),u=MT(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof On?function(i,o,s){if(!md(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=MT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(vS(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ba(n,e,t,r){return n instanceof Li?function(o,s,c,u){if(!md(o.precondition,s))return c;let d=o.value.clone(),h=NT(o.fieldTransforms,u,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof On?function(o,s,c,u){if(!md(o.precondition,s))return c;let d=NT(o.fieldTransforms,u,s),h=s.data;return h.setAll(vS(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,c){return md(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function WB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=pS(r.transform,i||null);o!=null&&(t===null&&(t=Ot.empty()),t.set(r.field,o))}return t||null}function AT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zo(r,i,(o,s)=>zB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Li=class extends os{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},On=class extends os{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function vS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function MT(n,e,t){let r=new Map;we(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,qB(s,c,t[i]))}return r}function NT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,HB(o,s,e))}return r}var Ha=class extends os{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yy=class extends os{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&GB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ba(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ba(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=_S(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(t,r)=>AT(t,r))&&Zo(this.baseMutations,e.baseMutations,(t,r)=>AT(t,r))}},Jy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){we(e.mutations.length===r.length);let i=function(){return LB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Xy=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var e_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $e,fe;function KB(n){switch(n){default:return Q();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function IS(n){if(n===void 0)return sr("GRPC error has no .code"),N.UNKNOWN;switch(n){case $e.OK:return N.OK;case $e.CANCELLED:return N.CANCELLED;case $e.UNKNOWN:return N.UNKNOWN;case $e.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case $e.INTERNAL:return N.INTERNAL;case $e.UNAVAILABLE:return N.UNAVAILABLE;case $e.UNAUTHENTICATED:return N.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case $e.NOT_FOUND:return N.NOT_FOUND;case $e.ALREADY_EXISTS:return N.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return N.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case $e.ABORTED:return N.ABORTED;case $e.OUT_OF_RANGE:return N.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return N.UNIMPLEMENTED;case $e.DATA_LOSS:return N.DATA_LOSS;default:return Q()}}(fe=$e||($e={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var xT=null;function QB(){return new TextEncoder}var YB=new Br([4294967295,4294967295],0);function RT(n){let e=QB().encode(n),t=new py;return t.update(e),new Uint8Array(t.digest())}function PT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Br([t,r],0),new Br([i,o],0)]}var t_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xi(`Invalid padding: ${t}`);if(r<0)throw new xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Br.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Br.fromNumber(r)));return i.compare(YB)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=RT(e),[r,i]=PT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.Ie===0)return;let t=RT(e),[r,i]=PT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},xi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Dd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,qa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Ve(_e),cr(),ue())}},qa=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var Ko=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},bd=class{constructor(e,t){this.targetId=e,this.me=t}},Td=class{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Sd=class{constructor(){this.fe=0,this.ge=kT(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new qa(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=kT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},n_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=OT(),this.Qe=new Ve(_e)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Gy(o))if(r===0){let s=new q(o.path);this.Ue(t,s,sn.newNoDocument(s,X.min()))}else we(r===1);else{let s=this.Ye(t);if(s!==r){let c=this.Ze(e),u=c?this.Xe(c,e,s):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}xT?.et(function(h,g,y,m,S){var P,R,H,J,se,ve;let Qe={localCacheCount:h,existenceFilterCount:g.count,databaseId:y.database,projectId:y.projectId},Ie=g.unchangedNames;return Ie&&(Qe.bloomFilter={applied:S===0,hashCount:(P=Ie?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(J=(H=(R=Ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||H===void 0?void 0:H.length)!==null&&J!==void 0?J:0,padding:(ve=(se=Ie?.bits)===null||se===void 0?void 0:se.padding)!==null&&ve!==void 0?ve:0,mightContain:C=>{var _;return(_=m?.mightContain(C))!==null&&_!==void 0&&_}}),Qe}(s,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=jr(r).toUint8Array()}catch(u){if(u instanceof Ed)return Yo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new t_(s,i,o)}catch(u){return Yo(u instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let c=this.Je(s);if(c){if(o.current&&Gy(c.target)){let u=new q(c.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,sn.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Dd(e,t,this.Qe,this.ke,r);return this.ke=cr(),this.qe=OT(),this.Qe=new Ve(_e),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Sd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new lt(_e),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function OT(){return new Ve(q.comparator)}function kT(){return new Ve(q.comparator)}var ZB={asc:"ASCENDING",desc:"DESCENDING"},JB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XB={and:"AND",or:"OR"},r_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function i_(n,e){return n.useProto3Json||Gd(e)?e:{value:e}}function Ad(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ES(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eU(n,e){return Ad(n,e.toTimestamp())}function Rn(n){return we(!!n),X.fromTimestamp(function(t){let r=ar(t);return new Ke(r.seconds,r.nanos)}(n))}function mv(n,e){return o_(n,e).canonicalString()}function o_(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function wS(n){let e=Re.fromString(n);return we(SS(e)),e}function s_(n,e){return mv(n.databaseId,e.path)}function Iy(n,e){let t=wS(e);if(t.get(1)!==n.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(DS(t))}function CS(n,e){return mv(n.databaseId,e)}function tU(n){let e=wS(n);return e.length===4?Re.emptyPath():DS(e)}function a_(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DS(n){return we(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function FT(n,e,t){return{name:s_(n,e),fields:t.value.mapValue.fields}}function nU(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(we(h===void 0||typeof h=="string"),dt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(d){let h=d.code===void 0?N.UNKNOWN:IS(d.code);return new L(h,d.message||"")}(s);t=new Td(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Iy(n,r.document.name),o=Rn(r.document.updateTime),s=r.document.createTime?Rn(r.document.createTime):X.min(),c=new Ot({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,o,s,c),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Ko(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Iy(n,r.document),o=r.readTime?Rn(r.readTime):X.min(),s=sn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Ko([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Iy(n,r.document),o=r.removedTargetIds||[];t=new Ko([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new e_(i,o),c=r.targetId;t=new bd(c,s)}}return t}function rU(n,e){let t;if(e instanceof Li)t={update:FT(n,e.key,e.value)};else if(e instanceof Ha)t={delete:s_(n,e.key)};else if(e instanceof On)t={update:FT(n,e.key,e.data),updateMask:hU(e.fieldMask)};else{if(!(e instanceof Yy))return Q();t={verify:s_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof rs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Vi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof is)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:eU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(n,e.precondition)),t}function iU(n,e){return n&&n.length>0?(we(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Rn(i.updateTime):Rn(o);return s.isEqual(X.min())&&(s=Rn(o)),new Qy(s,i.transformResults||[])}(t,e))):[]}function oU(n,e){return{documents:[CS(n,e.path)]}}function sU(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CS(n,i);let o=function(d){if(d.length!==0)return TS(an.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(h=>function(y){return{field:qo(y.field),direction:uU(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=i_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function aU(n){let e=tU(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){we(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let y=bS(g);return y instanceof an&&nS(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(y=>function(S){return new ts(zo(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(g){let y;return y=typeof g=="object"?g.value:g,Gd(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(g){let y=!!g.before,m=g.values||[];return new es(m,y)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let y=!g.before,m=g.values||[];return new es(m,y)}(t.endAt)),PB(e,i,s,o,c,"F",u,d)}function cU(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=zo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zo(t.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=zo(t.unaryFilter.field);return qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=zo(t.unaryFilter.field);return qe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return qe.create(zo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return an.create(t.compositeFilter.filters.map(r=>bS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function uU(n){return ZB[n]}function lU(n){return JB[n]}function dU(n){return XB[n]}function qo(n){return{fieldPath:n.canonicalString()}}function zo(n){return kt.fromServerFormat(n.fieldPath)}function TS(n){return n instanceof qe?function(t){if(t.op==="=="){if(wT(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NAN"}};if(ET(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wT(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NAN"}};if(ET(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(t.field),op:lU(t.op),value:t.value}}}(n):n instanceof an?function(t){let r=t.getFilters().map(i=>TS(i));return r.length===1?r[0]:{compositeFilter:{op:dU(t.op),filters:r}}}(n):Q()}function hU(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var za=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),c=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var c_=class{constructor(e){this.ct=e}};function fU(n){let e=aU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ky(e,e.limit,"L"):e}var Md=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ua(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ar(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(jr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?XT(e)?this.dt(t,Number.MAX_SAFE_INTEGER):JT(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(xe(c)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Md.vt=new Md;var u_=class{constructor(){this.un=new l_}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Pi.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},l_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new lt(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Re.comparator)).toArray()}};var eG=new Uint8Array(0);var An=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(41943040,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);var Ga=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var d_=class{constructor(){this.changes=new $r(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var h_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var f_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ba(r.mutation,i,Gt.empty(),Ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=Ni();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ka();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ni();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=cr(),s=La(),c=function(){return La()}();return t.forEach((u,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof On)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Ba(h.mutation,d,h.mutation.getFieldMask(),Ke.now())):s.set(d.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>{var g;return c.set(d,new h_(h,(g=s.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=La(),i=new Ve((s,c)=>s-c),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let h=r.get(u)||Gt.empty();h=c.applyToLocalView(d,h),r.set(u,h);let g=(i.get(c.batchId)||ue()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,h=u.value,g=hS();h.forEach(y=>{if(!o.has(y)){let m=_S(t.get(y),r.get(y));m!==null&&g.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(Ni()),c=-1,u=o;return s.next(d=>O.forEach(d,(h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,ue())).next(h=>({batchId:c,changes:dS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=ka();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ka();return this.indexManager.getCollectionParents(e,o).next(c=>O.forEach(c,u=>{let d=function(g,y){return new ki(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,y)=>{s=s.insert(g,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,sn.newInvalidDocument(h)))});let c=ka();return s.forEach((u,d)=>{let h=o.get(u);h!==void 0&&Ba(h.mutation,d,Gt.empty(),Ke.now()),Kd(t,d)&&(c=c.insert(u,d))}),c})}};var p_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:fU(i.bundledQuery),readTime:Rn(i.readTime)}}(t)),O.resolve()}};var g_=class{constructor(){this.overlays=new Ve(q.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ni();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Ni(),o=t.length+1,s=new q(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ve((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Ni(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=Ni(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return O.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Xy(t,r));let o=this.Ir.get(t);o===void 0&&(o=ue(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var m_=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Wa=class{constructor(){this.Tr=new lt(He.Er),this.dr=new lt(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new He(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new He(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new Re([])),r=new He(t,e),i=new He(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new Re([])),r=new He(t,e),i=new He(t,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new He(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},He=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||_e(e.wr,t.wr)}static Ar(e,t){return _e(e.wr,t.wr)||q.comparator(e.key,t.key)}};var y_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new lt(He.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Zy(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.br=this.br.add(new He(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new He(t,0),i=new He(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let c=this.Dr(s.wr);o.push(c)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(_e);return t.forEach(i=>{let o=new He(i,0),s=new He(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],c=>{r=r.add(c.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new He(new q(o),0),c=new lt(_e);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},s),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){we(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let o=new He(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new He(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var __=class{constructor(e){this.Mr=e,this.docs=function(){return new Ve(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let r=cr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=cr(),s=t.path,c=new q(s.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:h}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||wB(EB(h),r)<=0||(i.has(h.key)||Kd(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new v_(this)}getSize(e){return O.resolve(this.size)}},v_=class extends d_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var I_=class{constructor(e){this.persistence=e,this.Nr=new $r(t=>fv(t),pv),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wa,this.targetCount=0,this.kr=Ga.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ga(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var E_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new YT(0),this.Kr=!1,this.Kr=!0,this.$r=new m_,this.referenceDelegate=e(this),this.Ur=new I_(this),this.indexManager=new u_,this.remoteDocumentCache=function(i){return new __(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new c_(t),this.Gr=new p_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new g_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new y_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new w_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},w_=class extends Py{constructor(e){super(),this.currentSequenceNumber=e}},C_=class n{constructor(e){this.persistence=e,this.Jr=new Wa,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var D_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var b_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var T_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WD()?8:DB(Ze())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new b_;return this.Xi(e,t,s).next(c=>{if(o.result=c,this.zi)return this.es(e,t,s,c.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Oa()<=ce.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Oa()<=ce.DEBUG&&U("QueryEngine","Query:",Ho(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Oa()<=ce.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(t))):O.resolve())}Yi(e,t){if(TT(t))return O.resolve(null);let r=xn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ky(t,null,"F"),r=xn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,s,u.readTime)?this.Yi(e,Ky(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return TT(t)||i.isEqual(X.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?O.resolve(null):(Oa()<=ce.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ho(t)),this.rs(e,s,t,IB(i,-1)).next(c=>c))})}ts(e,t){let r=new lt(uS(e));return t.forEach((i,o)=>{Kd(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Oa()<=ce.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.Ji.getDocumentsMatchingQuery(e,t,Pi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var S_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ve(_e),this._s=new $r(o=>fv(o),pv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function pU(n,e,t,r){return new S_(n,e,t,r)}function AS(n,e){return v(this,null,function*(){let t=Y(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ue();for(let d of i){s.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}for(let d of o){c.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:c}))})})})}function gU(n,e){let t=Y(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){let g=d.batch,y=g.keys(),m=O.resolve();return y.forEach(S=>{m=m.next(()=>h.getEntry(u,S)).next(P=>{let R=d.docVersions.get(S);we(R!==null),P.version.compareTo(R)<0&&(g.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),m.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ue();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MS(n){let e=Y(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function mU(n,e){let t=Y(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((h,g)=>{let y=i.get(g);if(!y)return;c.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,g)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?m=m.withResumeToken(dt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(g,m),function(P,R,H){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(y,m,h)&&c.push(t.Ur.updateTargetData(o,m))});let u=cr(),d=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(yU(o,s,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(X.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return O.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.os=i,o))}function yU(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=cr();return t.forEach((c,u)=>{let d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):U("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function _U(n,e){let t=Y(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vU(n,e){let t=Y(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new za(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function A_(n,e,t){return v(this,null,function*(){let r=Y(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!tc(s))throw s;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function VT(n,e,t){let r=Y(n),i=X.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,h){let g=Y(u),y=g._s.get(h);return y!==void 0?O.resolve(g.os.get(y)):g.Ur.getTargetData(d,h)}(r,s,xn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:ue())).next(c=>(IU(r,kB(e),c),{documents:c,Ts:o})))}function IU(n,e,t){let r=n.us.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Nd=class{constructor(){this.activeTargetIds=jB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var M_=class{constructor(){this.so=new Nd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Nd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var N_=class{_o(e){}shutdown(){}};var xd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var pd=null;function Ey(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}var EU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var x_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ut="WebChannelConnection",R_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let c=Ey(),u=this.xo(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(t,u,d,i).then(h=>(U("RestConnection",`Received RPC '${t}' ${c}: `,h),h),h=>{throw Yo("RestConnection",`RPC '${t}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,c){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ls}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=EU[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Ey();return new Promise((s,c)=>{let u=new gy;u.setWithCredentials(!0),u.listenOnce(my.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Pa.NO_ERROR:let h=u.getResponseJson();U(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Pa.TIMEOUT:U(ut,`RPC '${e}' ${o} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:let g=u.getStatus();if(U(ut,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let S=function(R){let H=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(H)>=0?H:N.UNKNOWN}(m.status);c(new L(S,m.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{U(ut,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);U(ut,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Ey(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vy(),c=_y(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");U(ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let g=s.createWebChannel(h,u),y=!1,m=!1,S=new x_({Io:R=>{m?U(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(U(ut,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),U(ut,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),P=(R,H,J)=>{R.listen(H,se=>{try{J(se)}catch(ve){setTimeout(()=>{throw ve},0)}})};return P(g,$o.EventType.OPEN,()=>{m||(U(ut,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),P(g,$o.EventType.CLOSE,()=>{m||(m=!0,U(ut,`RPC '${e}' stream ${i} transport closed`),S.So())}),P(g,$o.EventType.ERROR,R=>{m||(m=!0,Yo(ut,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new L(N.UNAVAILABLE,"The operation could not be completed")))}),P(g,$o.EventType.MESSAGE,R=>{var H;if(!m){let J=R.data[0];we(!!J);let se=J,ve=se.error||((H=se[0])===null||H===void 0?void 0:H.error);if(ve){U(ut,`RPC '${e}' stream ${i} received error:`,ve);let Qe=ve.status,Ie=function(E){let w=$e[E];if(w!==void 0)return IS(w)}(Qe),C=ve.message;Ie===void 0&&(Ie=N.INTERNAL,C="Unknown error status: "+Qe+" with message "+ve.message),m=!0,S.So(new L(Ie,C)),g.close()}else U(ut,`RPC '${e}' stream ${i} received:`,J),S.bo(J)}}),P(c,yy.STAT_EVENT,R=>{R.stat===hd.PROXY?U(ut,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===hd.NOPROXY&&U(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function wy(){return typeof document<"u"?document:null}function Qd(n){return new r_(n,!0)}var Rd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Pd=class{constructor(e,t,r,i,o,s,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rd(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},P_=class extends Pd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=nU(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Rn(s.readTime):X.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=a_(this.serializer),t.addTarget=function(o,s){let c,u=s.target;if(c=Gy(u)?{documents:oU(o,u)}:{query:sU(o,u)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=ES(o,s.resumeToken);let d=i_(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(X.min())>0){c.readTime=Ad(o,s.snapshotVersion.toTimestamp());let d=i_(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=cU(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=a_(this.serializer),t.removeTarget=e,this.a_(t)}},O_=class extends Pd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=iU(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=a_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>rU(this.serializer,r))};this.a_(t)}};var k_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,o_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Lo(e,o_(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},F_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(t),this.D_=!1):U("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var V_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Ui(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let d=Y(u);d.L_.add(4),yield nc(d),d.q_.set("Unknown"),d.L_.delete(4),yield Yd(d)})}(this))}))}),this.q_=new F_(r,i)}};function Yd(n){return v(this,null,function*(){if(Ui(n))for(let e of n.B_)yield e(!0)})}function nc(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function NS(n,e){let t=Y(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Iv(t)?vv(t):ds(t).r_()&&_v(t,e))}function yv(n,e){let t=Y(n),r=ds(t);t.N_.delete(e),r.r_()&&xS(t,e),t.N_.size===0&&(r.r_()?r.o_():Ui(t)&&t.q_.set("Unknown"))}function _v(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ds(n).A_(e)}function xS(n,e){n.Q_.xe(e),ds(n).R_(e)}function vv(n){n.Q_=new n_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ds(n).start(),n.q_.v_()}function Iv(n){return Ui(n)&&!ds(n).n_()&&n.N_.size>0}function Ui(n){return Y(n).L_.size===0}function RS(n){n.Q_=void 0}function wU(n){return v(this,null,function*(){n.q_.set("Online")})}function CU(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{_v(n,e)})})}function DU(n,e){return v(this,null,function*(){RS(n),Iv(n)?(n.q_.M_(e),vv(n)):n.q_.set("Unknown")})}function bU(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof Td&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Od(n,r)}else if(e instanceof Ko?n.Q_.Ke(e):e instanceof bd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let r=yield MS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.Q_.rt(s);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(d);h&&o.N_.set(d,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,d)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),xS(o,u);let g=new za(h.target,u,d,h.sequenceNumber);_v(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield Od(n,r)}})}function Od(n,e,t){return v(this,null,function*(){if(!tc(e))throw e;n.L_.add(1),yield nc(n),n.q_.set("Offline"),t||(t=()=>MS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Yd(n)}))})}function PS(n,e){return e().catch(t=>Od(n,t,e))}function Zd(n){return v(this,null,function*(){let e=Y(n),t=Hr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TU(e);)try{let i=yield _U(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,SU(e,i)}catch(i){yield Od(e,i)}OS(e)&&kS(e)})}function TU(n){return Ui(n)&&n.O_.length<10}function SU(n,e){n.O_.push(e);let t=Hr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function OS(n){return Ui(n)&&!Hr(n).n_()&&n.O_.length>0}function kS(n){Hr(n).start()}function AU(n){return v(this,null,function*(){Hr(n).p_()})}function MU(n){return v(this,null,function*(){let e=Hr(n);for(let t of n.O_)e.m_(t.mutations)})}function NU(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=Jy.from(r,e,t);yield PS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Zd(n)})}function xU(n,e){return v(this,null,function*(){e&&Hr(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return KB(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();Hr(r).s_(),yield PS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Zd(r)}})}(n,e)),OS(n)&&kS(n)})}function LT(n,e){return v(this,null,function*(){let t=Y(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=Ui(t);t.L_.add(3),yield nc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Yd(t)})}function RU(n,e){return v(this,null,function*(){let t=Y(n);e?(t.L_.delete(2),yield Yd(t)):e||(t.L_.add(2),yield nc(t),t.q_.set("Unknown"))})}function ds(n){return n.K_||(n.K_=function(t,r,i){let o=Y(t);return o.w_(),new P_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:wU.bind(null,n),Ro:CU.bind(null,n),mo:DU.bind(null,n),d_:bU.bind(null,n)}),n.B_.push(e=>v(null,null,function*(){e?(n.K_.s_(),Iv(n)?vv(n):n.q_.set("Unknown")):(yield n.K_.stop(),RS(n))}))),n.K_}function Hr(n){return n.U_||(n.U_=function(t,r,i){let o=Y(t);return o.w_(),new O_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AU.bind(null,n),mo:xU.bind(null,n),f_:MU.bind(null,n),g_:NU.bind(null,n)}),n.B_.push(e=>v(null,null,function*(){e?(n.U_.s_(),yield Zd(n)):(yield n.U_.stop(),n.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var L_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ev(n,e){if(sr("AsyncQueue",`${e}: ${n}`),tc(n))return new L(N.UNAVAILABLE,`${e}: ${n}`);throw n}var kd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=ka(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Fd=class{constructor(){this.W_=new Ve(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ss=class n{constructor(e,t,r,i,o,s,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,kd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var B_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},U_=class{constructor(){this.queries=BT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Y(t),o=i.queries;i.queries=BT(),o.forEach((s,c)=>{for(let u of c.j_)u.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function BT(){return new $r(n=>cS(n),Wd)}function PU(n,e){return v(this,null,function*(){let t=Y(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new B_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=Ev(s,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&wv(t)})}function OU(n,e){return v(this,null,function*(){let t=Y(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function kU(n,e){let t=Y(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.j_)c.X_(i)&&(r=!0);s.z_=i}}r&&wv(t)}function FU(n,e,t){let r=Y(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function wv(n){n.Y_.forEach(e=>{e.next()})}var j_,UT;(UT=j_||(j_={})).ea="default",UT.Cache="cache";var $_=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==j_.Cache}};var Vd=class{constructor(e){this.key=e}},Ld=class{constructor(e){this.key=e}},H_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=uS(e),this.Ra=new kd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Fd,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let y=i.get(h),m=Kd(this.query,g)?g:null,S=!!y&&this.mutatedKeys.has(y.key),P=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;y&&m?y.data.isEqual(m.data)?S!==P&&(r.track({type:3,doc:m}),R=!0):this.ga(y,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Aa(m,u)>0||d&&this.Aa(m,d)<0)&&(c=!0)):!y&&m?(r.track({type:0,doc:m}),R=!0):y&&!m&&(r.track({type:1,doc:y}),R=!0,(u||d)&&(c=!0)),R&&(m?(s=s.add(m),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,g)=>function(m,S){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return P(m)-P(S)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,s.length!==0||d?{snapshot:new ss(this.query,e.Ra,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ld(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Vd(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ss.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},q_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},z_=class{constructor(e){this.key=e,this.va=!1}},G_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new $r(c=>cS(c),Wd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(q.comparator),this.Na=new Map,this.La=new Wa,this.Ba={},this.ka=new Map,this.qa=Ga.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function VU(n,e,t=!0){return v(this,null,function*(){let r=jS(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield FS(r,e,t,!0),i})}function LU(n,e){return v(this,null,function*(){let t=jS(n);yield FS(t,e,!0,!1)})}function FS(n,e,t,r){return v(this,null,function*(){let i=yield vU(n.localStore,xn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield BU(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&NS(n.remoteStore,i),c})}function BU(n,e,t,r,i){return v(this,null,function*(){n.Ka=(g,y,m)=>function(P,R,H,J){return v(this,null,function*(){let se=R.view.ma(H);se.ns&&(se=yield VT(P.localStore,R.query,!1).then(({documents:C})=>R.view.ma(C,se)));let ve=J&&J.targetChanges.get(R.targetId),Qe=J&&J.targetMismatches.get(R.targetId)!=null,Ie=R.view.applyChanges(se,P.isPrimaryClient,ve,Qe);return $T(P,R.targetId,Ie.wa),Ie.snapshot})}(n,g,y,m);let o=yield VT(n.localStore,e,!0),s=new H_(e,o.Ts),c=s.ma(o.documents),u=qa.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,u);$T(n,t,d.wa);let h=new q_(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function UU(n,e,t){return v(this,null,function*(){let r=Y(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Wd(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield A_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yv(r.remoteStore,i.targetId),W_(r,i.targetId)}).catch(ec))):(W_(r,i.targetId),yield A_(r.localStore,i.targetId,!0))})}function jU(n,e){return v(this,null,function*(){let t=Y(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yv(t.remoteStore,r.targetId))})}function $U(n,e,t){return v(this,null,function*(){let r=QU(n);try{let i=yield function(s,c){let u=Y(s),d=Ke.now(),h=c.reduce((m,S)=>m.add(S.key),ue()),g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let S=cr(),P=ue();return u.cs.getEntries(m,h).next(R=>{S=R,S.forEach((H,J)=>{J.isValidDocument()||(P=P.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,S)).next(R=>{g=R;let H=[];for(let J of c){let se=WB(J,g.get(J.key).overlayedDocument);se!=null&&H.push(new On(J.key,se,eS(se.value.mapValue),or.exists(!0)))}return u.mutationQueue.addMutationBatch(m,d,H,c)}).next(R=>{y=R;let H=R.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(m,R.batchId,H)})}).then(()=>({batchId:y.batchId,changes:dS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let d=s.Ba[s.currentUser.toKey()];d||(d=new Ve(_e)),d=d.insert(c,u),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,t),yield rc(r,i.changes),yield Zd(r.remoteStore)}catch(i){let o=Ev(i,"Failed to persist write");t.reject(o)}})}function VS(n,e){return v(this,null,function*(){let t=Y(n);try{let r=yield mU(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?we(s.va):i.removedDocuments.size>0&&(we(s.va),s.va=!1))}),yield rc(t,r,e)}catch(r){yield ec(r)}})}function jT(n,e,t){let r=Y(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=Y(s);u.onlineState=c;let d=!1;u.queries.forEach((h,g)=>{for(let y of g.j_)y.Z_(c)&&(d=!0)}),d&&wv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HU(n,e,t){return v(this,null,function*(){let r=Y(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ve(q.comparator);s=s.insert(o,sn.newNoDocument(o,X.min()));let c=ue().add(o),u=new Dd(X.min(),new Map,new Ve(_e),s,c);yield VS(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Cv(r)}else yield A_(r.localStore,e,!1).then(()=>W_(r,e,t)).catch(ec)})}function qU(n,e){return v(this,null,function*(){let t=Y(n),r=e.batch.batchId;try{let i=yield gU(t.localStore,e);BS(t,r,null),LS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rc(t,i)}catch(i){yield ec(i)}})}function zU(n,e,t){return v(this,null,function*(){let r=Y(n);try{let i=yield function(s,c){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(we(g!==null),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);BS(r,e,t),LS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rc(r,i)}catch(i){yield ec(i)}})}function LS(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function BS(n,e,t){let r=Y(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function W_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||US(n,r)})}function US(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(yv(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Cv(n))}function $T(n,e,t){for(let r of t)r instanceof Vd?(n.La.addReference(r.key,e),GU(n,r)):r instanceof Ld?(U("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||US(n,r.key)):Q()}function GU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(U("SyncEngine","New document in limbo: "+t),n.xa.add(r),Cv(n))}function Cv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(Re.fromString(e)),r=n.qa.next();n.Na.set(r,new z_(t)),n.Oa=n.Oa.insert(t,r),NS(n.remoteStore,new za(xn(sS(t.path)),r,"TargetPurposeLimboResolution",YT.oe))}}function rc(n,e,t){return v(this,null,function*(){let r=Y(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{s.push(r.Ka(u,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=D_.Wi(u.targetId,d);o.push(g)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,d){return v(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(d,y=>O.forEach(y.$i,m=>h.persistence.referenceDelegate.addReference(g,y.targetId,m)).next(()=>O.forEach(y.Ui,m=>h.persistence.referenceDelegate.removeReference(g,y.targetId,m)))))}catch(g){if(!tc(g))throw g;U("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let y=g.targetId;if(!g.fromCache){let m=h.os.get(y),S=m.snapshotVersion,P=m.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(y,P)}}})}(r.localStore,o))})}function WU(n,e){return v(this,null,function*(){let t=Y(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield AS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new L(N.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rc(t,r.hs)}})}function KU(n,e){let t=Y(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let c=t.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}function jS(n){let e=Y(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HU.bind(null,e),e.Ca.d_=kU.bind(null,e.eventManager),e.Ca.$a=FU.bind(null,e.eventManager),e}function QU(n){let e=Y(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zU.bind(null,e),e}var HT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Qd(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return pU(this.persistence,new T_,t.initialUser,this.serializer)}Ga(t){return new E_(C_.Zr,this.serializer)}Wa(t){return new M_}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var YU=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WU.bind(null,this.syncEngine),yield RU(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new U_}()}createDatastore(t){let r=Qd(t.databaseInfo.databaseId),i=function(s){return new R_(s)}(t.databaseInfo);return function(s,c,u,d){return new k_(s,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,u){return new V_(i,o,s,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>jT(this.syncEngine,r,0),function(){return xd.D()?new xd:new N_}())}createSyncEngine(t,r){return function(o,s,c,u,d,h,g){let y=new G_(o,s,c,u,d,h);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=Y(o);U("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield nc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var K_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Q_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=_d.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ev(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Cy(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield AS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function qT(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield ZU(n);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>LT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>LT(e.remoteStore,i)),n._onlineComponents=e})}function ZU(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Yo("Error using user provided cache. Falling back to memory cache: "+t),yield Cy(n,new HT)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield Cy(n,new HT);return n._offlineComponents})}function $S(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield qT(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield qT(n,new YU))),n._onlineComponents})}function JU(n){return $S(n).then(e=>e.syncEngine)}function XU(n){return v(this,null,function*(){let e=yield $S(n),t=e.eventManager;return t.onListen=VU.bind(null,e.syncEngine),t.onUnlisten=UU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jU.bind(null,e.syncEngine),t})}function ej(n,e,t={}){let r=new Mn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,c,u,d){let h=new K_({next:y=>{h.Za(),s.enqueueAndForget(()=>OU(o,g)),y.fromCache&&u.source==="server"?d.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),g=new $_(c,h,{includeMetadataChanges:!0,_a:!0});return PU(o,g)}(yield XU(n),n.asyncQueue,e,t,r)})),r.promise}function HS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zT=new Map;function qS(n,e,t){if(!t)throw new L(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tj(n,e,t,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GT(n){if(!q.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WT(n){if(q.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Bd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jd(n);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Ud=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},as=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ud({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ud(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new by;switch(r.type){case"firstParty":return new My(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=zT.get(t);r&&(U("ComponentProvider","Removing Datastore"),zT.delete(t),r.terminate())}(this),Promise.resolve()}};function zS(n,e,t,r={}){var i;let o=(n=Bd(n,as))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Je.MOCK_USER;else{c=jD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(d)}n._authCredentials=new Ty(new yd(c,u))}}var cs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Wt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ur=class n extends cs{constructor(e,t,r){super(e,t,sS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function GS(n,e,...t){if(n=Be(n),qS("collection","path",e),n instanceof as){let r=Re.fromString(e,...t);return WT(r),new Ur(n,null,r)}{if(!(n instanceof Wt||n instanceof Ur))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return WT(r),new Ur(n.firestore,null,r)}}function WS(n,e,...t){if(n=Be(n),arguments.length===1&&(e=_d.newId()),qS("doc","path",e),n instanceof as){let r=Re.fromString(e,...t);return GT(r),new Wt(n,null,new q(r))}{if(!(n instanceof Wt||n instanceof Ur))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return GT(r),new Wt(n.firestore,n instanceof Ur?n.converter:null,new q(r))}}var jd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rd(this,"async_queue_retry"),this.Vu=()=>{let r=wy();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=wy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=wy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Mn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!tc(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(r);throw sr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=L_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Ka=class extends as{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jd(e),this._firestoreClient=void 0,yield e}})}};function KS(n,e){let t=typeof n=="object"?n:Fo(),r=typeof n=="string"?n:e||"(default)",i=wa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=UD("firestore");o&&zS(i,...o)}return i}function Dv(n){if(n._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nj(n),n._firestoreClient}function nj(n){var e,t,r;let i=n._freezeSettings(),o=function(c,u,d,h){return new Oy(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,HS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Q_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Qa=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var us=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ya=class{constructor(e){this._methodName=e}};var Za=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var Ja=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var rj=/^__.*__$/,Y_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new On(e,this.data,this.fieldMask,t,this.fieldTransforms):new Li(e,this.data,t,this.fieldTransforms)}},$d=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new On(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function QS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Z_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QS(this.Cu)&&rj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},J_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qd(e)}Qu(e,t,r,i=!1){return new Z_({Cu:e,methodName:t,qu:r,path:kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function YS(n){let e=n._freezeSettings(),t=Qd(n._databaseId);return new J_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ij(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);bv("Data must be an object, but it was:",s,r);let c=ZS(r,s),u,d;if(o.merge)u=new Gt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let y=X_(e,g,t);if(!s.contains(y))throw new L(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);XS(h,y)||h.push(y)}u=new Gt(h),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new Y_(new Ot(c),u,d)}var Hd=class n extends Ya{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function oj(n,e,t,r){let i=n.Qu(1,e,t);bv("Data must be an object, but it was:",i,r);let o=[],s=Ot.empty();Bi(r,(u,d)=>{let h=Tv(e,u,t);d=Be(d);let g=i.Nu(h);if(d instanceof Hd)o.push(h);else{let y=ic(d,g);y!=null&&(o.push(h),s.set(h,y))}});let c=new Gt(o);return new $d(s,c,i.fieldTransforms)}function sj(n,e,t,r,i,o){let s=n.Qu(1,e,t),c=[X_(e,r,t)],u=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(X_(e,o[y])),u.push(o[y+1]);let d=[],h=Ot.empty();for(let y=c.length-1;y>=0;--y)if(!XS(d,c[y])){let m=c[y],S=u[y];S=Be(S);let P=s.Nu(m);if(S instanceof Hd)d.push(m);else{let R=ic(S,P);R!=null&&(d.push(m),h.set(m,R))}}let g=new Gt(d);return new $d(h,g,s.fieldTransforms)}function aj(n,e,t,r=!1){return ic(t,n.Qu(r?4:3,e))}function ic(n,e){if(JS(n=Be(n)))return bv("Unsupported field value:",e,n),ZS(n,e);if(n instanceof Ya)return function(r,i){if(!QS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=ic(c,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $B(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:Ad(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ad(i.serializer,o)}}if(r instanceof Za)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qa)return{bytesValue:ES(i.serializer,r._byteString)};if(r instanceof Wt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ja)return function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return gv(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Jd(r)}`)}(n,e)}function ZS(n,e){let t={};return ZT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bi(n,(r,i)=>{let o=ic(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function JS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ke||n instanceof Za||n instanceof Qa||n instanceof Wt||n instanceof Ya||n instanceof Ja)}function bv(n,e,t){if(!JS(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Jd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function X_(n,e,t){if((e=Be(e))instanceof us)return e._internalPath;if(typeof e=="string")return Tv(n,e);throw qd("Field path arguments must be of type string or ",n,!1,void 0,t)}var cj=new RegExp("[~\\*/\\[\\]]");function Tv(n,e,t){if(e.search(cj)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new us(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(N.INVALID_ARGUMENT,c+n+u)}function XS(n,e){return n.some(t=>t.isEqual(e))}var zd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ev(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(eA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ev=class extends zd{data(){return super.data()}};function eA(n,e){return typeof e=="string"?Tv(n,e):e instanceof us?e._internalPath:e._delegate._internalPath}function uj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xa=class{},tv=class extends Xa{};function tA(n,e,...t){let r=[];e instanceof Xa&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof rv).length,c=o.filter(u=>u instanceof nv).length;if(s>1||s>0&&c>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var nv=class n extends tv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return nA(e._query,t),new cs(e.firestore,e.converter,Wy(e._query,t))}_parse(e){let t=YS(e.firestore);return function(o,s,c,u,d,h,g){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){QT(g,h);let m=[];for(let S of g)m.push(KT(u,o,S));y={arrayValue:{values:m}}}else y=KT(u,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||QT(g,h),y=aj(c,s,g,h==="in"||h==="not-in");return qe.create(d,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var rv=class n extends Xa{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:an.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let u of c)nA(s,u),s=Wy(s,u)}(e._query,t),new cs(e.firestore,e.converter,Wy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function KT(n,e,t){if(typeof(t=Be(t))=="string"){if(t==="")throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aS(e)&&t.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Re.fromString(t));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return IT(n,new q(r))}if(t instanceof Wt)return IT(n,t._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(t)}.`)}function QT(n,e){if(!Array.isArray(n)||n.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nA(n,e){let t=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var iv=class{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Bi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>xe(s.doubleValue));return new Ja(o)}convertGeoPoint(e){return new Za(xe(e.latitude),xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=dv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ja(e));default:return null}}convertTimestamp(e){let t=ar(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);we(SS(r));let i=new wd(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function lj(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Wo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ov=class extends zd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(eA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Qo=class extends ov{data(e={}){return super.data(e)}},sv=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qo(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Qo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Wo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Qo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Wo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:dj(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function dj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}var av=class extends iv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}};function rA(n){n=Bd(n,cs);let e=Bd(n.firestore,Ka),t=Dv(e),r=new av(e);return uj(n._query),ej(t,n._query).then(i=>new sv(e,r,n,i))}function hj(n,e){return function(r,i){let o=new Mn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return $U(yield JU(r),i,o)})),o.promise}(Dv(n),e)}var cv=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=YS(e)}set(e,t,r){this._verifyNotCommitted();let i=Dy(e,this._firestore),o=lj(i.converter,t,r),s=ij(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Dy(e,this._firestore),s;return s=typeof(t=Be(t))=="string"||t instanceof us?sj(this._dataReader,"WriteBatch.update",o._key,t,r,i):oj(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Dy(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Dy(n,e){if((n=Be(n)).firestore!==e)throw new L(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function iA(n){return Dv(n=Bd(n,Ka)),new cv(n,e=>hj(n,e))}(function(e,t=!0){(function(i){ls=i})(Or),Pr(new zt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Ka(new Sy(r.getProvider("auth-internal")),new xy(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wd(d.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),We(mT,"4.7.3",e),We(mT,"4.7.3","esm2017")})();var ji=class{constructor(e){return e}},oA="firestore",Sv=class{constructor(){return Ca(oA)}};var Av=new G("angularfire2.firestore-instances");function fj(n,e){let t=zl(oA,n,e);return t&&new ji(t)}function pj(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ji(r)}}var gj={provide:Sv,deps:[[new Dt,Av]]},mj={provide:ji,useFactory:fj,deps:[[new Dt,Av],er]};function sA(n,...e){return We("angularfire",Ci.full,"fst"),di([mj,gj,{provide:Av,useFactory:pj(n),multi:!0,deps:[Ne,Ct,Bo,Di,[new Dt,Ra],[new Dt,Lo],...e]}])}var Mv=vt(GS,!0);var aA=vt(WS,!0);var Nv=vt(rA,!0);var cA=vt(KS,!0);var xv=vt(tA,!0);var uA=vt(iA,!0);function yj(n,e){n&1&&(x(0,"div",8),F(1," \u8655\u7406\u4E2D... "),M())}function _j(n,e){if(n&1&&(x(0,"div",9),F(1),M()),n&2){let t=z();k(),Ye(" ",t.error," ")}}function vj(n,e){if(n&1&&(x(0,"div",10),F(1),M()),n&2){let t=z();k(),Ye(" ",t.successMessage," ")}}function Ij(n,e){if(n&1){let t=Ue();x(0,"form",11),$("ngSubmit",function(){ne(t);let i=z();return re(i.handleAuthAction())}),x(1,"div",12)(2,"label",13),F(3,"\u96FB\u5B50\u90F5\u4EF6:"),M(),x(4,"input",14),nn("ngModelChange",function(i){ne(t);let o=z();return In(o.email,i)||(o.email=i),re(i)}),M()(),x(5,"div",12)(6,"label",15),F(7,"\u5BC6\u78BC:"),M(),x(8,"input",16),nn("ngModelChange",function(i){ne(t);let o=z();return In(o.password,i)||(o.password=i),re(i)}),M()(),x(9,"button",17),F(10),M(),x(11,"button",18),$("click",function(){ne(t);let i=z();return re(i.toggleAuthMode())}),F(12),M()()}if(n&2){let t=z();k(4),tn("ngModel",t.email),k(4),tn("ngModel",t.password),k(),B("disabled",t.isLoading||!t.email||!t.password),k(),Ye(" ",t.isRegisterMode?"\u8A3B\u518A\u65B0\u5E33\u6236":"\u767B\u5165"," "),k(2),Ye(" ",t.isRegisterMode?"\u5DF2\u6709\u5E33\u6236\uFF1F\u524D\u5F80\u767B\u5165":"\u6C92\u6709\u5E33\u6236\uFF1F\u9EDE\u6B64\u8A3B\u518A"," ")}}function Ej(n,e){if(n&1){let t=Ue();x(0,"div",19)(1,"div",20)(2,"button",21),$("click",function(){ne(t);let i=z();return re(i.uploadToFirebase())}),F(3," \u2B06\uFE0F \u4E0A\u50B3\u672C\u5730\u8CC7\u6599\u5230\u96F2\u7AEF "),M(),x(4,"button",21),$("click",function(){ne(t);let i=z();return re(i.downloadFromFirebase())}),F(5," \u2B07\uFE0F \u5F9E\u96F2\u7AEF\u4E0B\u8F09\u4E26\u540C\u6B65\u5230\u672C\u5730 "),M(),Ut(6,"hr"),x(7,"button",22),$("click",function(){ne(t);let i=z();return re(i.logout())}),F(8,"\u767B\u51FA"),M()()()}if(n&2){let t=z();k(2),B("disabled",t.isLoading),k(2),B("disabled",t.isLoading),k(3),B("disabled",t.isLoading)}}var Xd=class n{closeModal=new be;auth=de(Mi);firestore=de(ji);flashcardService=de(Nr);user=null;isLoading=!1;error=null;successMessage=null;email="";password="";isRegisterMode=!1;authUnsubscribe;ngOnInit(){this.authUnsubscribe=dT(this.auth,e=>{this.user=e,e?(this.email=e.email||"",this.successMessage=`\u5DF2\u767B\u5165\u70BA: ${e.email}`,this.error=null):(this.email="",this.password="")})}ngOnDestroy(){this.authUnsubscribe&&this.authUnsubscribe()}toggleAuthMode(){this.isRegisterMode=!this.isRegisterMode,this.error=null,this.successMessage=null,this.password=""}handleAuthAction(){return v(this,null,function*(){if(!this.email||!this.password){this.error="\u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6\u548C\u5BC6\u78BC\u3002";return}this.isLoading=!0,this.error=null,this.successMessage=null;try{if(this.isRegisterMode){let e=yield uT(this.auth,this.email,this.password);this.user=e.user,this.successMessage="\u5E33\u6236\u8A3B\u518A\u6210\u529F\u4E26\u5DF2\u767B\u5165\uFF01"}else{let e=yield hT(this.auth,this.email,this.password);this.user=e.user,this.successMessage="\u767B\u5165\u6210\u529F\uFF01"}this.password=""}catch(e){switch(console.error(e),e.code){case"auth/invalid-email":this.error="\u7121\u6548\u7684\u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F\u3002";break;case"auth/user-disabled":this.error="\u6B64\u5E33\u6236\u5DF2\u88AB\u7981\u7528\u3002";break;case"auth/user-not-found":this.error="\u627E\u4E0D\u5230\u6B64\u96FB\u5B50\u90F5\u4EF6\u5C0D\u61C9\u7684\u5E33\u6236\u3002";break;case"auth/wrong-password":this.error="\u5BC6\u78BC\u932F\u8AA4\u3002";break;case"auth/email-already-in-use":this.error="\u6B64\u96FB\u5B50\u90F5\u4EF6\u5DF2\u88AB\u8A3B\u518A\u3002";break;case"auth/weak-password":this.error="\u5BC6\u78BC\u5F37\u5EA6\u4E0D\u8DB3\uFF0C\u81F3\u5C11\u9700\u89816\u500B\u5B57\u5143\u3002";break;default:this.error=`\u64CD\u4F5C\u5931\u6557: ${e.message}`}}finally{this.isLoading=!1}})}logout(){return v(this,null,function*(){this.isLoading=!0,this.error=null;try{yield fT(this.auth),this.successMessage="\u767B\u51FA\u6210\u529F\uFF01",this.email="",this.password="",this.isRegisterMode=!1}catch(e){console.error(e),this.error="\u767B\u51FA\u5931\u6557: "+e.message}finally{this.isLoading=!1}})}uploadToFirebase(){return v(this,null,function*(){if(!this.user){this.error="\u8ACB\u5148\u767B\u5165\u3002";return}this.isLoading=!0,this.error=null,this.successMessage=null;try{let e=this.flashcardService.getFlashcards();if(e.length===0){this.successMessage="\u672C\u5730\u6C92\u6709\u5361\u7247\u53EF\u4E0A\u50B3\u3002",this.isLoading=!1;return}let t=uA(this.firestore),r=Mv(this.firestore,`users/${this.user.uid}/flashcards`);(yield Nv(xv(r))).forEach(o=>{t.delete(o.ref)}),e.forEach(o=>{let s=aA(r,o.id),c=ie({},o);c.lastAnsweredTime&&(c.lastAnsweredTime=Ke.fromDate(new Date(c.lastAnsweredTime))),t.set(s,c)}),yield t.commit(),this.successMessage=`\u6210\u529F\u4E0A\u50B3 ${e.length} \u5F35\u5361\u7247\u5230\u96F2\u7AEF\uFF01`}catch(e){console.error(e),this.error="\u4E0A\u50B3\u5931\u6557: "+e.message}finally{this.isLoading=!1}})}downloadFromFirebase(){return v(this,null,function*(){if(!this.user){this.error="\u8ACB\u5148\u767B\u5165\u3002";return}this.isLoading=!0,this.error=null,this.successMessage=null;try{let e=Mv(this.firestore,`users/${this.user.uid}/flashcards`),t=xv(e),r=yield Nv(t),i=[];if(r.forEach(o=>{let s=o.data(),c=null;s.lastAnsweredTime&&s.lastAnsweredTime.toDate?c=s.lastAnsweredTime.toDate():s.lastAnsweredTime&&(c=new Date(s.lastAnsweredTime)),i.push({id:o.id,question:s.question,answer:s.answer,category:s.category,answerCount:s.answerCount,score:s.score,lastAnsweredTime:c})}),i.length===0){this.successMessage="\u96F2\u7AEF\u6C92\u6709\u5361\u7247\u53EF\u4E0B\u8F09\u3002\u672C\u5730\u8CC7\u6599\u672A\u8B8A\u66F4\u3002",this.isLoading=!1;return}this.flashcardService.replaceAllFlashcards(i),this.successMessage=`\u6210\u529F\u5F9E\u96F2\u7AEF\u4E0B\u8F09\u4E26\u540C\u6B65 ${i.length} \u5F35\u5361\u7247\uFF01`}catch(e){console.error(e),this.error="\u4E0B\u8F09\u5931\u6557: "+e.message}finally{this.isLoading=!1}})}onClose(){this.closeModal.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=bt({type:n,selectors:[["app-firebase-sync-modal"]],outputs:{closeModal:"closeModal"},decls:11,vars:6,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["class","loading-spinner",4,"ngIf"],["class","message error-message",4,"ngIf"],["class","message success-message",4,"ngIf"],["class","auth-form",3,"ngSubmit",4,"ngIf"],["class","user-actions",4,"ngIf"],[1,"close-btn",3,"click","disabled"],[1,"loading-spinner"],[1,"message","error-message"],[1,"message","success-message"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","minlength","6",3,"ngModelChange","ngModel"],["type","submit",1,"auth-button",3,"disabled"],["type","button",1,"toggle-auth-mode-button",3,"click"],[1,"user-actions"],[1,"actions"],[3,"click","disabled"],[1,"logout-btn",3,"click","disabled"]],template:function(t,r){t&1&&(x(0,"div",0),$("click",function(){return r.onClose()}),x(1,"div",1),$("click",function(o){return o.stopPropagation()}),x(2,"h3"),F(3,"Firebase \u8CC7\u6599\u540C\u6B65"),M(),Ee(4,yj,2,0,"div",2)(5,_j,2,1,"div",3)(6,vj,2,1,"div",4)(7,Ij,13,5,"form",5)(8,Ej,9,3,"div",6),x(9,"button",7),$("click",function(){return r.onClose()}),F(10,"\u95DC\u9589"),M()()()),t&2&&(k(4),B("ngIf",r.isLoading),k(),B("ngIf",r.error),k(),B("ngIf",r.successMessage&&!r.error),k(),B("ngIf",!r.user&&!r.isLoading),k(),B("ngIf",r.user&&!r.isLoading),k(),B("disabled",r.isLoading))},dependencies:[ct,_t,Mr,Nl,qt,Dn,Sl,tm,nm,Zn,Zg],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1050}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:8px;box-shadow:0 4px 15px #0003;min-width:350px;max-width:550px;text-align:center}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#333}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:.95em;color:#555}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;margin:10px 0;border:none;border-radius:5px;font-size:1em;cursor:pointer;transition:background-color .2s ease}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.logout-btn[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#212529!important}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#e0a800!important}.close-btn[_ngcontent-%COMP%]{background-color:#6c757d!important;color:#fff!important;margin-top:20px}.close-btn[_ngcontent-%COMP%]:hover{background-color:#5a6268!important}.loading-spinner[_ngcontent-%COMP%]{padding:20px;font-style:italic;color:#007bff}.message[_ngcontent-%COMP%]{padding:10px;margin:15px 0;border-radius:4px;font-weight:700}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.success-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}hr[_ngcontent-%COMP%]{margin:20px 0;border:0;border-top:1px solid #eee}.auth-form[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#495057}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:4px;box-sizing:border-box;font-size:1em}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.auth-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;margin:10px 0 5px;border:none;border-radius:5px;font-size:1em;cursor:pointer;background-color:#28a745;color:#fff;transition:background-color .2s ease}.auth-button[_ngcontent-%COMP%]:hover{background-color:#218838}.auth-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.toggle-auth-mode-button[_ngcontent-%COMP%]{background:none;border:none;color:#007bff;cursor:pointer;padding:5px 0;text-decoration:underline;font-size:.9em;display:block;width:100%;margin-top:5px}.toggle-auth-mode-button[_ngcontent-%COMP%]:hover{color:#0056b3}.user-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}"]})};var wj=["header"];function Cj(n,e){if(n&1){let t=Ue();x(0,"button",8),$("click",function(){ne(t);let i=z(2);return re(i.openAddForm())}),F(1,"\u65B0\u589E\u5361\u7247"),M()}}function Dj(n,e){if(n&1){let t=Ue();x(0,"app-flashcard-form",9,1),$("formSubmitted",function(i){ne(t);let o=z(2);return re(o.handleFormSubmit(i))})("cancel",function(){ne(t);let i=z(2);return re(i.handleFormCancel())}),M()}if(n&2){let t=z(2);B("cardToEdit",t.cardToEdit)}}function bj(n,e){if(n&1){let t=Ue();x(0,"div"),Ee(1,Cj,2,0,"button",5)(2,Dj,2,1,"app-flashcard-form",6),x(3,"app-flashcard-list",7),En(4,"async"),$("editCard",function(i){ne(t);let o=z();return re(o.openEditForm(i))})("deleteCard",function(i){ne(t);let o=z();return re(o.handleDeleteCard(i))}),M()()}if(n&2){let t=z();k(),B("ngIf",!t.showForm),k(),B("ngIf",t.showForm),k(),B("flashcards",Zs(4,3,t.flashcards$))}}function Tj(n,e){n&1&&(x(0,"div"),Ut(1,"app-flashcard-review"),M())}function Sj(n,e){if(n&1){let t=Ue();x(0,"app-firebase-sync-modal",10),$("closeModal",function(){ne(t);let i=z();return re(i.closeFirebaseSyncModal())}),M()}}var eh=class n{constructor(e){this.flashcardService=e;this.flashcards$=this.flashcardService.flashcards$}title="MemoCard";flashcards$;showForm=!1;cardToEdit=null;currentView="list";isFirebaseSyncModalOpen=!1;ngOnInit(){}toggleView(e){this.currentView=e,e==="list"&&(this.showForm=!1,this.cardToEdit=null)}openAddForm(){this.cardToEdit=null,this.showForm=!0,this.currentView="list",this.goToAnchor(this.headerDOM)}openEditForm(e){this.cardToEdit=e,this.showForm=!0,this.currentView="list",this.goToAnchor(this.headerDOM)}headerDOM;goToAnchor(e){e.nativeElement.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}handleFormSubmit(e){"id"in e?this.flashcardService.updateFlashcard(e):this.flashcardService.addFlashcard(e),this.showForm=!1,this.cardToEdit=null}handleFormCancel(){this.showForm=!1,this.cardToEdit=null}handleDeleteCard(e){this.flashcardService.deleteFlashcard(e)}openFirebaseSyncModal(){this.isFirebaseSyncModalOpen=!0}closeFirebaseSyncModal(){this.isFirebaseSyncModalOpen=!1}static \u0275fac=function(t){return new(t||n)(j(Nr))};static \u0275cmp=bt({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&p0(wj,5),t&2){let i;g0(i=m0())&&(r.headerDOM=i.first)}},decls:18,vars:8,consts:[["header",""],["form",""],[3,"click"],[4,"ngIf"],[3,"closeModal",4,"ngIf"],["class","add-new-btn",3,"click",4,"ngIf"],[3,"cardToEdit","formSubmitted","cancel",4,"ngIf"],[3,"editCard","deleteCard","flashcards"],[1,"add-new-btn",3,"click"],[3,"formSubmitted","cancel","cardToEdit"],[3,"closeModal"]],template:function(t,r){if(t&1){let i=Ue();x(0,"header",null,0)(2,"h1"),F(3),M(),x(4,"nav")(5,"button",2),$("click",function(){return ne(i),re(r.toggleView("list"))}),F(6,"\u5361\u7247\u5217\u8868"),M(),x(7,"button",2),$("click",function(){return ne(i),re(r.toggleView("review"))}),F(8,"\u958B\u59CB\u8907\u7FD2"),M(),x(9,"button",2),$("click",function(){return ne(i),re(r.openFirebaseSyncModal())}),F(10,"\u2601\uFE0F \u96F2\u7AEF\u540C\u6B65"),M()()(),x(11,"main"),Ee(12,bj,5,5,"div",3)(13,Tj,2,0,"div",3),M(),x(14,"footer")(15,"p"),F(16,"\xA9 Powerd by Google Gemin 2.5 pro MemoCard 20250525"),M()(),Ee(17,Sj,1,0,"app-firebase-sync-modal",4)}t&2&&(k(3),yt(r.title),k(2),yi("active",r.currentView==="list"),k(2),yi("active",r.currentView==="review"),k(5),B("ngIf",r.currentView==="list"),k(),B("ngIf",r.currentView==="review"),k(4),B("ngIf",r.isFirebaseSyncModalOpen))},dependencies:[ct,_t,ia,Ol,kl,Ll,Xd],styles:['.main-nav[_ngcontent-%COMP%]{background-color:#f8f8f8;padding:0 20px;height:60px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e0e0e0}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;gap:20px}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#555;font-weight:500;padding:10px 5px;position:relative;transition:color .2s}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]{color:#007aff}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:3px;background-color:#007aff}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active-link){color:#000}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]{display:flex;align-items:center}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:.9em;color:#555}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]{padding:8px 12px;background-color:#007aff;color:#fff;border:none;border-radius:15px;cursor:pointer;font-size:.9em;transition:background-color .2s}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]:hover{background-color:#005ecb}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button.logout[_ngcontent-%COMP%]{background-color:#6c757d}.main-nav[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   .auth-button.logout[_ngcontent-%COMP%]:hover{background-color:#5a6268}.content[_ngcontent-%COMP%]{padding:20px}']})};var lA={production:!1,firebase:{apiKey:"AIzaSyAgdsshTV18S8QX7dZYU19C8iBCMRNnQRo",authDomain:"gemini25memocard.firebaseapp.com",projectId:"gemini25memocard",storageBucket:"gemini25memocard.firebasestorage.app",messagingSenderId:"26704060076",appId:"1:26704060076:web:d497dae17135fcd2fb4909",measurementId:"G-XC7FN1EYS8"}};var Aj={providers:[db(()=>hb(lA.firebase)),cT(()=>lT()),sA(()=>cA())]};Bg(eh,Aj).catch(n=>console.error(n));export{Aj as appConfig};
